{"dependencies":[{"name":"../interfaces","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":18,"index":124},"end":{"line":7,"column":42,"index":148}}],"key":"596k1m46J08d+Af0Max0usWU1VI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var _interfaces = require(_dependencyMap[0], \"../interfaces\");\n  class RotationGestureDetector {\n    currentTime = 0;\n    previousTime = 0;\n    previousAngle = 0;\n    _rotation = 0;\n    _anchorX = 0;\n    _anchorY = 0;\n    isInProgress = false;\n    keyPointers = [NaN, NaN];\n    constructor(callbacks) {\n      this.onRotationBegin = callbacks.onRotationBegin;\n      this.onRotation = callbacks.onRotation;\n      this.onRotationEnd = callbacks.onRotationEnd;\n    }\n    updateCurrent(event, tracker) {\n      this.previousTime = this.currentTime;\n      this.currentTime = event.time;\n      const [firstPointerID, secondPointerID] = this.keyPointers;\n      const firstPointerCoords = tracker.getLastAbsoluteCoords(firstPointerID);\n      const secondPointerCoords = tracker.getLastAbsoluteCoords(secondPointerID);\n      if (!firstPointerCoords || !secondPointerCoords) {\n        return;\n      }\n      const vectorX = secondPointerCoords.x - firstPointerCoords.x;\n      const vectorY = secondPointerCoords.y - firstPointerCoords.y;\n      this._anchorX = (firstPointerCoords.x + secondPointerCoords.x) / 2;\n      this._anchorY = (firstPointerCoords.y + secondPointerCoords.y) / 2;\n\n      // Angle diff should be positive when rotating in clockwise direction\n      const angle = -Math.atan2(vectorY, vectorX);\n      this._rotation = Number.isNaN(this.previousAngle) ? 0 : this.previousAngle - angle;\n      this.previousAngle = angle;\n      if (this.rotation > Math.PI) {\n        this._rotation -= Math.PI;\n      } else if (this.rotation < -Math.PI) {\n        this._rotation += Math.PI;\n      }\n      if (this.rotation > Math.PI / 2) {\n        this._rotation -= Math.PI;\n      } else if (this.rotation < -Math.PI / 2) {\n        this._rotation += Math.PI;\n      }\n    }\n    finish() {\n      if (!this.isInProgress) {\n        return;\n      }\n      this.isInProgress = false;\n      this.keyPointers = [NaN, NaN];\n      this.onRotationEnd(this);\n    }\n    setKeyPointers(tracker) {\n      if (this.keyPointers[0] && this.keyPointers[1]) {\n        return;\n      }\n      const pointerIDs = tracker.trackedPointers.keys();\n      this.keyPointers[0] = pointerIDs.next().value;\n      this.keyPointers[1] = pointerIDs.next().value;\n    }\n    onTouchEvent(event, tracker) {\n      switch (event.eventType) {\n        case _interfaces.EventTypes.DOWN:\n          this.isInProgress = false;\n          break;\n        case _interfaces.EventTypes.ADDITIONAL_POINTER_DOWN:\n          if (this.isInProgress) {\n            break;\n          }\n          this.isInProgress = true;\n          this.previousTime = event.time;\n          this.previousAngle = NaN;\n          this.setKeyPointers(tracker);\n          this.updateCurrent(event, tracker);\n          this.onRotationBegin(this);\n          break;\n        case _interfaces.EventTypes.MOVE:\n          if (!this.isInProgress) {\n            break;\n          }\n          this.updateCurrent(event, tracker);\n          this.onRotation(this);\n          break;\n        case _interfaces.EventTypes.ADDITIONAL_POINTER_UP:\n          if (!this.isInProgress) {\n            break;\n          }\n          if (this.keyPointers.indexOf(event.pointerId) >= 0) {\n            this.finish();\n          }\n          break;\n        case _interfaces.EventTypes.UP:\n          if (this.isInProgress) {\n            this.finish();\n          }\n          break;\n      }\n      return true;\n    }\n    reset() {\n      this.keyPointers = [NaN, NaN];\n      this.isInProgress = false;\n    }\n    get anchorX() {\n      return this._anchorX;\n    }\n    get anchorY() {\n      return this._anchorY;\n    }\n    get rotation() {\n      return this._rotation;\n    }\n    get timeDelta() {\n      return this.currentTime + this.previousTime;\n    }\n  }\n  exports.default = RotationGestureDetector;\n});","lineCount":125,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"default"],[7,17,6,15],[7,20,6,18],[7,25,6,23],[7,26,6,24],[8,2,7,0],[8,6,7,4,"_interfaces"],[8,17,7,15],[8,20,7,18,"require"],[8,27,7,25],[8,28,7,25,"_dependencyMap"],[8,42,7,25],[8,62,7,41],[8,63,7,42],[9,2,8,0],[9,8,8,6,"RotationGestureDetector"],[9,31,8,29],[9,32,8,30],[10,4,9,2,"currentTime"],[10,15,9,13],[10,18,9,16],[10,19,9,17],[11,4,10,2,"previousTime"],[11,16,10,14],[11,19,10,17],[11,20,10,18],[12,4,11,2,"previousAngle"],[12,17,11,15],[12,20,11,18],[12,21,11,19],[13,4,12,2,"_rotation"],[13,13,12,11],[13,16,12,14],[13,17,12,15],[14,4,13,2,"_anchorX"],[14,12,13,10],[14,15,13,13],[14,16,13,14],[15,4,14,2,"_anchorY"],[15,12,14,10],[15,15,14,13],[15,16,14,14],[16,4,15,2,"isInProgress"],[16,16,15,14],[16,19,15,17],[16,24,15,22],[17,4,16,2,"keyPointers"],[17,15,16,13],[17,18,16,16],[17,19,16,17,"NaN"],[17,22,16,20],[17,24,16,22,"NaN"],[17,27,16,25],[17,28,16,26],[18,4,17,2,"constructor"],[18,15,17,13,"constructor"],[18,16,17,14,"callbacks"],[18,25,17,23],[18,27,17,25],[19,6,18,4],[19,10,18,8],[19,11,18,9,"onRotationBegin"],[19,26,18,24],[19,29,18,27,"callbacks"],[19,38,18,36],[19,39,18,37,"onRotationBegin"],[19,54,18,52],[20,6,19,4],[20,10,19,8],[20,11,19,9,"onRotation"],[20,21,19,19],[20,24,19,22,"callbacks"],[20,33,19,31],[20,34,19,32,"onRotation"],[20,44,19,42],[21,6,20,4],[21,10,20,8],[21,11,20,9,"onRotationEnd"],[21,24,20,22],[21,27,20,25,"callbacks"],[21,36,20,34],[21,37,20,35,"onRotationEnd"],[21,50,20,48],[22,4,21,2],[23,4,22,2,"updateCurrent"],[23,17,22,15,"updateCurrent"],[23,18,22,16,"event"],[23,23,22,21],[23,25,22,23,"tracker"],[23,32,22,30],[23,34,22,32],[24,6,23,4],[24,10,23,8],[24,11,23,9,"previousTime"],[24,23,23,21],[24,26,23,24],[24,30,23,28],[24,31,23,29,"currentTime"],[24,42,23,40],[25,6,24,4],[25,10,24,8],[25,11,24,9,"currentTime"],[25,22,24,20],[25,25,24,23,"event"],[25,30,24,28],[25,31,24,29,"time"],[25,35,24,33],[26,6,25,4],[26,12,25,10],[26,13,25,11,"firstPointerID"],[26,27,25,25],[26,29,25,27,"secondPointerID"],[26,44,25,42],[26,45,25,43],[26,48,25,46],[26,52,25,50],[26,53,25,51,"keyPointers"],[26,64,25,62],[27,6,26,4],[27,12,26,10,"firstPointerCoords"],[27,30,26,28],[27,33,26,31,"tracker"],[27,40,26,38],[27,41,26,39,"getLastAbsoluteCoords"],[27,62,26,60],[27,63,26,61,"firstPointerID"],[27,77,26,75],[27,78,26,76],[28,6,27,4],[28,12,27,10,"secondPointerCoords"],[28,31,27,29],[28,34,27,32,"tracker"],[28,41,27,39],[28,42,27,40,"getLastAbsoluteCoords"],[28,63,27,61],[28,64,27,62,"secondPointerID"],[28,79,27,77],[28,80,27,78],[29,6,28,4],[29,10,28,8],[29,11,28,9,"firstPointerCoords"],[29,29,28,27],[29,33,28,31],[29,34,28,32,"secondPointerCoords"],[29,53,28,51],[29,55,28,53],[30,8,29,6],[31,6,30,4],[32,6,31,4],[32,12,31,10,"vectorX"],[32,19,31,17],[32,22,31,20,"secondPointerCoords"],[32,41,31,39],[32,42,31,40,"x"],[32,43,31,41],[32,46,31,44,"firstPointerCoords"],[32,64,31,62],[32,65,31,63,"x"],[32,66,31,64],[33,6,32,4],[33,12,32,10,"vectorY"],[33,19,32,17],[33,22,32,20,"secondPointerCoords"],[33,41,32,39],[33,42,32,40,"y"],[33,43,32,41],[33,46,32,44,"firstPointerCoords"],[33,64,32,62],[33,65,32,63,"y"],[33,66,32,64],[34,6,33,4],[34,10,33,8],[34,11,33,9,"_anchorX"],[34,19,33,17],[34,22,33,20],[34,23,33,21,"firstPointerCoords"],[34,41,33,39],[34,42,33,40,"x"],[34,43,33,41],[34,46,33,44,"secondPointerCoords"],[34,65,33,63],[34,66,33,64,"x"],[34,67,33,65],[34,71,33,69],[34,72,33,70],[35,6,34,4],[35,10,34,8],[35,11,34,9,"_anchorY"],[35,19,34,17],[35,22,34,20],[35,23,34,21,"firstPointerCoords"],[35,41,34,39],[35,42,34,40,"y"],[35,43,34,41],[35,46,34,44,"secondPointerCoords"],[35,65,34,63],[35,66,34,64,"y"],[35,67,34,65],[35,71,34,69],[35,72,34,70],[37,6,36,4],[38,6,37,4],[38,12,37,10,"angle"],[38,17,37,15],[38,20,37,18],[38,21,37,19,"Math"],[38,25,37,23],[38,26,37,24,"atan2"],[38,31,37,29],[38,32,37,30,"vectorY"],[38,39,37,37],[38,41,37,39,"vectorX"],[38,48,37,46],[38,49,37,47],[39,6,38,4],[39,10,38,8],[39,11,38,9,"_rotation"],[39,20,38,18],[39,23,38,21,"Number"],[39,29,38,27],[39,30,38,28,"isNaN"],[39,35,38,33],[39,36,38,34],[39,40,38,38],[39,41,38,39,"previousAngle"],[39,54,38,52],[39,55,38,53],[39,58,38,56],[39,59,38,57],[39,62,38,60],[39,66,38,64],[39,67,38,65,"previousAngle"],[39,80,38,78],[39,83,38,81,"angle"],[39,88,38,86],[40,6,39,4],[40,10,39,8],[40,11,39,9,"previousAngle"],[40,24,39,22],[40,27,39,25,"angle"],[40,32,39,30],[41,6,40,4],[41,10,40,8],[41,14,40,12],[41,15,40,13,"rotation"],[41,23,40,21],[41,26,40,24,"Math"],[41,30,40,28],[41,31,40,29,"PI"],[41,33,40,31],[41,35,40,33],[42,8,41,6],[42,12,41,10],[42,13,41,11,"_rotation"],[42,22,41,20],[42,26,41,24,"Math"],[42,30,41,28],[42,31,41,29,"PI"],[42,33,41,31],[43,6,42,4],[43,7,42,5],[43,13,42,11],[43,17,42,15],[43,21,42,19],[43,22,42,20,"rotation"],[43,30,42,28],[43,33,42,31],[43,34,42,32,"Math"],[43,38,42,36],[43,39,42,37,"PI"],[43,41,42,39],[43,43,42,41],[44,8,43,6],[44,12,43,10],[44,13,43,11,"_rotation"],[44,22,43,20],[44,26,43,24,"Math"],[44,30,43,28],[44,31,43,29,"PI"],[44,33,43,31],[45,6,44,4],[46,6,45,4],[46,10,45,8],[46,14,45,12],[46,15,45,13,"rotation"],[46,23,45,21],[46,26,45,24,"Math"],[46,30,45,28],[46,31,45,29,"PI"],[46,33,45,31],[46,36,45,34],[46,37,45,35],[46,39,45,37],[47,8,46,6],[47,12,46,10],[47,13,46,11,"_rotation"],[47,22,46,20],[47,26,46,24,"Math"],[47,30,46,28],[47,31,46,29,"PI"],[47,33,46,31],[48,6,47,4],[48,7,47,5],[48,13,47,11],[48,17,47,15],[48,21,47,19],[48,22,47,20,"rotation"],[48,30,47,28],[48,33,47,31],[48,34,47,32,"Math"],[48,38,47,36],[48,39,47,37,"PI"],[48,41,47,39],[48,44,47,42],[48,45,47,43],[48,47,47,45],[49,8,48,6],[49,12,48,10],[49,13,48,11,"_rotation"],[49,22,48,20],[49,26,48,24,"Math"],[49,30,48,28],[49,31,48,29,"PI"],[49,33,48,31],[50,6,49,4],[51,4,50,2],[52,4,51,2,"finish"],[52,10,51,8,"finish"],[52,11,51,8],[52,13,51,11],[53,6,52,4],[53,10,52,8],[53,11,52,9],[53,15,52,13],[53,16,52,14,"isInProgress"],[53,28,52,26],[53,30,52,28],[54,8,53,6],[55,6,54,4],[56,6,55,4],[56,10,55,8],[56,11,55,9,"isInProgress"],[56,23,55,21],[56,26,55,24],[56,31,55,29],[57,6,56,4],[57,10,56,8],[57,11,56,9,"keyPointers"],[57,22,56,20],[57,25,56,23],[57,26,56,24,"NaN"],[57,29,56,27],[57,31,56,29,"NaN"],[57,34,56,32],[57,35,56,33],[58,6,57,4],[58,10,57,8],[58,11,57,9,"onRotationEnd"],[58,24,57,22],[58,25,57,23],[58,29,57,27],[58,30,57,28],[59,4,58,2],[60,4,59,2,"setKeyPointers"],[60,18,59,16,"setKeyPointers"],[60,19,59,17,"tracker"],[60,26,59,24],[60,28,59,26],[61,6,60,4],[61,10,60,8],[61,14,60,12],[61,15,60,13,"keyPointers"],[61,26,60,24],[61,27,60,25],[61,28,60,26],[61,29,60,27],[61,33,60,31],[61,37,60,35],[61,38,60,36,"keyPointers"],[61,49,60,47],[61,50,60,48],[61,51,60,49],[61,52,60,50],[61,54,60,52],[62,8,61,6],[63,6,62,4],[64,6,63,4],[64,12,63,10,"pointerIDs"],[64,22,63,20],[64,25,63,23,"tracker"],[64,32,63,30],[64,33,63,31,"trackedPointers"],[64,48,63,46],[64,49,63,47,"keys"],[64,53,63,51],[64,54,63,52],[64,55,63,53],[65,6,64,4],[65,10,64,8],[65,11,64,9,"keyPointers"],[65,22,64,20],[65,23,64,21],[65,24,64,22],[65,25,64,23],[65,28,64,26,"pointerIDs"],[65,38,64,36],[65,39,64,37,"next"],[65,43,64,41],[65,44,64,42],[65,45,64,43],[65,46,64,44,"value"],[65,51,64,49],[66,6,65,4],[66,10,65,8],[66,11,65,9,"keyPointers"],[66,22,65,20],[66,23,65,21],[66,24,65,22],[66,25,65,23],[66,28,65,26,"pointerIDs"],[66,38,65,36],[66,39,65,37,"next"],[66,43,65,41],[66,44,65,42],[66,45,65,43],[66,46,65,44,"value"],[66,51,65,49],[67,4,66,2],[68,4,67,2,"onTouchEvent"],[68,16,67,14,"onTouchEvent"],[68,17,67,15,"event"],[68,22,67,20],[68,24,67,22,"tracker"],[68,31,67,29],[68,33,67,31],[69,6,68,4],[69,14,68,12,"event"],[69,19,68,17],[69,20,68,18,"eventType"],[69,29,68,27],[70,8,69,6],[70,13,69,11,"_interfaces"],[70,24,69,22],[70,25,69,23,"EventTypes"],[70,35,69,33],[70,36,69,34,"DOWN"],[70,40,69,38],[71,10,70,8],[71,14,70,12],[71,15,70,13,"isInProgress"],[71,27,70,25],[71,30,70,28],[71,35,70,33],[72,10,71,8],[73,8,72,6],[73,13,72,11,"_interfaces"],[73,24,72,22],[73,25,72,23,"EventTypes"],[73,35,72,33],[73,36,72,34,"ADDITIONAL_POINTER_DOWN"],[73,59,72,57],[74,10,73,8],[74,14,73,12],[74,18,73,16],[74,19,73,17,"isInProgress"],[74,31,73,29],[74,33,73,31],[75,12,74,10],[76,10,75,8],[77,10,76,8],[77,14,76,12],[77,15,76,13,"isInProgress"],[77,27,76,25],[77,30,76,28],[77,34,76,32],[78,10,77,8],[78,14,77,12],[78,15,77,13,"previousTime"],[78,27,77,25],[78,30,77,28,"event"],[78,35,77,33],[78,36,77,34,"time"],[78,40,77,38],[79,10,78,8],[79,14,78,12],[79,15,78,13,"previousAngle"],[79,28,78,26],[79,31,78,29,"NaN"],[79,34,78,32],[80,10,79,8],[80,14,79,12],[80,15,79,13,"setKeyPointers"],[80,29,79,27],[80,30,79,28,"tracker"],[80,37,79,35],[80,38,79,36],[81,10,80,8],[81,14,80,12],[81,15,80,13,"updateCurrent"],[81,28,80,26],[81,29,80,27,"event"],[81,34,80,32],[81,36,80,34,"tracker"],[81,43,80,41],[81,44,80,42],[82,10,81,8],[82,14,81,12],[82,15,81,13,"onRotationBegin"],[82,30,81,28],[82,31,81,29],[82,35,81,33],[82,36,81,34],[83,10,82,8],[84,8,83,6],[84,13,83,11,"_interfaces"],[84,24,83,22],[84,25,83,23,"EventTypes"],[84,35,83,33],[84,36,83,34,"MOVE"],[84,40,83,38],[85,10,84,8],[85,14,84,12],[85,15,84,13],[85,19,84,17],[85,20,84,18,"isInProgress"],[85,32,84,30],[85,34,84,32],[86,12,85,10],[87,10,86,8],[88,10,87,8],[88,14,87,12],[88,15,87,13,"updateCurrent"],[88,28,87,26],[88,29,87,27,"event"],[88,34,87,32],[88,36,87,34,"tracker"],[88,43,87,41],[88,44,87,42],[89,10,88,8],[89,14,88,12],[89,15,88,13,"onRotation"],[89,25,88,23],[89,26,88,24],[89,30,88,28],[89,31,88,29],[90,10,89,8],[91,8,90,6],[91,13,90,11,"_interfaces"],[91,24,90,22],[91,25,90,23,"EventTypes"],[91,35,90,33],[91,36,90,34,"ADDITIONAL_POINTER_UP"],[91,57,90,55],[92,10,91,8],[92,14,91,12],[92,15,91,13],[92,19,91,17],[92,20,91,18,"isInProgress"],[92,32,91,30],[92,34,91,32],[93,12,92,10],[94,10,93,8],[95,10,94,8],[95,14,94,12],[95,18,94,16],[95,19,94,17,"keyPointers"],[95,30,94,28],[95,31,94,29,"indexOf"],[95,38,94,36],[95,39,94,37,"event"],[95,44,94,42],[95,45,94,43,"pointerId"],[95,54,94,52],[95,55,94,53],[95,59,94,57],[95,60,94,58],[95,62,94,60],[96,12,95,10],[96,16,95,14],[96,17,95,15,"finish"],[96,23,95,21],[96,24,95,22],[96,25,95,23],[97,10,96,8],[98,10,97,8],[99,8,98,6],[99,13,98,11,"_interfaces"],[99,24,98,22],[99,25,98,23,"EventTypes"],[99,35,98,33],[99,36,98,34,"UP"],[99,38,98,36],[100,10,99,8],[100,14,99,12],[100,18,99,16],[100,19,99,17,"isInProgress"],[100,31,99,29],[100,33,99,31],[101,12,100,10],[101,16,100,14],[101,17,100,15,"finish"],[101,23,100,21],[101,24,100,22],[101,25,100,23],[102,10,101,8],[103,10,102,8],[104,6,103,4],[105,6,104,4],[105,13,104,11],[105,17,104,15],[106,4,105,2],[107,4,106,2,"reset"],[107,9,106,7,"reset"],[107,10,106,7],[107,12,106,10],[108,6,107,4],[108,10,107,8],[108,11,107,9,"keyPointers"],[108,22,107,20],[108,25,107,23],[108,26,107,24,"NaN"],[108,29,107,27],[108,31,107,29,"NaN"],[108,34,107,32],[108,35,107,33],[109,6,108,4],[109,10,108,8],[109,11,108,9,"isInProgress"],[109,23,108,21],[109,26,108,24],[109,31,108,29],[110,4,109,2],[111,4,110,2],[111,8,110,6,"anchorX"],[111,15,110,13,"anchorX"],[111,16,110,13],[111,18,110,16],[112,6,111,4],[112,13,111,11],[112,17,111,15],[112,18,111,16,"_anchorX"],[112,26,111,24],[113,4,112,2],[114,4,113,2],[114,8,113,6,"anchorY"],[114,15,113,13,"anchorY"],[114,16,113,13],[114,18,113,16],[115,6,114,4],[115,13,114,11],[115,17,114,15],[115,18,114,16,"_anchorY"],[115,26,114,24],[116,4,115,2],[117,4,116,2],[117,8,116,6,"rotation"],[117,16,116,14,"rotation"],[117,17,116,14],[117,19,116,17],[118,6,117,4],[118,13,117,11],[118,17,117,15],[118,18,117,16,"_rotation"],[118,27,117,25],[119,4,118,2],[120,4,119,2],[120,8,119,6,"timeDelta"],[120,17,119,15,"timeDelta"],[120,18,119,15],[120,20,119,18],[121,6,120,4],[121,13,120,11],[121,17,120,15],[121,18,120,16,"currentTime"],[121,29,120,27],[121,32,120,30],[121,36,120,34],[121,37,120,35,"previousTime"],[121,49,120,47],[122,4,121,2],[123,2,122,0],[124,2,123,0,"exports"],[124,9,123,7],[124,10,123,8,"default"],[124,17,123,15],[124,20,123,18,"RotationGestureDetector"],[124,43,123,41],[125,0,123,42],[125,3]],"functionMap":{"names":["<global>","RotationGestureDetector","constructor","updateCurrent","finish","setKeyPointers","onTouchEvent","reset","get__anchorX","get__anchorY","get__rotation","get__timeDelta"],"mappings":"AAA;ACO;ECS;GDI;EEC;GF4B;EGC;GHO;EIC;GJO;EKC;GLsC;EMC;GNG;EOC;GPE;EQC;GRE;ESC;GTE;EUC;GVE;CDC"},"hasCjsExports":true},"type":"js/module"}]}