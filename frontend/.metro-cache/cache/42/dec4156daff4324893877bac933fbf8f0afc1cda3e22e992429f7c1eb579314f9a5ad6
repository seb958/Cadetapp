{"dependencies":[{"name":"./gesture","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":49,"index":64}}],"key":"o5NgfUJQHKr9PBMfvlu69EXuwZE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"ComposedGesture\", {\n    enumerable: true,\n    get: function () {\n      return ComposedGesture;\n    }\n  });\n  Object.defineProperty(exports, \"SimultaneousGesture\", {\n    enumerable: true,\n    get: function () {\n      return SimultaneousGesture;\n    }\n  });\n  Object.defineProperty(exports, \"ExclusiveGesture\", {\n    enumerable: true,\n    get: function () {\n      return ExclusiveGesture;\n    }\n  });\n  var _gesture = require(_dependencyMap[0], \"./gesture\");\n  function extendRelation(currentRelation, extendWith) {\n    if (currentRelation === undefined) {\n      return [...extendWith];\n    } else {\n      return [...currentRelation, ...extendWith];\n    }\n  }\n  class ComposedGesture extends _gesture.Gesture {\n    gestures = [];\n    simultaneousGestures = [];\n    requireGesturesToFail = [];\n    constructor(...gestures) {\n      super();\n      this.gestures = gestures;\n    }\n    prepareSingleGesture(gesture, simultaneousGestures, requireGesturesToFail) {\n      if (gesture instanceof _gesture.BaseGesture) {\n        const newConfig = Object.assign({}, gesture.config);\n\n        // No need to extend `blocksHandlers` here, because it's not changed in composition.\n        // The same effect is achieved by reversing the order of 2 gestures in `Exclusive`\n        newConfig.simultaneousWith = extendRelation(newConfig.simultaneousWith, simultaneousGestures);\n        newConfig.requireToFail = extendRelation(newConfig.requireToFail, requireGesturesToFail);\n        gesture.config = newConfig;\n      } else if (gesture instanceof ComposedGesture) {\n        gesture.simultaneousGestures = simultaneousGestures;\n        gesture.requireGesturesToFail = requireGesturesToFail;\n        gesture.prepare();\n      }\n    }\n    prepare() {\n      for (const gesture of this.gestures) {\n        this.prepareSingleGesture(gesture, this.simultaneousGestures, this.requireGesturesToFail);\n      }\n    }\n    initialize() {\n      for (const gesture of this.gestures) {\n        gesture.initialize();\n      }\n    }\n    toGestureArray() {\n      return this.gestures.flatMap(gesture => gesture.toGestureArray());\n    }\n  }\n  class SimultaneousGesture extends ComposedGesture {\n    prepare() {\n      // This piece of magic works something like this:\n      // for every gesture in the array\n      const simultaneousArrays = this.gestures.map(gesture =>\n      // we take the array it's in\n      this.gestures\n      // and make a copy without it\n      .filter(x => x !== gesture)\n      // then we flatmap the result to get list of raw (not composed) gestures\n      // this way we don't make the gestures simultaneous with themselves, which is\n      // important when the gesture is `ExclusiveGesture` - we don't want to make\n      // exclusive gestures simultaneous\n      .flatMap(x => x.toGestureArray()));\n      for (let i = 0; i < this.gestures.length; i++) {\n        this.prepareSingleGesture(this.gestures[i], simultaneousArrays[i], this.requireGesturesToFail);\n      }\n    }\n  }\n  class ExclusiveGesture extends ComposedGesture {\n    prepare() {\n      // Transforms the array of gestures into array of grouped raw (not composed) gestures\n      // i.e. [gesture1, gesture2, ComposedGesture(gesture3, gesture4)] -> [[gesture1], [gesture2], [gesture3, gesture4]]\n      const gestureArrays = this.gestures.map(gesture => gesture.toGestureArray());\n      let requireToFail = [];\n      for (let i = 0; i < this.gestures.length; i++) {\n        this.prepareSingleGesture(this.gestures[i], this.simultaneousGestures, this.requireGesturesToFail.concat(requireToFail));\n\n        // Every group gets to wait for all groups before it\n        requireToFail = requireToFail.concat(gestureArrays[i]);\n      }\n    }\n  }\n});","lineCount":103,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,11,0,"Object"],[7,8,11,0],[7,9,11,0,"defineProperty"],[7,23,11,0],[7,24,11,0,"exports"],[7,31,11,0],[8,4,11,0,"enumerable"],[8,14,11,0],[9,4,11,0,"get"],[9,7,11,0],[9,18,11,0,"get"],[9,19,11,0],[10,6,11,0],[10,13,11,0,"ComposedGesture"],[10,28,11,0],[11,4,11,0],[12,2,11,0],[13,2,50,0,"Object"],[13,8,50,0],[13,9,50,0,"defineProperty"],[13,23,50,0],[13,24,50,0,"exports"],[13,31,50,0],[14,4,50,0,"enumerable"],[14,14,50,0],[15,4,50,0,"get"],[15,7,50,0],[15,18,50,0,"get"],[15,19,50,0],[16,6,50,0],[16,13,50,0,"SimultaneousGesture"],[16,32,50,0],[17,4,50,0],[18,2,50,0],[19,2,69,0,"Object"],[19,8,69,0],[19,9,69,0,"defineProperty"],[19,23,69,0],[19,24,69,0,"exports"],[19,31,69,0],[20,4,69,0,"enumerable"],[20,14,69,0],[21,4,69,0,"get"],[21,7,69,0],[21,18,69,0,"get"],[21,19,69,0],[22,6,69,0],[22,13,69,0,"ExclusiveGesture"],[22,29,69,0],[23,4,69,0],[24,2,69,0],[25,2,3,0],[25,6,3,0,"_gesture"],[25,14,3,0],[25,17,3,0,"require"],[25,24,3,0],[25,25,3,0,"_dependencyMap"],[25,39,3,0],[26,2,4,0],[26,11,4,9,"extendRelation"],[26,25,4,23,"extendRelation"],[26,26,4,24,"currentRelation"],[26,41,4,39],[26,43,4,41,"extendWith"],[26,53,4,51],[26,55,4,53],[27,4,5,2],[27,8,5,6,"currentRelation"],[27,23,5,21],[27,28,5,26,"undefined"],[27,37,5,35],[27,39,5,37],[28,6,6,4],[28,13,6,11],[28,14,6,12],[28,17,6,15,"extendWith"],[28,27,6,25],[28,28,6,26],[29,4,7,2],[29,5,7,3],[29,11,7,9],[30,6,8,4],[30,13,8,11],[30,14,8,12],[30,17,8,15,"currentRelation"],[30,32,8,30],[30,34,8,32],[30,37,8,35,"extendWith"],[30,47,8,45],[30,48,8,46],[31,4,9,2],[32,2,10,0],[33,2,11,7],[33,8,11,13,"ComposedGesture"],[33,23,11,28],[33,32,11,37,"Gesture"],[33,40,11,44],[33,41,11,44,"Gesture"],[33,48,11,44],[33,49,11,45],[34,4,12,2,"gestures"],[34,12,12,10],[34,15,12,13],[34,17,12,15],[35,4,13,2,"simultaneousGestures"],[35,24,13,22],[35,27,13,25],[35,29,13,27],[36,4,14,2,"requireGesturesToFail"],[36,25,14,23],[36,28,14,26],[36,30,14,28],[37,4,15,2,"constructor"],[37,15,15,13,"constructor"],[37,16,15,14],[37,19,15,17,"gestures"],[37,27,15,25],[37,29,15,27],[38,6,16,4],[38,11,16,9],[38,12,16,10],[38,13,16,11],[39,6,17,4],[39,10,17,8],[39,11,17,9,"gestures"],[39,19,17,17],[39,22,17,20,"gestures"],[39,30,17,28],[40,4,18,2],[41,4,19,2,"prepareSingleGesture"],[41,24,19,22,"prepareSingleGesture"],[41,25,19,23,"gesture"],[41,32,19,30],[41,34,19,32,"simultaneousGestures"],[41,54,19,52],[41,56,19,54,"requireGesturesToFail"],[41,77,19,75],[41,79,19,77],[42,6,20,4],[42,10,20,8,"gesture"],[42,17,20,15],[42,29,20,27,"BaseGesture"],[42,37,20,38],[42,38,20,38,"BaseGesture"],[42,49,20,38],[42,51,20,40],[43,8,21,6],[43,14,21,12,"newConfig"],[43,23,21,21],[43,26,21,21,"Object"],[43,32,21,21],[43,33,21,21,"assign"],[43,39,21,21],[43,44,22,11,"gesture"],[43,51,22,18],[43,52,22,19,"config"],[43,58,22,25],[43,59,23,7],[45,8,25,6],[46,8,26,6],[47,8,27,6,"newConfig"],[47,17,27,15],[47,18,27,16,"simultaneousWith"],[47,34,27,32],[47,37,27,35,"extendRelation"],[47,51,27,49],[47,52,27,50,"newConfig"],[47,61,27,59],[47,62,27,60,"simultaneousWith"],[47,78,27,76],[47,80,27,78,"simultaneousGestures"],[47,100,27,98],[47,101,27,99],[48,8,28,6,"newConfig"],[48,17,28,15],[48,18,28,16,"requireToFail"],[48,31,28,29],[48,34,28,32,"extendRelation"],[48,48,28,46],[48,49,28,47,"newConfig"],[48,58,28,56],[48,59,28,57,"requireToFail"],[48,72,28,70],[48,74,28,72,"requireGesturesToFail"],[48,95,28,93],[48,96,28,94],[49,8,29,6,"gesture"],[49,15,29,13],[49,16,29,14,"config"],[49,22,29,20],[49,25,29,23,"newConfig"],[49,34,29,32],[50,6,30,4],[50,7,30,5],[50,13,30,11],[50,17,30,15,"gesture"],[50,24,30,22],[50,36,30,34,"ComposedGesture"],[50,51,30,49],[50,53,30,51],[51,8,31,6,"gesture"],[51,15,31,13],[51,16,31,14,"simultaneousGestures"],[51,36,31,34],[51,39,31,37,"simultaneousGestures"],[51,59,31,57],[52,8,32,6,"gesture"],[52,15,32,13],[52,16,32,14,"requireGesturesToFail"],[52,37,32,35],[52,40,32,38,"requireGesturesToFail"],[52,61,32,59],[53,8,33,6,"gesture"],[53,15,33,13],[53,16,33,14,"prepare"],[53,23,33,21],[53,24,33,22],[53,25,33,23],[54,6,34,4],[55,4,35,2],[56,4,36,2,"prepare"],[56,11,36,9,"prepare"],[56,12,36,9],[56,14,36,12],[57,6,37,4],[57,11,37,9],[57,17,37,15,"gesture"],[57,24,37,22],[57,28,37,26],[57,32,37,30],[57,33,37,31,"gestures"],[57,41,37,39],[57,43,37,41],[58,8,38,6],[58,12,38,10],[58,13,38,11,"prepareSingleGesture"],[58,33,38,31],[58,34,38,32,"gesture"],[58,41,38,39],[58,43,38,41],[58,47,38,45],[58,48,38,46,"simultaneousGestures"],[58,68,38,66],[58,70,38,68],[58,74,38,72],[58,75,38,73,"requireGesturesToFail"],[58,96,38,94],[58,97,38,95],[59,6,39,4],[60,4,40,2],[61,4,41,2,"initialize"],[61,14,41,12,"initialize"],[61,15,41,12],[61,17,41,15],[62,6,42,4],[62,11,42,9],[62,17,42,15,"gesture"],[62,24,42,22],[62,28,42,26],[62,32,42,30],[62,33,42,31,"gestures"],[62,41,42,39],[62,43,42,41],[63,8,43,6,"gesture"],[63,15,43,13],[63,16,43,14,"initialize"],[63,26,43,24],[63,27,43,25],[63,28,43,26],[64,6,44,4],[65,4,45,2],[66,4,46,2,"toGestureArray"],[66,18,46,16,"toGestureArray"],[66,19,46,16],[66,21,46,19],[67,6,47,4],[67,13,47,11],[67,17,47,15],[67,18,47,16,"gestures"],[67,26,47,24],[67,27,47,25,"flatMap"],[67,34,47,32],[67,35,47,33,"gesture"],[67,42,47,40],[67,46,47,44,"gesture"],[67,53,47,51],[67,54,47,52,"toGestureArray"],[67,68,47,66],[67,69,47,67],[67,70,47,68],[67,71,47,69],[68,4,48,2],[69,2,49,0],[70,2,50,7],[70,8,50,13,"SimultaneousGesture"],[70,27,50,32],[70,36,50,41,"ComposedGesture"],[70,51,50,56],[70,52,50,57],[71,4,51,2,"prepare"],[71,11,51,9,"prepare"],[71,12,51,9],[71,14,51,12],[72,6,52,4],[73,6,53,4],[74,6,54,4],[74,12,54,10,"simultaneousArrays"],[74,30,54,28],[74,33,54,31],[74,37,54,35],[74,38,54,36,"gestures"],[74,46,54,44],[74,47,54,45,"map"],[74,50,54,48],[74,51,54,49,"gesture"],[74,58,54,56],[75,6,55,4],[76,6,56,4],[76,10,56,8],[76,11,56,9,"gestures"],[77,6,57,4],[78,6,57,4],[78,7,58,5,"filter"],[78,13,58,11],[78,14,58,12,"x"],[78,15,58,13],[78,19,58,17,"x"],[78,20,58,18],[78,25,58,23,"gesture"],[78,32,58,30],[79,6,59,4],[80,6,60,4],[81,6,61,4],[82,6,62,4],[83,6,62,4],[83,7,63,5,"flatMap"],[83,14,63,12],[83,15,63,13,"x"],[83,16,63,14],[83,20,63,18,"x"],[83,21,63,19],[83,22,63,20,"toGestureArray"],[83,36,63,34],[83,37,63,35],[83,38,63,36],[83,39,63,37],[83,40,63,38],[84,6,64,4],[84,11,64,9],[84,15,64,13,"i"],[84,16,64,14],[84,19,64,17],[84,20,64,18],[84,22,64,20,"i"],[84,23,64,21],[84,26,64,24],[84,30,64,28],[84,31,64,29,"gestures"],[84,39,64,37],[84,40,64,38,"length"],[84,46,64,44],[84,48,64,46,"i"],[84,49,64,47],[84,51,64,49],[84,53,64,51],[85,8,65,6],[85,12,65,10],[85,13,65,11,"prepareSingleGesture"],[85,33,65,31],[85,34,65,32],[85,38,65,36],[85,39,65,37,"gestures"],[85,47,65,45],[85,48,65,46,"i"],[85,49,65,47],[85,50,65,48],[85,52,65,50,"simultaneousArrays"],[85,70,65,68],[85,71,65,69,"i"],[85,72,65,70],[85,73,65,71],[85,75,65,73],[85,79,65,77],[85,80,65,78,"requireGesturesToFail"],[85,101,65,99],[85,102,65,100],[86,6,66,4],[87,4,67,2],[88,2,68,0],[89,2,69,7],[89,8,69,13,"ExclusiveGesture"],[89,24,69,29],[89,33,69,38,"ComposedGesture"],[89,48,69,53],[89,49,69,54],[90,4,70,2,"prepare"],[90,11,70,9,"prepare"],[90,12,70,9],[90,14,70,12],[91,6,71,4],[92,6,72,4],[93,6,73,4],[93,12,73,10,"gestureArrays"],[93,25,73,23],[93,28,73,26],[93,32,73,30],[93,33,73,31,"gestures"],[93,41,73,39],[93,42,73,40,"map"],[93,45,73,43],[93,46,73,44,"gesture"],[93,53,73,51],[93,57,73,55,"gesture"],[93,64,73,62],[93,65,73,63,"toGestureArray"],[93,79,73,77],[93,80,73,78],[93,81,73,79],[93,82,73,80],[94,6,74,4],[94,10,74,8,"requireToFail"],[94,23,74,21],[94,26,74,24],[94,28,74,26],[95,6,75,4],[95,11,75,9],[95,15,75,13,"i"],[95,16,75,14],[95,19,75,17],[95,20,75,18],[95,22,75,20,"i"],[95,23,75,21],[95,26,75,24],[95,30,75,28],[95,31,75,29,"gestures"],[95,39,75,37],[95,40,75,38,"length"],[95,46,75,44],[95,48,75,46,"i"],[95,49,75,47],[95,51,75,49],[95,53,75,51],[96,8,76,6],[96,12,76,10],[96,13,76,11,"prepareSingleGesture"],[96,33,76,31],[96,34,76,32],[96,38,76,36],[96,39,76,37,"gestures"],[96,47,76,45],[96,48,76,46,"i"],[96,49,76,47],[96,50,76,48],[96,52,76,50],[96,56,76,54],[96,57,76,55,"simultaneousGestures"],[96,77,76,75],[96,79,76,77],[96,83,76,81],[96,84,76,82,"requireGesturesToFail"],[96,105,76,103],[96,106,76,104,"concat"],[96,112,76,110],[96,113,76,111,"requireToFail"],[96,126,76,124],[96,127,76,125],[96,128,76,126],[98,8,78,6],[99,8,79,6,"requireToFail"],[99,21,79,19],[99,24,79,22,"requireToFail"],[99,37,79,35],[99,38,79,36,"concat"],[99,44,79,42],[99,45,79,43,"gestureArrays"],[99,58,79,56],[99,59,79,57,"i"],[99,60,79,58],[99,61,79,59],[99,62,79,60],[100,6,80,4],[101,4,81,2],[102,2,82,0],[103,0,82,1],[103,3]],"functionMap":{"names":["<global>","extendRelation","ComposedGesture","ComposedGesture#constructor","ComposedGesture#prepareSingleGesture","ComposedGesture#prepare","ComposedGesture#initialize","ComposedGesture#toGestureArray","gestures.flatMap$argument_0","SimultaneousGesture","SimultaneousGesture#prepare","gestures.map$argument_0","gestures.filter$argument_0","gestures.filter.flatMap$argument_0","ExclusiveGesture","ExclusiveGesture#prepare"],"mappings":"AAA;ACG;CDM;OEC;ECI;GDG;EEC;GFgB;EGC;GHI;EIC;GJI;EKC;iCCC,mCD;GLC;CFC;OSC;ECC;iDCG;YCI,kBD;aEK,uBF,CD;GDI;CTC;OcC;ECC;4CJG,mCI;GDQ;CdC"},"hasCjsExports":false},"type":"js/module"}]}