{"dependencies":[{"name":"../interfaces","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":18,"index":125},"end":{"line":8,"column":42,"index":149}}],"key":"596k1m46J08d+Af0Max0usWU1VI=","exportNames":["*"],"imports":1}},{"name":"./EventManager","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":43,"index":195},"end":{"line":10,"column":68,"index":220}}],"key":"MV7P0qSLfUx3BNx3HVTE8QBpThU=","exportNames":["*"],"imports":1}},{"name":"../../PointerType","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":12,"column":19,"index":243},"end":{"line":12,"column":47,"index":271}}],"key":"GAwFf6ECEOo66Cd6tbX5TiUkJ2k=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var _interfaces = require(_dependencyMap[0], \"../interfaces\");\n  var _EventManager = _interopRequireDefault(require(_dependencyMap[1], \"./EventManager\"));\n  var _PointerType = require(_dependencyMap[2], \"../../PointerType\");\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  class KeyboardEventManager extends _EventManager.default {\n    constructor(...args) {\n      super(...args);\n      _defineProperty(this, \"activationKeys\", ['Enter', ' ']);\n      _defineProperty(this, \"cancelationKeys\", ['Tab']);\n      _defineProperty(this, \"isPressed\", false);\n      _defineProperty(this, \"keyDownCallback\", event => {\n        if (this.cancelationKeys.indexOf(event.key) !== -1 && this.isPressed) {\n          this.dispatchEvent(event, _interfaces.EventTypes.CANCEL);\n          return;\n        }\n        if (this.activationKeys.indexOf(event.key) === -1) {\n          return;\n        }\n        this.dispatchEvent(event, _interfaces.EventTypes.DOWN);\n      });\n      _defineProperty(this, \"keyUpCallback\", event => {\n        if (this.activationKeys.indexOf(event.key) === -1 || !this.isPressed) {\n          return;\n        }\n        this.dispatchEvent(event, _interfaces.EventTypes.UP);\n      });\n    }\n    dispatchEvent(event, eventType) {\n      if (!(event.target instanceof HTMLElement)) {\n        return;\n      }\n      const adaptedEvent = this.mapEvent(event, eventType);\n      switch (eventType) {\n        case _interfaces.EventTypes.UP:\n          this.isPressed = false;\n          this.onPointerUp(adaptedEvent);\n          break;\n        case _interfaces.EventTypes.DOWN:\n          this.isPressed = true;\n          this.onPointerDown(adaptedEvent);\n          break;\n        case _interfaces.EventTypes.CANCEL:\n          this.isPressed = false;\n          this.onPointerCancel(adaptedEvent);\n          break;\n      }\n    }\n    registerListeners() {\n      this.view.addEventListener('keydown', this.keyDownCallback);\n      this.view.addEventListener('keyup', this.keyUpCallback);\n    }\n    unregisterListeners() {\n      this.view.removeEventListener('keydown', this.keyDownCallback);\n      this.view.removeEventListener('keyup', this.keyUpCallback);\n    }\n    mapEvent(event, eventType) {\n      const viewRect = event.target.getBoundingClientRect();\n      const viewportPosition = {\n        x: (viewRect === null || viewRect === void 0 ? void 0 : viewRect.x) + (viewRect === null || viewRect === void 0 ? void 0 : viewRect.width) / 2,\n        y: (viewRect === null || viewRect === void 0 ? void 0 : viewRect.y) + (viewRect === null || viewRect === void 0 ? void 0 : viewRect.height) / 2\n      };\n      const relativePosition = {\n        x: (viewRect === null || viewRect === void 0 ? void 0 : viewRect.width) / 2,\n        y: (viewRect === null || viewRect === void 0 ? void 0 : viewRect.height) / 2\n      };\n      return {\n        x: viewportPosition.x,\n        y: viewportPosition.y,\n        offsetX: relativePosition.x,\n        offsetY: relativePosition.y,\n        pointerId: 0,\n        eventType: eventType,\n        pointerType: _PointerType.PointerType.KEY,\n        time: event.timeStamp\n      };\n    }\n  }\n  exports.default = KeyboardEventManager;\n});","lineCount":103,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"default"],[7,17,6,15],[7,20,6,18],[7,25,6,23],[7,26,6,24],[8,2,8,0],[8,6,8,4,"_interfaces"],[8,17,8,15],[8,20,8,18,"require"],[8,27,8,25],[8,28,8,25,"_dependencyMap"],[8,42,8,25],[8,62,8,41],[8,63,8,42],[9,2,10,0],[9,6,10,4,"_EventManager"],[9,19,10,17],[9,22,10,20,"_interopRequireDefault"],[9,44,10,42],[9,45,10,43,"require"],[9,52,10,50],[9,53,10,50,"_dependencyMap"],[9,67,10,50],[9,88,10,67],[9,89,10,68],[9,90,10,69],[10,2,12,0],[10,6,12,4,"_PointerType"],[10,18,12,16],[10,21,12,19,"require"],[10,28,12,26],[10,29,12,26,"_dependencyMap"],[10,43,12,26],[10,67,12,46],[10,68,12,47],[11,2,14,0],[11,11,14,9,"_interopRequireDefault"],[11,33,14,31,"_interopRequireDefault"],[11,34,14,32,"obj"],[11,37,14,35],[11,39,14,37],[12,4,14,39],[12,11,14,46,"obj"],[12,14,14,49],[12,18,14,53,"obj"],[12,21,14,56],[12,22,14,57,"__esModule"],[12,32,14,67],[12,35,14,70,"obj"],[12,38,14,73],[12,41,14,76],[13,6,14,78,"default"],[13,13,14,85],[13,15,14,87,"obj"],[14,4,14,91],[14,5,14,92],[15,2,14,94],[16,2,16,0],[16,11,16,9,"_defineProperty"],[16,26,16,24,"_defineProperty"],[16,27,16,25,"obj"],[16,30,16,28],[16,32,16,30,"key"],[16,35,16,33],[16,37,16,35,"value"],[16,42,16,40],[16,44,16,42],[17,4,16,44],[17,8,16,48,"key"],[17,11,16,51],[17,15,16,55,"obj"],[17,18,16,58],[17,20,16,60],[18,6,16,62,"Object"],[18,12,16,68],[18,13,16,69,"defineProperty"],[18,27,16,83],[18,28,16,84,"obj"],[18,31,16,87],[18,33,16,89,"key"],[18,36,16,92],[18,38,16,94],[19,8,16,96,"value"],[19,13,16,101],[19,15,16,103,"value"],[19,20,16,108],[20,8,16,110,"enumerable"],[20,18,16,120],[20,20,16,122],[20,24,16,126],[21,8,16,128,"configurable"],[21,20,16,140],[21,22,16,142],[21,26,16,146],[22,8,16,148,"writable"],[22,16,16,156],[22,18,16,158],[23,6,16,163],[23,7,16,164],[23,8,16,165],[24,4,16,167],[24,5,16,168],[24,11,16,174],[25,6,16,176,"obj"],[25,9,16,179],[25,10,16,180,"key"],[25,13,16,183],[25,14,16,184],[25,17,16,187,"value"],[25,22,16,192],[26,4,16,194],[27,4,16,196],[27,11,16,203,"obj"],[27,14,16,206],[28,2,16,208],[29,2,18,0],[29,8,18,6,"KeyboardEventManager"],[29,28,18,26],[29,37,18,35,"_EventManager"],[29,50,18,48],[29,51,18,49,"default"],[29,58,18,56],[29,59,18,57],[30,4,19,2,"constructor"],[30,15,19,13,"constructor"],[30,16,19,14],[30,19,19,17,"args"],[30,23,19,21],[30,25,19,23],[31,6,20,4],[31,11,20,9],[31,12,20,10],[31,15,20,13,"args"],[31,19,20,17],[31,20,20,18],[32,6,22,4,"_defineProperty"],[32,21,22,19],[32,22,22,20],[32,26,22,24],[32,28,22,26],[32,44,22,42],[32,46,22,44],[32,47,22,45],[32,54,22,52],[32,56,22,54],[32,59,22,57],[32,60,22,58],[32,61,22,59],[33,6,24,4,"_defineProperty"],[33,21,24,19],[33,22,24,20],[33,26,24,24],[33,28,24,26],[33,45,24,43],[33,47,24,45],[33,48,24,46],[33,53,24,51],[33,54,24,52],[33,55,24,53],[34,6,26,4,"_defineProperty"],[34,21,26,19],[34,22,26,20],[34,26,26,24],[34,28,26,26],[34,39,26,37],[34,41,26,39],[34,46,26,44],[34,47,26,45],[35,6,28,4,"_defineProperty"],[35,21,28,19],[35,22,28,20],[35,26,28,24],[35,28,28,26],[35,45,28,43],[35,47,28,45,"event"],[35,52,28,50],[35,56,28,54],[36,8,29,6],[36,12,29,10],[36,16,29,14],[36,17,29,15,"cancelationKeys"],[36,32,29,30],[36,33,29,31,"indexOf"],[36,40,29,38],[36,41,29,39,"event"],[36,46,29,44],[36,47,29,45,"key"],[36,50,29,48],[36,51,29,49],[36,56,29,54],[36,57,29,55],[36,58,29,56],[36,62,29,60],[36,66,29,64],[36,67,29,65,"isPressed"],[36,76,29,74],[36,78,29,76],[37,10,30,8],[37,14,30,12],[37,15,30,13,"dispatchEvent"],[37,28,30,26],[37,29,30,27,"event"],[37,34,30,32],[37,36,30,34,"_interfaces"],[37,47,30,45],[37,48,30,46,"EventTypes"],[37,58,30,56],[37,59,30,57,"CANCEL"],[37,65,30,63],[37,66,30,64],[38,10,31,8],[39,8,32,6],[40,8,34,6],[40,12,34,10],[40,16,34,14],[40,17,34,15,"activationKeys"],[40,31,34,29],[40,32,34,30,"indexOf"],[40,39,34,37],[40,40,34,38,"event"],[40,45,34,43],[40,46,34,44,"key"],[40,49,34,47],[40,50,34,48],[40,55,34,53],[40,56,34,54],[40,57,34,55],[40,59,34,57],[41,10,35,8],[42,8,36,6],[43,8,38,6],[43,12,38,10],[43,13,38,11,"dispatchEvent"],[43,26,38,24],[43,27,38,25,"event"],[43,32,38,30],[43,34,38,32,"_interfaces"],[43,45,38,43],[43,46,38,44,"EventTypes"],[43,56,38,54],[43,57,38,55,"DOWN"],[43,61,38,59],[43,62,38,60],[44,6,39,4],[44,7,39,5],[44,8,39,6],[45,6,41,4,"_defineProperty"],[45,21,41,19],[45,22,41,20],[45,26,41,24],[45,28,41,26],[45,43,41,41],[45,45,41,43,"event"],[45,50,41,48],[45,54,41,52],[46,8,42,6],[46,12,42,10],[46,16,42,14],[46,17,42,15,"activationKeys"],[46,31,42,29],[46,32,42,30,"indexOf"],[46,39,42,37],[46,40,42,38,"event"],[46,45,42,43],[46,46,42,44,"key"],[46,49,42,47],[46,50,42,48],[46,55,42,53],[46,56,42,54],[46,57,42,55],[46,61,42,59],[46,62,42,60],[46,66,42,64],[46,67,42,65,"isPressed"],[46,76,42,74],[46,78,42,76],[47,10,43,8],[48,8,44,6],[49,8,46,6],[49,12,46,10],[49,13,46,11,"dispatchEvent"],[49,26,46,24],[49,27,46,25,"event"],[49,32,46,30],[49,34,46,32,"_interfaces"],[49,45,46,43],[49,46,46,44,"EventTypes"],[49,56,46,54],[49,57,46,55,"UP"],[49,59,46,57],[49,60,46,58],[50,6,47,4],[50,7,47,5],[50,8,47,6],[51,4,48,2],[52,4,50,2,"dispatchEvent"],[52,17,50,15,"dispatchEvent"],[52,18,50,16,"event"],[52,23,50,21],[52,25,50,23,"eventType"],[52,34,50,32],[52,36,50,34],[53,6,51,4],[53,10,51,8],[53,12,51,10,"event"],[53,17,51,15],[53,18,51,16,"target"],[53,24,51,22],[53,36,51,34,"HTMLElement"],[53,47,51,45],[53,48,51,46],[53,50,51,48],[54,8,52,6],[55,6,53,4],[56,6,55,4],[56,12,55,10,"adaptedEvent"],[56,24,55,22],[56,27,55,25],[56,31,55,29],[56,32,55,30,"mapEvent"],[56,40,55,38],[56,41,55,39,"event"],[56,46,55,44],[56,48,55,46,"eventType"],[56,57,55,55],[56,58,55,56],[57,6,57,4],[57,14,57,12,"eventType"],[57,23,57,21],[58,8,58,6],[58,13,58,11,"_interfaces"],[58,24,58,22],[58,25,58,23,"EventTypes"],[58,35,58,33],[58,36,58,34,"UP"],[58,38,58,36],[59,10,59,8],[59,14,59,12],[59,15,59,13,"isPressed"],[59,24,59,22],[59,27,59,25],[59,32,59,30],[60,10,60,8],[60,14,60,12],[60,15,60,13,"onPointerUp"],[60,26,60,24],[60,27,60,25,"adaptedEvent"],[60,39,60,37],[60,40,60,38],[61,10,61,8],[62,8,63,6],[62,13,63,11,"_interfaces"],[62,24,63,22],[62,25,63,23,"EventTypes"],[62,35,63,33],[62,36,63,34,"DOWN"],[62,40,63,38],[63,10,64,8],[63,14,64,12],[63,15,64,13,"isPressed"],[63,24,64,22],[63,27,64,25],[63,31,64,29],[64,10,65,8],[64,14,65,12],[64,15,65,13,"onPointerDown"],[64,28,65,26],[64,29,65,27,"adaptedEvent"],[64,41,65,39],[64,42,65,40],[65,10,66,8],[66,8,68,6],[66,13,68,11,"_interfaces"],[66,24,68,22],[66,25,68,23,"EventTypes"],[66,35,68,33],[66,36,68,34,"CANCEL"],[66,42,68,40],[67,10,69,8],[67,14,69,12],[67,15,69,13,"isPressed"],[67,24,69,22],[67,27,69,25],[67,32,69,30],[68,10,70,8],[68,14,70,12],[68,15,70,13,"onPointerCancel"],[68,30,70,28],[68,31,70,29,"adaptedEvent"],[68,43,70,41],[68,44,70,42],[69,10,71,8],[70,6,72,4],[71,4,73,2],[72,4,75,2,"registerListeners"],[72,21,75,19,"registerListeners"],[72,22,75,19],[72,24,75,22],[73,6,76,4],[73,10,76,8],[73,11,76,9,"view"],[73,15,76,13],[73,16,76,14,"addEventListener"],[73,32,76,30],[73,33,76,31],[73,42,76,40],[73,44,76,42],[73,48,76,46],[73,49,76,47,"keyDownCallback"],[73,64,76,62],[73,65,76,63],[74,6,77,4],[74,10,77,8],[74,11,77,9,"view"],[74,15,77,13],[74,16,77,14,"addEventListener"],[74,32,77,30],[74,33,77,31],[74,40,77,38],[74,42,77,40],[74,46,77,44],[74,47,77,45,"keyUpCallback"],[74,60,77,58],[74,61,77,59],[75,4,78,2],[76,4,80,2,"unregisterListeners"],[76,23,80,21,"unregisterListeners"],[76,24,80,21],[76,26,80,24],[77,6,81,4],[77,10,81,8],[77,11,81,9,"view"],[77,15,81,13],[77,16,81,14,"removeEventListener"],[77,35,81,33],[77,36,81,34],[77,45,81,43],[77,47,81,45],[77,51,81,49],[77,52,81,50,"keyDownCallback"],[77,67,81,65],[77,68,81,66],[78,6,82,4],[78,10,82,8],[78,11,82,9,"view"],[78,15,82,13],[78,16,82,14,"removeEventListener"],[78,35,82,33],[78,36,82,34],[78,43,82,41],[78,45,82,43],[78,49,82,47],[78,50,82,48,"keyUpCallback"],[78,63,82,61],[78,64,82,62],[79,4,83,2],[80,4,85,2,"mapEvent"],[80,12,85,10,"mapEvent"],[80,13,85,11,"event"],[80,18,85,16],[80,20,85,18,"eventType"],[80,29,85,27],[80,31,85,29],[81,6,86,4],[81,12,86,10,"viewRect"],[81,20,86,18],[81,23,86,21,"event"],[81,28,86,26],[81,29,86,27,"target"],[81,35,86,33],[81,36,86,34,"getBoundingClientRect"],[81,57,86,55],[81,58,86,56],[81,59,86,57],[82,6,87,4],[82,12,87,10,"viewportPosition"],[82,28,87,26],[82,31,87,29],[83,8,88,6,"x"],[83,9,88,7],[83,11,88,9],[83,12,88,10,"viewRect"],[83,20,88,18],[83,25,88,23],[83,29,88,27],[83,33,88,31,"viewRect"],[83,41,88,39],[83,46,88,44],[83,51,88,49],[83,52,88,50],[83,55,88,53],[83,60,88,58],[83,61,88,59],[83,64,88,62,"viewRect"],[83,72,88,70],[83,73,88,71,"x"],[83,74,88,72],[83,78,88,76],[83,79,88,77,"viewRect"],[83,87,88,85],[83,92,88,90],[83,96,88,94],[83,100,88,98,"viewRect"],[83,108,88,106],[83,113,88,111],[83,118,88,116],[83,119,88,117],[83,122,88,120],[83,127,88,125],[83,128,88,126],[83,131,88,129,"viewRect"],[83,139,88,137],[83,140,88,138,"width"],[83,145,88,143],[83,149,88,147],[83,150,88,148],[84,8,89,6,"y"],[84,9,89,7],[84,11,89,9],[84,12,89,10,"viewRect"],[84,20,89,18],[84,25,89,23],[84,29,89,27],[84,33,89,31,"viewRect"],[84,41,89,39],[84,46,89,44],[84,51,89,49],[84,52,89,50],[84,55,89,53],[84,60,89,58],[84,61,89,59],[84,64,89,62,"viewRect"],[84,72,89,70],[84,73,89,71,"y"],[84,74,89,72],[84,78,89,76],[84,79,89,77,"viewRect"],[84,87,89,85],[84,92,89,90],[84,96,89,94],[84,100,89,98,"viewRect"],[84,108,89,106],[84,113,89,111],[84,118,89,116],[84,119,89,117],[84,122,89,120],[84,127,89,125],[84,128,89,126],[84,131,89,129,"viewRect"],[84,139,89,137],[84,140,89,138,"height"],[84,146,89,144],[84,150,89,148],[85,6,90,4],[85,7,90,5],[86,6,91,4],[86,12,91,10,"relativePosition"],[86,28,91,26],[86,31,91,29],[87,8,92,6,"x"],[87,9,92,7],[87,11,92,9],[87,12,92,10,"viewRect"],[87,20,92,18],[87,25,92,23],[87,29,92,27],[87,33,92,31,"viewRect"],[87,41,92,39],[87,46,92,44],[87,51,92,49],[87,52,92,50],[87,55,92,53],[87,60,92,58],[87,61,92,59],[87,64,92,62,"viewRect"],[87,72,92,70],[87,73,92,71,"width"],[87,78,92,76],[87,82,92,80],[87,83,92,81],[88,8,93,6,"y"],[88,9,93,7],[88,11,93,9],[88,12,93,10,"viewRect"],[88,20,93,18],[88,25,93,23],[88,29,93,27],[88,33,93,31,"viewRect"],[88,41,93,39],[88,46,93,44],[88,51,93,49],[88,52,93,50],[88,55,93,53],[88,60,93,58],[88,61,93,59],[88,64,93,62,"viewRect"],[88,72,93,70],[88,73,93,71,"height"],[88,79,93,77],[88,83,93,81],[89,6,94,4],[89,7,94,5],[90,6,95,4],[90,13,95,11],[91,8,96,6,"x"],[91,9,96,7],[91,11,96,9,"viewportPosition"],[91,27,96,25],[91,28,96,26,"x"],[91,29,96,27],[92,8,97,6,"y"],[92,9,97,7],[92,11,97,9,"viewportPosition"],[92,27,97,25],[92,28,97,26,"y"],[92,29,97,27],[93,8,98,6,"offsetX"],[93,15,98,13],[93,17,98,15,"relativePosition"],[93,33,98,31],[93,34,98,32,"x"],[93,35,98,33],[94,8,99,6,"offsetY"],[94,15,99,13],[94,17,99,15,"relativePosition"],[94,33,99,31],[94,34,99,32,"y"],[94,35,99,33],[95,8,100,6,"pointerId"],[95,17,100,15],[95,19,100,17],[95,20,100,18],[96,8,101,6,"eventType"],[96,17,101,15],[96,19,101,17,"eventType"],[96,28,101,26],[97,8,102,6,"pointerType"],[97,19,102,17],[97,21,102,19,"_PointerType"],[97,33,102,31],[97,34,102,32,"PointerType"],[97,45,102,43],[97,46,102,44,"KEY"],[97,49,102,47],[98,8,103,6,"time"],[98,12,103,10],[98,14,103,12,"event"],[98,19,103,17],[98,20,103,18,"timeStamp"],[99,6,104,4],[99,7,104,5],[100,4,105,2],[101,2,107,0],[102,2,109,0,"exports"],[102,9,109,7],[102,10,109,8,"default"],[102,17,109,15],[102,20,109,18,"KeyboardEventManager"],[102,40,109,38],[103,0,109,39],[103,3]],"functionMap":{"names":["<global>","_interopRequireDefault","_defineProperty","KeyboardEventManager","constructor","_defineProperty$argument_2","dispatchEvent","registerListeners","unregisterListeners","mapEvent"],"mappings":"AAA;ACa,+FD;AEE,iNF;AGE;ECC;6CCS;KDW;2CCE;KDM;GDC;EGE;GHuB;EIE;GJG;EKE;GLG;EME;GNoB;CHE"},"hasCjsExports":true},"type":"js/module"}]}