{"dependencies":[{"name":"../interfaces","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":211},"end":{"line":3,"column":43,"index":254}}],"key":"GMKh3a5g5xNaAog15vl07v6pG2U=","exportNames":["*"],"imports":1}},{"name":"./EventManager","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":255},"end":{"line":4,"column":42,"index":297}}],"key":"+tTRfUGWY5rcrw6ZVLEgvlFTMQc=","exportNames":["*"],"imports":1}},{"name":"../../PointerType","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":298},"end":{"line":5,"column":48,"index":346}}],"key":"PNpP2j+zRZwLQ3w6ZmXPMJNakiU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return KeyboardEventManager;\n    }\n  });\n  var _interfaces = require(_dependencyMap[0], \"../interfaces\");\n  var _EventManager = require(_dependencyMap[1], \"./EventManager\");\n  var EventManager = _interopDefault(_EventManager);\n  var _PointerType = require(_dependencyMap[2], \"../../PointerType\");\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  class KeyboardEventManager extends EventManager.default {\n    constructor(...args) {\n      super(...args);\n      _defineProperty(this, \"activationKeys\", ['Enter', ' ']);\n      _defineProperty(this, \"cancelationKeys\", ['Tab']);\n      _defineProperty(this, \"isPressed\", false);\n      _defineProperty(this, \"keyDownCallback\", event => {\n        if (this.cancelationKeys.indexOf(event.key) !== -1 && this.isPressed) {\n          this.dispatchEvent(event, _interfaces.EventTypes.CANCEL);\n          return;\n        }\n        if (this.activationKeys.indexOf(event.key) === -1) {\n          return;\n        }\n        this.dispatchEvent(event, _interfaces.EventTypes.DOWN);\n      });\n      _defineProperty(this, \"keyUpCallback\", event => {\n        if (this.activationKeys.indexOf(event.key) === -1 || !this.isPressed) {\n          return;\n        }\n        this.dispatchEvent(event, _interfaces.EventTypes.UP);\n      });\n    }\n    dispatchEvent(event, eventType) {\n      if (!(event.target instanceof HTMLElement)) {\n        return;\n      }\n      const adaptedEvent = this.mapEvent(event, eventType);\n      switch (eventType) {\n        case _interfaces.EventTypes.UP:\n          this.isPressed = false;\n          this.onPointerUp(adaptedEvent);\n          break;\n        case _interfaces.EventTypes.DOWN:\n          this.isPressed = true;\n          this.onPointerDown(adaptedEvent);\n          break;\n        case _interfaces.EventTypes.CANCEL:\n          this.isPressed = false;\n          this.onPointerCancel(adaptedEvent);\n          break;\n      }\n    }\n    registerListeners() {\n      this.view.addEventListener('keydown', this.keyDownCallback);\n      this.view.addEventListener('keyup', this.keyUpCallback);\n    }\n    unregisterListeners() {\n      this.view.removeEventListener('keydown', this.keyDownCallback);\n      this.view.removeEventListener('keyup', this.keyUpCallback);\n    }\n    mapEvent(event, eventType) {\n      const viewRect = event.target.getBoundingClientRect();\n      const viewportPosition = {\n        x: (viewRect === null || viewRect === void 0 ? void 0 : viewRect.x) + (viewRect === null || viewRect === void 0 ? void 0 : viewRect.width) / 2,\n        y: (viewRect === null || viewRect === void 0 ? void 0 : viewRect.y) + (viewRect === null || viewRect === void 0 ? void 0 : viewRect.height) / 2\n      };\n      const relativePosition = {\n        x: (viewRect === null || viewRect === void 0 ? void 0 : viewRect.width) / 2,\n        y: (viewRect === null || viewRect === void 0 ? void 0 : viewRect.height) / 2\n      };\n      return {\n        x: viewportPosition.x,\n        y: viewportPosition.y,\n        offsetX: relativePosition.x,\n        offsetY: relativePosition.y,\n        pointerId: 0,\n        eventType: eventType,\n        pointerType: _PointerType.PointerType.KEY,\n        time: event.timeStamp\n      };\n    }\n  }\n});","lineCount":108,"map":[[12,2,6,15,"Object"],[12,8,6,15],[12,9,6,15,"defineProperty"],[12,23,6,15],[12,24,6,15,"exports"],[12,31,6,15],[13,4,6,15,"enumerable"],[13,14,6,15],[14,4,6,15,"get"],[14,7,6,15],[14,18,6,15,"get"],[14,19,6,15],[15,6,6,15],[15,13,6,15,"KeyboardEventManager"],[15,33,6,15],[16,4,6,15],[17,2,6,15],[18,2,3,0],[18,6,3,0,"_interfaces"],[18,17,3,0],[18,20,3,0,"require"],[18,27,3,0],[18,28,3,0,"_dependencyMap"],[18,42,3,0],[19,2,4,0],[19,6,4,0,"_EventManager"],[19,19,4,0],[19,22,4,0,"require"],[19,29,4,0],[19,30,4,0,"_dependencyMap"],[19,44,4,0],[20,2,4,0],[20,6,4,0,"EventManager"],[20,18,4,0],[20,21,4,0,"_interopDefault"],[20,36,4,0],[20,37,4,0,"_EventManager"],[20,50,4,0],[21,2,5,0],[21,6,5,0,"_PointerType"],[21,18,5,0],[21,21,5,0,"require"],[21,28,5,0],[21,29,5,0,"_dependencyMap"],[21,43,5,0],[22,2,1,0],[22,11,1,9,"_defineProperty"],[22,26,1,24,"_defineProperty"],[22,27,1,25,"obj"],[22,30,1,28],[22,32,1,30,"key"],[22,35,1,33],[22,37,1,35,"value"],[22,42,1,40],[22,44,1,42],[23,4,1,44],[23,8,1,48,"key"],[23,11,1,51],[23,15,1,55,"obj"],[23,18,1,58],[23,20,1,60],[24,6,1,62,"Object"],[24,12,1,68],[24,13,1,69,"defineProperty"],[24,27,1,83],[24,28,1,84,"obj"],[24,31,1,87],[24,33,1,89,"key"],[24,36,1,92],[24,38,1,94],[25,8,1,96,"value"],[25,13,1,101],[25,15,1,103,"value"],[25,20,1,108],[26,8,1,110,"enumerable"],[26,18,1,120],[26,20,1,122],[26,24,1,126],[27,8,1,128,"configurable"],[27,20,1,140],[27,22,1,142],[27,26,1,146],[28,8,1,148,"writable"],[28,16,1,156],[28,18,1,158],[29,6,1,163],[29,7,1,164],[29,8,1,165],[30,4,1,167],[30,5,1,168],[30,11,1,174],[31,6,1,176,"obj"],[31,9,1,179],[31,10,1,180,"key"],[31,13,1,183],[31,14,1,184],[31,17,1,187,"value"],[31,22,1,192],[32,4,1,194],[33,4,1,196],[33,11,1,203,"obj"],[33,14,1,206],[34,2,1,208],[35,2,6,15],[35,8,6,21,"KeyboardEventManager"],[35,28,6,41],[35,37,6,50,"EventManager"],[35,49,6,62],[35,50,6,62,"default"],[35,57,6,62],[35,58,6,63],[36,4,7,2,"constructor"],[36,15,7,13,"constructor"],[36,16,7,14],[36,19,7,17,"args"],[36,23,7,21],[36,25,7,23],[37,6,8,4],[37,11,8,9],[37,12,8,10],[37,15,8,13,"args"],[37,19,8,17],[37,20,8,18],[38,6,10,4,"_defineProperty"],[38,21,10,19],[38,22,10,20],[38,26,10,24],[38,28,10,26],[38,44,10,42],[38,46,10,44],[38,47,10,45],[38,54,10,52],[38,56,10,54],[38,59,10,57],[38,60,10,58],[38,61,10,59],[39,6,12,4,"_defineProperty"],[39,21,12,19],[39,22,12,20],[39,26,12,24],[39,28,12,26],[39,45,12,43],[39,47,12,45],[39,48,12,46],[39,53,12,51],[39,54,12,52],[39,55,12,53],[40,6,14,4,"_defineProperty"],[40,21,14,19],[40,22,14,20],[40,26,14,24],[40,28,14,26],[40,39,14,37],[40,41,14,39],[40,46,14,44],[40,47,14,45],[41,6,16,4,"_defineProperty"],[41,21,16,19],[41,22,16,20],[41,26,16,24],[41,28,16,26],[41,45,16,43],[41,47,16,45,"event"],[41,52,16,50],[41,56,16,54],[42,8,17,6],[42,12,17,10],[42,16,17,14],[42,17,17,15,"cancelationKeys"],[42,32,17,30],[42,33,17,31,"indexOf"],[42,40,17,38],[42,41,17,39,"event"],[42,46,17,44],[42,47,17,45,"key"],[42,50,17,48],[42,51,17,49],[42,56,17,54],[42,57,17,55],[42,58,17,56],[42,62,17,60],[42,66,17,64],[42,67,17,65,"isPressed"],[42,76,17,74],[42,78,17,76],[43,10,18,8],[43,14,18,12],[43,15,18,13,"dispatchEvent"],[43,28,18,26],[43,29,18,27,"event"],[43,34,18,32],[43,36,18,34,"EventTypes"],[43,47,18,44],[43,48,18,44,"EventTypes"],[43,58,18,44],[43,59,18,45,"CANCEL"],[43,65,18,51],[43,66,18,52],[44,10,19,8],[45,8,20,6],[46,8,22,6],[46,12,22,10],[46,16,22,14],[46,17,22,15,"activationKeys"],[46,31,22,29],[46,32,22,30,"indexOf"],[46,39,22,37],[46,40,22,38,"event"],[46,45,22,43],[46,46,22,44,"key"],[46,49,22,47],[46,50,22,48],[46,55,22,53],[46,56,22,54],[46,57,22,55],[46,59,22,57],[47,10,23,8],[48,8,24,6],[49,8,26,6],[49,12,26,10],[49,13,26,11,"dispatchEvent"],[49,26,26,24],[49,27,26,25,"event"],[49,32,26,30],[49,34,26,32,"EventTypes"],[49,45,26,42],[49,46,26,42,"EventTypes"],[49,56,26,42],[49,57,26,43,"DOWN"],[49,61,26,47],[49,62,26,48],[50,6,27,4],[50,7,27,5],[50,8,27,6],[51,6,29,4,"_defineProperty"],[51,21,29,19],[51,22,29,20],[51,26,29,24],[51,28,29,26],[51,43,29,41],[51,45,29,43,"event"],[51,50,29,48],[51,54,29,52],[52,8,30,6],[52,12,30,10],[52,16,30,14],[52,17,30,15,"activationKeys"],[52,31,30,29],[52,32,30,30,"indexOf"],[52,39,30,37],[52,40,30,38,"event"],[52,45,30,43],[52,46,30,44,"key"],[52,49,30,47],[52,50,30,48],[52,55,30,53],[52,56,30,54],[52,57,30,55],[52,61,30,59],[52,62,30,60],[52,66,30,64],[52,67,30,65,"isPressed"],[52,76,30,74],[52,78,30,76],[53,10,31,8],[54,8,32,6],[55,8,34,6],[55,12,34,10],[55,13,34,11,"dispatchEvent"],[55,26,34,24],[55,27,34,25,"event"],[55,32,34,30],[55,34,34,32,"EventTypes"],[55,45,34,42],[55,46,34,42,"EventTypes"],[55,56,34,42],[55,57,34,43,"UP"],[55,59,34,45],[55,60,34,46],[56,6,35,4],[56,7,35,5],[56,8,35,6],[57,4,36,2],[58,4,38,2,"dispatchEvent"],[58,17,38,15,"dispatchEvent"],[58,18,38,16,"event"],[58,23,38,21],[58,25,38,23,"eventType"],[58,34,38,32],[58,36,38,34],[59,6,39,4],[59,10,39,8],[59,12,39,10,"event"],[59,17,39,15],[59,18,39,16,"target"],[59,24,39,22],[59,36,39,34,"HTMLElement"],[59,47,39,45],[59,48,39,46],[59,50,39,48],[60,8,40,6],[61,6,41,4],[62,6,43,4],[62,12,43,10,"adaptedEvent"],[62,24,43,22],[62,27,43,25],[62,31,43,29],[62,32,43,30,"mapEvent"],[62,40,43,38],[62,41,43,39,"event"],[62,46,43,44],[62,48,43,46,"eventType"],[62,57,43,55],[62,58,43,56],[63,6,45,4],[63,14,45,12,"eventType"],[63,23,45,21],[64,8,46,6],[64,13,46,11,"EventTypes"],[64,24,46,21],[64,25,46,21,"EventTypes"],[64,35,46,21],[64,36,46,22,"UP"],[64,38,46,24],[65,10,47,8],[65,14,47,12],[65,15,47,13,"isPressed"],[65,24,47,22],[65,27,47,25],[65,32,47,30],[66,10,48,8],[66,14,48,12],[66,15,48,13,"onPointerUp"],[66,26,48,24],[66,27,48,25,"adaptedEvent"],[66,39,48,37],[66,40,48,38],[67,10,49,8],[68,8,51,6],[68,13,51,11,"EventTypes"],[68,24,51,21],[68,25,51,21,"EventTypes"],[68,35,51,21],[68,36,51,22,"DOWN"],[68,40,51,26],[69,10,52,8],[69,14,52,12],[69,15,52,13,"isPressed"],[69,24,52,22],[69,27,52,25],[69,31,52,29],[70,10,53,8],[70,14,53,12],[70,15,53,13,"onPointerDown"],[70,28,53,26],[70,29,53,27,"adaptedEvent"],[70,41,53,39],[70,42,53,40],[71,10,54,8],[72,8,56,6],[72,13,56,11,"EventTypes"],[72,24,56,21],[72,25,56,21,"EventTypes"],[72,35,56,21],[72,36,56,22,"CANCEL"],[72,42,56,28],[73,10,57,8],[73,14,57,12],[73,15,57,13,"isPressed"],[73,24,57,22],[73,27,57,25],[73,32,57,30],[74,10,58,8],[74,14,58,12],[74,15,58,13,"onPointerCancel"],[74,30,58,28],[74,31,58,29,"adaptedEvent"],[74,43,58,41],[74,44,58,42],[75,10,59,8],[76,6,60,4],[77,4,61,2],[78,4,63,2,"registerListeners"],[78,21,63,19,"registerListeners"],[78,22,63,19],[78,24,63,22],[79,6,64,4],[79,10,64,8],[79,11,64,9,"view"],[79,15,64,13],[79,16,64,14,"addEventListener"],[79,32,64,30],[79,33,64,31],[79,42,64,40],[79,44,64,42],[79,48,64,46],[79,49,64,47,"keyDownCallback"],[79,64,64,62],[79,65,64,63],[80,6,65,4],[80,10,65,8],[80,11,65,9,"view"],[80,15,65,13],[80,16,65,14,"addEventListener"],[80,32,65,30],[80,33,65,31],[80,40,65,38],[80,42,65,40],[80,46,65,44],[80,47,65,45,"keyUpCallback"],[80,60,65,58],[80,61,65,59],[81,4,66,2],[82,4,68,2,"unregisterListeners"],[82,23,68,21,"unregisterListeners"],[82,24,68,21],[82,26,68,24],[83,6,69,4],[83,10,69,8],[83,11,69,9,"view"],[83,15,69,13],[83,16,69,14,"removeEventListener"],[83,35,69,33],[83,36,69,34],[83,45,69,43],[83,47,69,45],[83,51,69,49],[83,52,69,50,"keyDownCallback"],[83,67,69,65],[83,68,69,66],[84,6,70,4],[84,10,70,8],[84,11,70,9,"view"],[84,15,70,13],[84,16,70,14,"removeEventListener"],[84,35,70,33],[84,36,70,34],[84,43,70,41],[84,45,70,43],[84,49,70,47],[84,50,70,48,"keyUpCallback"],[84,63,70,61],[84,64,70,62],[85,4,71,2],[86,4,73,2,"mapEvent"],[86,12,73,10,"mapEvent"],[86,13,73,11,"event"],[86,18,73,16],[86,20,73,18,"eventType"],[86,29,73,27],[86,31,73,29],[87,6,74,4],[87,12,74,10,"viewRect"],[87,20,74,18],[87,23,74,21,"event"],[87,28,74,26],[87,29,74,27,"target"],[87,35,74,33],[87,36,74,34,"getBoundingClientRect"],[87,57,74,55],[87,58,74,56],[87,59,74,57],[88,6,75,4],[88,12,75,10,"viewportPosition"],[88,28,75,26],[88,31,75,29],[89,8,76,6,"x"],[89,9,76,7],[89,11,76,9],[89,12,76,10,"viewRect"],[89,20,76,18],[89,25,76,23],[89,29,76,27],[89,33,76,31,"viewRect"],[89,41,76,39],[89,46,76,44],[89,51,76,49],[89,52,76,50],[89,55,76,53],[89,60,76,58],[89,61,76,59],[89,64,76,62,"viewRect"],[89,72,76,70],[89,73,76,71,"x"],[89,74,76,72],[89,78,76,76],[89,79,76,77,"viewRect"],[89,87,76,85],[89,92,76,90],[89,96,76,94],[89,100,76,98,"viewRect"],[89,108,76,106],[89,113,76,111],[89,118,76,116],[89,119,76,117],[89,122,76,120],[89,127,76,125],[89,128,76,126],[89,131,76,129,"viewRect"],[89,139,76,137],[89,140,76,138,"width"],[89,145,76,143],[89,149,76,147],[89,150,76,148],[90,8,77,6,"y"],[90,9,77,7],[90,11,77,9],[90,12,77,10,"viewRect"],[90,20,77,18],[90,25,77,23],[90,29,77,27],[90,33,77,31,"viewRect"],[90,41,77,39],[90,46,77,44],[90,51,77,49],[90,52,77,50],[90,55,77,53],[90,60,77,58],[90,61,77,59],[90,64,77,62,"viewRect"],[90,72,77,70],[90,73,77,71,"y"],[90,74,77,72],[90,78,77,76],[90,79,77,77,"viewRect"],[90,87,77,85],[90,92,77,90],[90,96,77,94],[90,100,77,98,"viewRect"],[90,108,77,106],[90,113,77,111],[90,118,77,116],[90,119,77,117],[90,122,77,120],[90,127,77,125],[90,128,77,126],[90,131,77,129,"viewRect"],[90,139,77,137],[90,140,77,138,"height"],[90,146,77,144],[90,150,77,148],[91,6,78,4],[91,7,78,5],[92,6,79,4],[92,12,79,10,"relativePosition"],[92,28,79,26],[92,31,79,29],[93,8,80,6,"x"],[93,9,80,7],[93,11,80,9],[93,12,80,10,"viewRect"],[93,20,80,18],[93,25,80,23],[93,29,80,27],[93,33,80,31,"viewRect"],[93,41,80,39],[93,46,80,44],[93,51,80,49],[93,52,80,50],[93,55,80,53],[93,60,80,58],[93,61,80,59],[93,64,80,62,"viewRect"],[93,72,80,70],[93,73,80,71,"width"],[93,78,80,76],[93,82,80,80],[93,83,80,81],[94,8,81,6,"y"],[94,9,81,7],[94,11,81,9],[94,12,81,10,"viewRect"],[94,20,81,18],[94,25,81,23],[94,29,81,27],[94,33,81,31,"viewRect"],[94,41,81,39],[94,46,81,44],[94,51,81,49],[94,52,81,50],[94,55,81,53],[94,60,81,58],[94,61,81,59],[94,64,81,62,"viewRect"],[94,72,81,70],[94,73,81,71,"height"],[94,79,81,77],[94,83,81,81],[95,6,82,4],[95,7,82,5],[96,6,83,4],[96,13,83,11],[97,8,84,6,"x"],[97,9,84,7],[97,11,84,9,"viewportPosition"],[97,27,84,25],[97,28,84,26,"x"],[97,29,84,27],[98,8,85,6,"y"],[98,9,85,7],[98,11,85,9,"viewportPosition"],[98,27,85,25],[98,28,85,26,"y"],[98,29,85,27],[99,8,86,6,"offsetX"],[99,15,86,13],[99,17,86,15,"relativePosition"],[99,33,86,31],[99,34,86,32,"x"],[99,35,86,33],[100,8,87,6,"offsetY"],[100,15,87,13],[100,17,87,15,"relativePosition"],[100,33,87,31],[100,34,87,32,"y"],[100,35,87,33],[101,8,88,6,"pointerId"],[101,17,88,15],[101,19,88,17],[101,20,88,18],[102,8,89,6,"eventType"],[102,17,89,15],[102,19,89,17,"eventType"],[102,28,89,26],[103,8,90,6,"pointerType"],[103,19,90,17],[103,21,90,19,"PointerType"],[103,33,90,30],[103,34,90,30,"PointerType"],[103,45,90,30],[103,46,90,31,"KEY"],[103,49,90,34],[104,8,91,6,"time"],[104,12,91,10],[104,14,91,12,"event"],[104,19,91,17],[104,20,91,18,"timeStamp"],[105,6,92,4],[105,7,92,5],[106,4,93,2],[107,2,95,0],[108,0,95,1],[108,3]],"functionMap":{"names":["_defineProperty","<global>","KeyboardEventManager","constructor","_defineProperty$argument_2","dispatchEvent","registerListeners","unregisterListeners","mapEvent"],"mappings":"AAA,iNC;eCK;ECC;6CCS;KDW;2CCE;KDM;GDC;EGE;GHuB;EIE;GJG;EKE;GLG;EME;GNoB;CDE"},"hasCjsExports":false},"type":"js/module"}]}