{"dependencies":[{"name":"./nativeInterface","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":414},"end":{"line":11,"column":48,"index":462}}],"key":"5p+aTJeUGezrl/VEo3WLpvgOze4=","exportNames":["*"],"imports":1}},{"name":"./internetReachability","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":463},"end":{"line":12,"column":58,"index":521}}],"key":"h5VfkDXWiN5EYd8A3EEygB1vP3Q=","exportNames":["*"],"imports":1}},{"name":"./privateTypes","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0,"index":522},"end":{"line":13,"column":47,"index":569}}],"key":"8BvuxiTUsGHSowX5GFNP+ePi44c=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return State;\n    }\n  });\n  var _nativeInterface = require(_dependencyMap[0], \"./nativeInterface\");\n  var NativeInterface = _interopDefault(_nativeInterface);\n  var _internetReachability = require(_dependencyMap[1], \"./internetReachability\");\n  var InternetReachability = _interopDefault(_internetReachability);\n  var _privateTypes = require(_dependencyMap[2], \"./privateTypes\");\n  var PrivateTypes = _interopNamespace(_privateTypes);\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n\n  /**\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *\n   * @format\n   */\n\n  class State {\n    constructor(configuration) {\n      _defineProperty(this, \"_nativeEventSubscription\", null);\n      _defineProperty(this, \"_subscriptions\", new Set());\n      _defineProperty(this, \"_latestState\", null);\n      _defineProperty(this, \"_internetReachability\", void 0);\n      _defineProperty(this, \"_handleNativeStateUpdate\", state => {\n        // Update the internet reachability module\n        this._internetReachability.update(state); // Convert the state from native to JS shape\n\n        const convertedState = this._convertState(state); // Update the listeners\n\n        this._latestState = convertedState;\n        this._subscriptions.forEach(handler => handler(convertedState));\n      });\n      _defineProperty(this, \"_handleInternetReachabilityUpdate\", isInternetReachable => {\n        if (!this._latestState) {\n          return;\n        }\n        const nextState = Object.assign({}, this._latestState, {\n          isInternetReachable\n        });\n        this._latestState = nextState;\n        this._subscriptions.forEach(handler => handler(nextState));\n      });\n      _defineProperty(this, \"_fetchCurrentState\", async requestedInterface => {\n        const state = await NativeInterface.default.getCurrentState(requestedInterface); // Update the internet reachability module\n\n        this._internetReachability.update(state); // Convert and store the new state\n\n        const convertedState = this._convertState(state);\n        if (!requestedInterface) {\n          this._latestState = convertedState;\n          this._subscriptions.forEach(handler => handler(convertedState));\n        }\n        return convertedState;\n      });\n      _defineProperty(this, \"_convertState\", input => {\n        if (typeof input.isInternetReachable === 'boolean') {\n          return input;\n        } else {\n          return Object.assign({}, input, {\n            isInternetReachable: this._internetReachability.currentState()\n          });\n        }\n      });\n      _defineProperty(this, \"latest\", requestedInterface => {\n        if (requestedInterface) {\n          return this._fetchCurrentState(requestedInterface);\n        } else if (this._latestState) {\n          return Promise.resolve(this._latestState);\n        } else {\n          return this._fetchCurrentState();\n        }\n      });\n      _defineProperty(this, \"add\", handler => {\n        // Add the subscription handler to our set\n        this._subscriptions.add(handler); // Send it the latest data we have\n\n        if (this._latestState) {\n          handler(this._latestState);\n        } else {\n          this.latest().then(handler);\n        }\n      });\n      _defineProperty(this, \"remove\", handler => {\n        this._subscriptions.delete(handler);\n      });\n      _defineProperty(this, \"tearDown\", () => {\n        if (this._internetReachability) {\n          this._internetReachability.tearDown();\n        }\n        if (this._nativeEventSubscription) {\n          this._nativeEventSubscription.remove();\n        }\n        this._subscriptions.clear();\n      });\n\n      // Add the listener to the internet connectivity events\n      this._internetReachability = new InternetReachability.default(configuration, this._handleInternetReachabilityUpdate); // Add the subscription to the native events\n\n      this._nativeEventSubscription = NativeInterface.default.eventEmitter.addListener(PrivateTypes.DEVICE_CONNECTIVITY_EVENT, this._handleNativeStateUpdate); // Fetch the current state from the native module\n\n      this._fetchCurrentState();\n    }\n  }\n});","lineCount":148,"map":[[27,2,14,15,"Object"],[27,8,14,15],[27,9,14,15,"defineProperty"],[27,23,14,15],[27,24,14,15,"exports"],[27,31,14,15],[28,4,14,15,"enumerable"],[28,14,14,15],[29,4,14,15,"get"],[29,7,14,15],[29,18,14,15,"get"],[29,19,14,15],[30,6,14,15],[30,13,14,15,"State"],[30,18,14,15],[31,4,14,15],[32,2,14,15],[33,2,11,0],[33,6,11,0,"_nativeInterface"],[33,22,11,0],[33,25,11,0,"require"],[33,32,11,0],[33,33,11,0,"_dependencyMap"],[33,47,11,0],[34,2,11,0],[34,6,11,0,"NativeInterface"],[34,21,11,0],[34,24,11,0,"_interopDefault"],[34,39,11,0],[34,40,11,0,"_nativeInterface"],[34,56,11,0],[35,2,12,0],[35,6,12,0,"_internetReachability"],[35,27,12,0],[35,30,12,0,"require"],[35,37,12,0],[35,38,12,0,"_dependencyMap"],[35,52,12,0],[36,2,12,0],[36,6,12,0,"InternetReachability"],[36,26,12,0],[36,29,12,0,"_interopDefault"],[36,44,12,0],[36,45,12,0,"_internetReachability"],[36,66,12,0],[37,2,13,0],[37,6,13,0,"_privateTypes"],[37,19,13,0],[37,22,13,0,"require"],[37,29,13,0],[37,30,13,0,"_dependencyMap"],[37,44,13,0],[38,2,13,0],[38,6,13,0,"PrivateTypes"],[38,18,13,0],[38,21,13,0,"_interopNamespace"],[38,38,13,0],[38,39,13,0,"_privateTypes"],[38,52,13,0],[39,2,1,0],[39,11,1,9,"_defineProperty"],[39,26,1,24,"_defineProperty"],[39,27,1,25,"obj"],[39,30,1,28],[39,32,1,30,"key"],[39,35,1,33],[39,37,1,35,"value"],[39,42,1,40],[39,44,1,42],[40,4,1,44],[40,8,1,48,"key"],[40,11,1,51],[40,15,1,55,"obj"],[40,18,1,58],[40,20,1,60],[41,6,1,62,"Object"],[41,12,1,68],[41,13,1,69,"defineProperty"],[41,27,1,83],[41,28,1,84,"obj"],[41,31,1,87],[41,33,1,89,"key"],[41,36,1,92],[41,38,1,94],[42,8,1,96,"value"],[42,13,1,101],[42,15,1,103,"value"],[42,20,1,108],[43,8,1,110,"enumerable"],[43,18,1,120],[43,20,1,122],[43,24,1,126],[44,8,1,128,"configurable"],[44,20,1,140],[44,22,1,142],[44,26,1,146],[45,8,1,148,"writable"],[45,16,1,156],[45,18,1,158],[46,6,1,163],[46,7,1,164],[46,8,1,165],[47,4,1,167],[47,5,1,168],[47,11,1,174],[48,6,1,176,"obj"],[48,9,1,179],[48,10,1,180,"key"],[48,13,1,183],[48,14,1,184],[48,17,1,187,"value"],[48,22,1,192],[49,4,1,194],[50,4,1,196],[50,11,1,203,"obj"],[50,14,1,206],[51,2,1,208],[53,2,3,0],[54,0,4,0],[55,0,5,0],[56,0,6,0],[57,0,7,0],[58,0,8,0],[59,0,9,0],[60,0,10,0],[62,2,14,15],[62,8,14,21,"State"],[62,13,14,26],[62,14,14,27],[63,4,15,2,"constructor"],[63,15,15,13,"constructor"],[63,16,15,14,"configuration"],[63,29,15,27],[63,31,15,29],[64,6,16,4,"_defineProperty"],[64,21,16,19],[64,22,16,20],[64,26,16,24],[64,28,16,26],[64,54,16,52],[64,56,16,54],[64,60,16,58],[64,61,16,59],[65,6,18,4,"_defineProperty"],[65,21,18,19],[65,22,18,20],[65,26,18,24],[65,28,18,26],[65,44,18,42],[65,46,18,44],[65,50,18,48,"Set"],[65,53,18,51],[65,54,18,52],[65,55,18,53],[65,56,18,54],[66,6,20,4,"_defineProperty"],[66,21,20,19],[66,22,20,20],[66,26,20,24],[66,28,20,26],[66,42,20,40],[66,44,20,42],[66,48,20,46],[66,49,20,47],[67,6,22,4,"_defineProperty"],[67,21,22,19],[67,22,22,20],[67,26,22,24],[67,28,22,26],[67,51,22,49],[67,53,22,51],[67,58,22,56],[67,59,22,57],[67,60,22,58],[68,6,24,4,"_defineProperty"],[68,21,24,19],[68,22,24,20],[68,26,24,24],[68,28,24,26],[68,54,24,52],[68,56,24,54,"state"],[68,61,24,59],[68,65,24,63],[69,8,25,6],[70,8,26,6],[70,12,26,10],[70,13,26,11,"_internetReachability"],[70,34,26,32],[70,35,26,33,"update"],[70,41,26,39],[70,42,26,40,"state"],[70,47,26,45],[70,48,26,46],[70,49,26,47],[70,50,26,48],[72,8,29,6],[72,14,29,12,"convertedState"],[72,28,29,26],[72,31,29,29],[72,35,29,33],[72,36,29,34,"_convertState"],[72,49,29,47],[72,50,29,48,"state"],[72,55,29,53],[72,56,29,54],[72,57,29,55],[72,58,29,56],[74,8,32,6],[74,12,32,10],[74,13,32,11,"_latestState"],[74,25,32,23],[74,28,32,26,"convertedState"],[74,42,32,40],[75,8,34,6],[75,12,34,10],[75,13,34,11,"_subscriptions"],[75,27,34,25],[75,28,34,26,"forEach"],[75,35,34,33],[75,36,34,34,"handler"],[75,43,34,41],[75,47,34,45,"handler"],[75,54,34,52],[75,55,34,53,"convertedState"],[75,69,34,67],[75,70,34,68],[75,71,34,69],[76,6,35,4],[76,7,35,5],[76,8,35,6],[77,6,37,4,"_defineProperty"],[77,21,37,19],[77,22,37,20],[77,26,37,24],[77,28,37,26],[77,63,37,61],[77,65,37,63,"isInternetReachable"],[77,84,37,82],[77,88,37,86],[78,8,38,6],[78,12,38,10],[78,13,38,11],[78,17,38,15],[78,18,38,16,"_latestState"],[78,30,38,28],[78,32,38,30],[79,10,39,8],[80,8,40,6],[81,8,42,6],[81,14,42,12,"nextState"],[81,23,42,21],[81,26,42,21,"Object"],[81,32,42,21],[81,33,42,21,"assign"],[81,39,42,21],[81,44,42,29],[81,48,42,33],[81,49,42,34,"_latestState"],[81,61,42,46],[82,10,43,8,"isInternetReachable"],[83,8,43,27],[83,10,44,7],[84,8,45,6],[84,12,45,10],[84,13,45,11,"_latestState"],[84,25,45,23],[84,28,45,26,"nextState"],[84,37,45,35],[85,8,47,6],[85,12,47,10],[85,13,47,11,"_subscriptions"],[85,27,47,25],[85,28,47,26,"forEach"],[85,35,47,33],[85,36,47,34,"handler"],[85,43,47,41],[85,47,47,45,"handler"],[85,54,47,52],[85,55,47,53,"nextState"],[85,64,47,62],[85,65,47,63],[85,66,47,64],[86,6,48,4],[86,7,48,5],[86,8,48,6],[87,6,50,4,"_defineProperty"],[87,21,50,19],[87,22,50,20],[87,26,50,24],[87,28,50,26],[87,48,50,46],[87,50,50,48],[87,56,50,54,"requestedInterface"],[87,74,50,72],[87,78,50,76],[88,8,51,6],[88,14,51,12,"state"],[88,19,51,17],[88,22,51,20],[88,28,51,26,"NativeInterface"],[88,43,51,41],[88,44,51,41,"default"],[88,51,51,41],[88,52,51,42,"getCurrentState"],[88,67,51,57],[88,68,51,58,"requestedInterface"],[88,86,51,76],[88,87,51,77],[88,88,51,78],[88,89,51,79],[90,8,53,6],[90,12,53,10],[90,13,53,11,"_internetReachability"],[90,34,53,32],[90,35,53,33,"update"],[90,41,53,39],[90,42,53,40,"state"],[90,47,53,45],[90,48,53,46],[90,49,53,47],[90,50,53,48],[92,8,56,6],[92,14,56,12,"convertedState"],[92,28,56,26],[92,31,56,29],[92,35,56,33],[92,36,56,34,"_convertState"],[92,49,56,47],[92,50,56,48,"state"],[92,55,56,53],[92,56,56,54],[93,8,58,6],[93,12,58,10],[93,13,58,11,"requestedInterface"],[93,31,58,29],[93,33,58,31],[94,10,59,8],[94,14,59,12],[94,15,59,13,"_latestState"],[94,27,59,25],[94,30,59,28,"convertedState"],[94,44,59,42],[95,10,61,8],[95,14,61,12],[95,15,61,13,"_subscriptions"],[95,29,61,27],[95,30,61,28,"forEach"],[95,37,61,35],[95,38,61,36,"handler"],[95,45,61,43],[95,49,61,47,"handler"],[95,56,61,54],[95,57,61,55,"convertedState"],[95,71,61,69],[95,72,61,70],[95,73,61,71],[96,8,62,6],[97,8,64,6],[97,15,64,13,"convertedState"],[97,29,64,27],[98,6,65,4],[98,7,65,5],[98,8,65,6],[99,6,67,4,"_defineProperty"],[99,21,67,19],[99,22,67,20],[99,26,67,24],[99,28,67,26],[99,43,67,41],[99,45,67,43,"input"],[99,50,67,48],[99,54,67,52],[100,8,68,6],[100,12,68,10],[100,19,68,17,"input"],[100,24,68,22],[100,25,68,23,"isInternetReachable"],[100,44,68,42],[100,49,68,47],[100,58,68,56],[100,60,68,58],[101,10,69,8],[101,17,69,15,"input"],[101,22,69,20],[102,8,70,6],[102,9,70,7],[102,15,70,13],[103,10,71,8],[103,17,71,8,"Object"],[103,23,71,8],[103,24,71,8,"assign"],[103,30,71,8],[103,35,71,20,"input"],[103,40,71,25],[104,12,72,10,"isInternetReachable"],[104,31,72,29],[104,33,72,31],[104,37,72,35],[104,38,72,36,"_internetReachability"],[104,59,72,57],[104,60,72,58,"currentState"],[104,72,72,70],[104,73,72,71],[105,10,72,72],[106,8,74,6],[107,6,75,4],[107,7,75,5],[107,8,75,6],[108,6,77,4,"_defineProperty"],[108,21,77,19],[108,22,77,20],[108,26,77,24],[108,28,77,26],[108,36,77,34],[108,38,77,36,"requestedInterface"],[108,56,77,54],[108,60,77,58],[109,8,78,6],[109,12,78,10,"requestedInterface"],[109,30,78,28],[109,32,78,30],[110,10,79,8],[110,17,79,15],[110,21,79,19],[110,22,79,20,"_fetchCurrentState"],[110,40,79,38],[110,41,79,39,"requestedInterface"],[110,59,79,57],[110,60,79,58],[111,8,80,6],[111,9,80,7],[111,15,80,13],[111,19,80,17],[111,23,80,21],[111,24,80,22,"_latestState"],[111,36,80,34],[111,38,80,36],[112,10,81,8],[112,17,81,15,"Promise"],[112,24,81,22],[112,25,81,23,"resolve"],[112,32,81,30],[112,33,81,31],[112,37,81,35],[112,38,81,36,"_latestState"],[112,50,81,48],[112,51,81,49],[113,8,82,6],[113,9,82,7],[113,15,82,13],[114,10,83,8],[114,17,83,15],[114,21,83,19],[114,22,83,20,"_fetchCurrentState"],[114,40,83,38],[114,41,83,39],[114,42,83,40],[115,8,84,6],[116,6,85,4],[116,7,85,5],[116,8,85,6],[117,6,87,4,"_defineProperty"],[117,21,87,19],[117,22,87,20],[117,26,87,24],[117,28,87,26],[117,33,87,31],[117,35,87,33,"handler"],[117,42,87,40],[117,46,87,44],[118,8,88,6],[119,8,89,6],[119,12,89,10],[119,13,89,11,"_subscriptions"],[119,27,89,25],[119,28,89,26,"add"],[119,31,89,29],[119,32,89,30,"handler"],[119,39,89,37],[119,40,89,38],[119,41,89,39],[119,42,89,40],[121,8,92,6],[121,12,92,10],[121,16,92,14],[121,17,92,15,"_latestState"],[121,29,92,27],[121,31,92,29],[122,10,93,8,"handler"],[122,17,93,15],[122,18,93,16],[122,22,93,20],[122,23,93,21,"_latestState"],[122,35,93,33],[122,36,93,34],[123,8,94,6],[123,9,94,7],[123,15,94,13],[124,10,95,8],[124,14,95,12],[124,15,95,13,"latest"],[124,21,95,19],[124,22,95,20],[124,23,95,21],[124,24,95,22,"then"],[124,28,95,26],[124,29,95,27,"handler"],[124,36,95,34],[124,37,95,35],[125,8,96,6],[126,6,97,4],[126,7,97,5],[126,8,97,6],[127,6,99,4,"_defineProperty"],[127,21,99,19],[127,22,99,20],[127,26,99,24],[127,28,99,26],[127,36,99,34],[127,38,99,36,"handler"],[127,45,99,43],[127,49,99,47],[128,8,100,6],[128,12,100,10],[128,13,100,11,"_subscriptions"],[128,27,100,25],[128,28,100,26,"delete"],[128,34,100,32],[128,35,100,33,"handler"],[128,42,100,40],[128,43,100,41],[129,6,101,4],[129,7,101,5],[129,8,101,6],[130,6,103,4,"_defineProperty"],[130,21,103,19],[130,22,103,20],[130,26,103,24],[130,28,103,26],[130,38,103,36],[130,40,103,38],[130,46,103,44],[131,8,104,6],[131,12,104,10],[131,16,104,14],[131,17,104,15,"_internetReachability"],[131,38,104,36],[131,40,104,38],[132,10,105,8],[132,14,105,12],[132,15,105,13,"_internetReachability"],[132,36,105,34],[132,37,105,35,"tearDown"],[132,45,105,43],[132,46,105,44],[132,47,105,45],[133,8,106,6],[134,8,108,6],[134,12,108,10],[134,16,108,14],[134,17,108,15,"_nativeEventSubscription"],[134,41,108,39],[134,43,108,41],[135,10,109,8],[135,14,109,12],[135,15,109,13,"_nativeEventSubscription"],[135,39,109,37],[135,40,109,38,"remove"],[135,46,109,44],[135,47,109,45],[135,48,109,46],[136,8,110,6],[137,8,112,6],[137,12,112,10],[137,13,112,11,"_subscriptions"],[137,27,112,25],[137,28,112,26,"clear"],[137,33,112,31],[137,34,112,32],[137,35,112,33],[138,6,113,4],[138,7,113,5],[138,8,113,6],[140,6,115,4],[141,6,116,4],[141,10,116,8],[141,11,116,9,"_internetReachability"],[141,32,116,30],[141,35,116,33],[141,39,116,37,"InternetReachability"],[141,59,116,57],[141,60,116,57,"default"],[141,67,116,57],[141,68,116,58,"configuration"],[141,81,116,71],[141,83,116,73],[141,87,116,77],[141,88,116,78,"_handleInternetReachabilityUpdate"],[141,121,116,111],[141,122,116,112],[141,123,116,113],[141,124,116,114],[143,6,118,4],[143,10,118,8],[143,11,118,9,"_nativeEventSubscription"],[143,35,118,33],[143,38,118,36,"NativeInterface"],[143,53,118,51],[143,54,118,51,"default"],[143,61,118,51],[143,62,118,52,"eventEmitter"],[143,74,118,64],[143,75,118,65,"addListener"],[143,86,118,76],[143,87,118,77,"PrivateTypes"],[143,99,118,89],[143,100,118,90,"DEVICE_CONNECTIVITY_EVENT"],[143,125,118,115],[143,127,118,117],[143,131,118,121],[143,132,118,122,"_handleNativeStateUpdate"],[143,156,118,146],[143,157,118,147],[143,158,118,148],[143,159,118,149],[145,6,120,4],[145,10,120,8],[145,11,120,9,"_fetchCurrentState"],[145,29,120,27],[145,30,120,28],[145,31,120,29],[146,4,121,2],[147,2,123,0],[148,0,123,1],[148,3]],"functionMap":{"names":["_defineProperty","<global>","State","State#constructor","_defineProperty$argument_2","_subscriptions.forEach$argument_0"],"mappings":"AAA,iNC;eCa;ECC;sDCS;kCCU,kCD;KDC;+DCE;kCCU,6BD;KDC;gDCE;oCCW,kCD;KDI;2CCE;KDQ;oCCE;KDQ;iCCE;KDU;oCCE;KDE;sCCE;KDU;GDQ;CDE"},"hasCjsExports":false},"type":"js/module"}]}