{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"usePWA\", {\n    enumerable: true,\n    get: function () {\n      return usePWA;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  const usePWA = () => {\n    _s();\n    const [isInstalled, setIsInstalled] = (0, _react.useState)(false);\n    const [isOnline, setIsOnline] = (0, _react.useState)(true);\n    const [updateAvailable, setUpdateAvailable] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      // Vérifier si l'app est installée (mode standalone)\n      const checkInstallation = () => {\n        const isStandalone = window.matchMedia('(display-mode: standalone)').matches;\n        const isIOSStandalone = window.navigator.standalone === true;\n        setIsInstalled(isStandalone || isIOSStandalone);\n      };\n      checkInstallation();\n\n      // Surveiller le statut réseau\n      const handleOnline = () => setIsOnline(true);\n      const handleOffline = () => setIsOnline(false);\n      window.addEventListener('online', handleOnline);\n      window.addEventListener('offline', handleOffline);\n\n      // Enregistrer le Service Worker\n      if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.register('/service-worker.js').then(registration => {\n          console.log('✅ Service Worker enregistré:', registration.scope);\n\n          // Vérifier les mises à jour\n          registration.addEventListener('updatefound', () => {\n            const newWorker = registration.installing;\n            if (newWorker) {\n              newWorker.addEventListener('statechange', () => {\n                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\n                  setUpdateAvailable(true);\n                  console.log('🔄 Mise à jour disponible');\n                }\n              });\n            }\n          });\n\n          // Vérifier les mises à jour toutes les heures\n          setInterval(() => {\n            registration.update();\n          }, 60 * 60 * 1000);\n        }).catch(error => {\n          console.error('❌ Erreur Service Worker:', error);\n        });\n      }\n      return () => {\n        window.removeEventListener('online', handleOnline);\n        window.removeEventListener('offline', handleOffline);\n      };\n    }, []);\n    const updateApp = () => {\n      if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.getRegistration().then(registration => {\n          if (registration?.waiting) {\n            registration.waiting.postMessage({\n              type: 'SKIP_WAITING'\n            });\n            window.location.reload();\n          }\n        });\n      }\n    };\n    return {\n      isInstalled,\n      isOnline,\n      updateAvailable,\n      updateApp\n    };\n  };\n  _s(usePWA, \"Jk/rCrcMKDMf21BA1HW8hr2ABi8=\");\n});","lineCount":86,"map":[[8,2,3,0,"Object"],[8,8,3,0],[8,9,3,0,"defineProperty"],[8,23,3,0],[8,24,3,0,"exports"],[8,31,3,0],[9,4,3,0,"enumerable"],[9,14,3,0],[10,4,3,0,"get"],[10,7,3,0],[10,18,3,0,"get"],[10,19,3,0],[11,6,3,0],[11,13,3,0,"usePWA"],[11,19,3,0],[12,4,3,0],[13,2,3,0],[14,2,1,0],[14,6,1,0,"_react"],[14,12,1,0],[14,15,1,0,"require"],[14,22,1,0],[14,23,1,0,"_dependencyMap"],[14,37,1,0],[15,2,3,7],[15,8,3,13,"usePWA"],[15,14,3,19],[15,17,3,22,"usePWA"],[15,18,3,22],[15,23,3,28],[16,4,3,28,"_s"],[16,6,3,28],[17,4,4,2],[17,10,4,8],[17,11,4,9,"isInstalled"],[17,22,4,20],[17,24,4,22,"setIsInstalled"],[17,38,4,36],[17,39,4,37],[17,42,4,40],[17,46,4,40,"useState"],[17,52,4,48],[17,53,4,48,"useState"],[17,61,4,48],[17,63,4,49],[17,68,4,54],[17,69,4,55],[18,4,5,2],[18,10,5,8],[18,11,5,9,"isOnline"],[18,19,5,17],[18,21,5,19,"setIsOnline"],[18,32,5,30],[18,33,5,31],[18,36,5,34],[18,40,5,34,"useState"],[18,46,5,42],[18,47,5,42,"useState"],[18,55,5,42],[18,57,5,43],[18,61,5,47],[18,62,5,48],[19,4,6,2],[19,10,6,8],[19,11,6,9,"updateAvailable"],[19,26,6,24],[19,28,6,26,"setUpdateAvailable"],[19,46,6,44],[19,47,6,45],[19,50,6,48],[19,54,6,48,"useState"],[19,60,6,56],[19,61,6,56,"useState"],[19,69,6,56],[19,71,6,57],[19,76,6,62],[19,77,6,63],[20,4,8,2],[20,8,8,2,"useEffect"],[20,14,8,11],[20,15,8,11,"useEffect"],[20,24,8,11],[20,26,8,12],[20,32,8,18],[21,6,9,4],[22,6,10,4],[22,12,10,10,"checkInstallation"],[22,29,10,27],[22,32,10,30,"checkInstallation"],[22,33,10,30],[22,38,10,36],[23,8,11,6],[23,14,11,12,"isStandalone"],[23,26,11,24],[23,29,11,27,"window"],[23,35,11,33],[23,36,11,34,"matchMedia"],[23,46,11,44],[23,47,11,45],[23,75,11,73],[23,76,11,74],[23,77,11,75,"matches"],[23,84,11,82],[24,8,12,6],[24,14,12,12,"isIOSStandalone"],[24,29,12,27],[24,32,12,31,"window"],[24,38,12,37],[24,39,12,38,"navigator"],[24,48,12,47],[24,49,12,56,"standalone"],[24,59,12,66],[24,64,12,71],[24,68,12,75],[25,8,13,6,"setIsInstalled"],[25,22,13,20],[25,23,13,21,"isStandalone"],[25,35,13,33],[25,39,13,37,"isIOSStandalone"],[25,54,13,52],[25,55,13,53],[26,6,14,4],[26,7,14,5],[27,6,16,4,"checkInstallation"],[27,23,16,21],[27,24,16,22],[27,25,16,23],[29,6,18,4],[30,6,19,4],[30,12,19,10,"handleOnline"],[30,24,19,22],[30,27,19,25,"handleOnline"],[30,28,19,25],[30,33,19,31,"setIsOnline"],[30,44,19,42],[30,45,19,43],[30,49,19,47],[30,50,19,48],[31,6,20,4],[31,12,20,10,"handleOffline"],[31,25,20,23],[31,28,20,26,"handleOffline"],[31,29,20,26],[31,34,20,32,"setIsOnline"],[31,45,20,43],[31,46,20,44],[31,51,20,49],[31,52,20,50],[32,6,22,4,"window"],[32,12,22,10],[32,13,22,11,"addEventListener"],[32,29,22,27],[32,30,22,28],[32,38,22,36],[32,40,22,38,"handleOnline"],[32,52,22,50],[32,53,22,51],[33,6,23,4,"window"],[33,12,23,10],[33,13,23,11,"addEventListener"],[33,29,23,27],[33,30,23,28],[33,39,23,37],[33,41,23,39,"handleOffline"],[33,54,23,52],[33,55,23,53],[35,6,25,4],[36,6,26,4],[36,10,26,8],[36,25,26,23],[36,29,26,27,"navigator"],[36,38,26,36],[36,40,26,38],[37,8,27,6,"navigator"],[37,17,27,15],[37,18,27,16,"serviceWorker"],[37,31,27,29],[37,32,28,9,"register"],[37,40,28,17],[37,41,28,18],[37,61,28,38],[37,62,28,39],[37,63,29,9,"then"],[37,67,29,13],[37,68,29,15,"registration"],[37,80,29,27],[37,84,29,32],[38,10,30,10,"console"],[38,17,30,17],[38,18,30,18,"log"],[38,21,30,21],[38,22,30,22],[38,52,30,52],[38,54,30,54,"registration"],[38,66,30,66],[38,67,30,67,"scope"],[38,72,30,72],[38,73,30,73],[40,10,32,10],[41,10,33,10,"registration"],[41,22,33,22],[41,23,33,23,"addEventListener"],[41,39,33,39],[41,40,33,40],[41,53,33,53],[41,55,33,55],[41,61,33,61],[42,12,34,12],[42,18,34,18,"newWorker"],[42,27,34,27],[42,30,34,30,"registration"],[42,42,34,42],[42,43,34,43,"installing"],[42,53,34,53],[43,12,35,12],[43,16,35,16,"newWorker"],[43,25,35,25],[43,27,35,27],[44,14,36,14,"newWorker"],[44,23,36,23],[44,24,36,24,"addEventListener"],[44,40,36,40],[44,41,36,41],[44,54,36,54],[44,56,36,56],[44,62,36,62],[45,16,37,16],[45,20,37,20,"newWorker"],[45,29,37,29],[45,30,37,30,"state"],[45,35,37,35],[45,40,37,40],[45,51,37,51],[45,55,37,55,"navigator"],[45,64,37,64],[45,65,37,65,"serviceWorker"],[45,78,37,78],[45,79,37,79,"controller"],[45,89,37,89],[45,91,37,91],[46,18,38,18,"setUpdateAvailable"],[46,36,38,36],[46,37,38,37],[46,41,38,41],[46,42,38,42],[47,18,39,18,"console"],[47,25,39,25],[47,26,39,26,"log"],[47,29,39,29],[47,30,39,30],[47,57,39,57],[47,58,39,58],[48,16,40,16],[49,14,41,14],[49,15,41,15],[49,16,41,16],[50,12,42,12],[51,10,43,10],[51,11,43,11],[51,12,43,12],[53,10,45,10],[54,10,46,10,"setInterval"],[54,21,46,21],[54,22,46,22],[54,28,46,28],[55,12,47,12,"registration"],[55,24,47,24],[55,25,47,25,"update"],[55,31,47,31],[55,32,47,32],[55,33,47,33],[56,10,48,10],[56,11,48,11],[56,13,48,13],[56,15,48,15],[56,18,48,18],[56,20,48,20],[56,23,48,23],[56,27,48,27],[56,28,48,28],[57,8,49,8],[57,9,49,9],[57,10,49,10],[57,11,50,9,"catch"],[57,16,50,14],[57,17,50,16,"error"],[57,22,50,21],[57,26,50,26],[58,10,51,10,"console"],[58,17,51,17],[58,18,51,18,"error"],[58,23,51,23],[58,24,51,24],[58,50,51,50],[58,52,51,52,"error"],[58,57,51,57],[58,58,51,58],[59,8,52,8],[59,9,52,9],[59,10,52,10],[60,6,53,4],[61,6,55,4],[61,13,55,11],[61,19,55,17],[62,8,56,6,"window"],[62,14,56,12],[62,15,56,13,"removeEventListener"],[62,34,56,32],[62,35,56,33],[62,43,56,41],[62,45,56,43,"handleOnline"],[62,57,56,55],[62,58,56,56],[63,8,57,6,"window"],[63,14,57,12],[63,15,57,13,"removeEventListener"],[63,34,57,32],[63,35,57,33],[63,44,57,42],[63,46,57,44,"handleOffline"],[63,59,57,57],[63,60,57,58],[64,6,58,4],[64,7,58,5],[65,4,59,2],[65,5,59,3],[65,7,59,5],[65,9,59,7],[65,10,59,8],[66,4,61,2],[66,10,61,8,"updateApp"],[66,19,61,17],[66,22,61,20,"updateApp"],[66,23,61,20],[66,28,61,26],[67,6,62,4],[67,10,62,8],[67,25,62,23],[67,29,62,27,"navigator"],[67,38,62,36],[67,40,62,38],[68,8,63,6,"navigator"],[68,17,63,15],[68,18,63,16,"serviceWorker"],[68,31,63,29],[68,32,63,30,"getRegistration"],[68,47,63,45],[68,48,63,46],[68,49,63,47],[68,50,63,48,"then"],[68,54,63,52],[68,55,63,54,"registration"],[68,67,63,66],[68,71,63,71],[69,10,64,8],[69,14,64,12,"registration"],[69,26,64,24],[69,28,64,26,"waiting"],[69,35,64,33],[69,37,64,35],[70,12,65,10,"registration"],[70,24,65,22],[70,25,65,23,"waiting"],[70,32,65,30],[70,33,65,31,"postMessage"],[70,44,65,42],[70,45,65,43],[71,14,65,45,"type"],[71,18,65,49],[71,20,65,51],[72,12,65,66],[72,13,65,67],[72,14,65,68],[73,12,66,10,"window"],[73,18,66,16],[73,19,66,17,"location"],[73,27,66,25],[73,28,66,26,"reload"],[73,34,66,32],[73,35,66,33],[73,36,66,34],[74,10,67,8],[75,8,68,6],[75,9,68,7],[75,10,68,8],[76,6,69,4],[77,4,70,2],[77,5,70,3],[78,4,72,2],[78,11,72,9],[79,6,73,4,"isInstalled"],[79,17,73,15],[80,6,74,4,"isOnline"],[80,14,74,12],[81,6,75,4,"updateAvailable"],[81,21,75,19],[82,6,76,4,"updateApp"],[83,4,77,2],[83,5,77,3],[84,2,78,0],[84,3,78,1],[85,2,78,2,"_s"],[85,4,78,2],[85,5,3,13,"usePWA"],[85,11,3,19],[86,0,3,19],[86,3]],"functionMap":{"names":["<global>","usePWA","useEffect$argument_0","checkInstallation","handleOnline","handleOffline","navigator.serviceWorker.register.then$argument_0","registration.addEventListener$argument_1","newWorker.addEventListener$argument_1","setInterval$argument_0","navigator.serviceWorker.register.then._catch$argument_0","<anonymous>","updateApp","navigator.serviceWorker.getRegistration.then$argument_0"],"mappings":"AAA;sBCE;YCK;8BCE;KDI;yBEK,uBF;0BGC,wBH;cIS;uDCI;wDCG;eDK;WDE;sBGG;WHE;SJC;eQC;SRE;WSG;KTG;GDC;oBWE;qDCE;ODK;GXE;CDQ"},"hasCjsExports":false},"type":"js/module"}]}