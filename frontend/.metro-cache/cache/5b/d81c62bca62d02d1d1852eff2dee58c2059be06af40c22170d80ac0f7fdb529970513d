{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"./nativeInterface","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":258},"end":{"line":11,"column":48,"index":306}}],"key":"5p+aTJeUGezrl/VEo3WLpvgOze4=","exportNames":["*"],"imports":1}},{"name":"./internetReachability","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":307},"end":{"line":12,"column":58,"index":365}}],"key":"h5VfkDXWiN5EYd8A3EEygB1vP3Q=","exportNames":["*"],"imports":1}},{"name":"./privateTypes","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":14,"column":0,"index":400},"end":{"line":14,"column":47,"index":447}}],"key":"8BvuxiTUsGHSowX5GFNP+ePi44c=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return State;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[2], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _nativeInterface = require(_dependencyMap[3], \"./nativeInterface\");\n  var NativeInterface = _interopDefault(_nativeInterface);\n  var _internetReachability = require(_dependencyMap[4], \"./internetReachability\");\n  var InternetReachability = _interopDefault(_internetReachability);\n  var _privateTypes = require(_dependencyMap[5], \"./privateTypes\");\n  var PrivateTypes = _interopNamespace(_privateTypes);\n  /**\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *\n   * @format\n   */\n  var State = /*#__PURE__*/(0, _createClass.default)(function State(configuration) {\n    var _this = this;\n    (0, _classCallCheck.default)(this, State);\n    this._nativeEventSubscription = null;\n    this._subscriptions = new Set();\n    this._latestState = null;\n    this._handleNativeStateUpdate = state => {\n      // Update the internet reachability module\n      this._internetReachability.update(state);\n\n      // Convert the state from native to JS shape\n      var convertedState = this._convertState(state);\n\n      // Update the listeners\n      this._latestState = convertedState;\n      this._subscriptions.forEach(handler => handler(convertedState));\n    };\n    this._handleInternetReachabilityUpdate = isInternetReachable => {\n      if (!this._latestState) {\n        return;\n      }\n      var nextState = {\n        ...this._latestState,\n        isInternetReachable\n      };\n      this._latestState = nextState;\n      this._subscriptions.forEach(handler => handler(nextState));\n    };\n    this._fetchCurrentState = /*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (requestedInterface) {\n        var state = yield NativeInterface.default.getCurrentState(requestedInterface);\n\n        // Update the internet reachability module\n        _this._internetReachability.update(state);\n        // Convert and store the new state\n        var convertedState = _this._convertState(state);\n        if (!requestedInterface) {\n          _this._latestState = convertedState;\n          _this._subscriptions.forEach(handler => handler(convertedState));\n        }\n        return convertedState;\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    this._convertState = input => {\n      if (typeof input.isInternetReachable === 'boolean') {\n        return input;\n      } else {\n        return {\n          ...input,\n          isInternetReachable: this._internetReachability.currentState()\n        };\n      }\n    };\n    this.latest = requestedInterface => {\n      if (requestedInterface) {\n        return this._fetchCurrentState(requestedInterface);\n      } else if (this._latestState) {\n        return Promise.resolve(this._latestState);\n      } else {\n        return this._fetchCurrentState();\n      }\n    };\n    this.add = handler => {\n      // Add the subscription handler to our set\n      this._subscriptions.add(handler);\n\n      // Send it the latest data we have\n      if (this._latestState) {\n        handler(this._latestState);\n      } else {\n        this.latest().then(handler);\n      }\n    };\n    this.remove = handler => {\n      this._subscriptions.delete(handler);\n    };\n    this.tearDown = () => {\n      if (this._internetReachability) {\n        this._internetReachability.tearDown();\n      }\n      if (this._nativeEventSubscription) {\n        this._nativeEventSubscription.remove();\n      }\n      this._subscriptions.clear();\n    };\n    // Add the listener to the internet connectivity events\n    this._internetReachability = new InternetReachability.default(configuration, this._handleInternetReachabilityUpdate);\n\n    // Add the subscription to the native events\n    this._nativeEventSubscription = NativeInterface.default.eventEmitter.addListener(PrivateTypes.DEVICE_CONNECTIVITY_EVENT, this._handleNativeStateUpdate);\n\n    // Fetch the current state from the native module\n    this._fetchCurrentState();\n  });\n});","lineCount":150,"map":[[30,13,16,21,"State"],[30,18,16,26],[31,4,16,26],[32,2,16,26],[33,2,16,26],[33,6,16,26,"_babelRuntimeHelpersAsyncToGenerator"],[33,42,16,26],[33,45,16,26,"require"],[33,52,16,26],[33,53,16,26,"_dependencyMap"],[33,67,16,26],[34,2,16,26],[34,6,16,26,"_asyncToGenerator"],[34,23,16,26],[34,26,16,26,"_interopDefault"],[34,41,16,26],[34,42,16,26,"_babelRuntimeHelpersAsyncToGenerator"],[34,78,16,26],[35,2,16,26],[35,6,16,26,"_babelRuntimeHelpersCreateClass"],[35,37,16,26],[35,40,16,26,"require"],[35,47,16,26],[35,48,16,26,"_dependencyMap"],[35,62,16,26],[36,2,16,26],[36,6,16,26,"_createClass"],[36,18,16,26],[36,21,16,26,"_interopDefault"],[36,36,16,26],[36,37,16,26,"_babelRuntimeHelpersCreateClass"],[36,68,16,26],[37,2,16,26],[37,6,16,26,"_babelRuntimeHelpersClassCallCheck"],[37,40,16,26],[37,43,16,26,"require"],[37,50,16,26],[37,51,16,26,"_dependencyMap"],[37,65,16,26],[38,2,16,26],[38,6,16,26,"_classCallCheck"],[38,21,16,26],[38,24,16,26,"_interopDefault"],[38,39,16,26],[38,40,16,26,"_babelRuntimeHelpersClassCallCheck"],[38,74,16,26],[39,2,11,0],[39,6,11,0,"_nativeInterface"],[39,22,11,0],[39,25,11,0,"require"],[39,32,11,0],[39,33,11,0,"_dependencyMap"],[39,47,11,0],[40,2,11,0],[40,6,11,0,"NativeInterface"],[40,21,11,0],[40,24,11,0,"_interopDefault"],[40,39,11,0],[40,40,11,0,"_nativeInterface"],[40,56,11,0],[41,2,12,0],[41,6,12,0,"_internetReachability"],[41,27,12,0],[41,30,12,0,"require"],[41,37,12,0],[41,38,12,0,"_dependencyMap"],[41,52,12,0],[42,2,12,0],[42,6,12,0,"InternetReachability"],[42,26,12,0],[42,29,12,0,"_interopDefault"],[42,44,12,0],[42,45,12,0,"_internetReachability"],[42,66,12,0],[43,2,14,0],[43,6,14,0,"_privateTypes"],[43,19,14,0],[43,22,14,0,"require"],[43,29,14,0],[43,30,14,0,"_dependencyMap"],[43,44,14,0],[44,2,14,0],[44,6,14,0,"PrivateTypes"],[44,18,14,0],[44,21,14,0,"_interopNamespace"],[44,38,14,0],[44,39,14,0,"_privateTypes"],[44,52,14,0],[45,2,1,0],[46,0,2,0],[47,0,3,0],[48,0,4,0],[49,0,5,0],[50,0,6,0],[51,0,7,0],[52,0,8,0],[53,2,1,0],[53,6,16,21,"State"],[53,11,16,26],[53,31,16,26,"_createClass"],[53,43,16,26],[53,44,16,26,"default"],[53,51,16,26],[53,53,22,2],[53,62,22,2,"State"],[53,68,22,14,"configuration"],[53,81,22,55],[53,83,22,57],[54,4,22,57],[54,8,22,57,"_this"],[54,13,22,57],[55,4,22,57],[55,8,22,57,"_classCallCheck"],[55,23,22,57],[55,24,22,57,"default"],[55,31,22,57],[55,39,22,57,"State"],[55,44,22,57],[56,4,22,57],[56,9,17,10,"_nativeEventSubscription"],[56,33,17,34],[56,36,17,69],[56,40,17,73],[57,4,17,73],[57,9,18,10,"_subscriptions"],[57,23,18,24],[57,26,18,27],[57,30,18,31,"Set"],[57,33,18,34],[57,34,18,63],[57,35,18,64],[58,4,18,64],[58,9,19,10,"_latestState"],[58,21,19,22],[58,24,19,52],[58,28,19,56],[59,4,19,56],[59,9,39,10,"_handleNativeStateUpdate"],[59,33,39,34],[59,36,40,4,"state"],[59,41,40,48],[59,45,41,13],[60,6,42,4],[61,6,43,4],[61,10,43,8],[61,11,43,9,"_internetReachability"],[61,32,43,30],[61,33,43,31,"update"],[61,39,43,37],[61,40,43,38,"state"],[61,45,43,43],[61,46,43,44],[63,6,45,4],[64,6,46,4],[64,10,46,10,"convertedState"],[64,24,46,24],[64,27,46,27],[64,31,46,31],[64,32,46,32,"_convertState"],[64,45,46,45],[64,46,46,46,"state"],[64,51,46,51],[64,52,46,52],[66,6,48,4],[67,6,49,4],[67,10,49,8],[67,11,49,9,"_latestState"],[67,23,49,21],[67,26,49,24,"convertedState"],[67,40,49,38],[68,6,50,4],[68,10,50,8],[68,11,50,9,"_subscriptions"],[68,25,50,23],[68,26,50,24,"forEach"],[68,33,50,31],[68,34,50,33,"handler"],[68,41,50,40],[68,45,50,51,"handler"],[68,52,50,58],[68,53,50,59,"convertedState"],[68,67,50,73],[68,68,50,74],[68,69,50,75],[69,4,51,2],[69,5,51,3],[70,4,51,3],[70,9,53,10,"_handleInternetReachabilityUpdate"],[70,42,53,43],[70,45,54,4,"isInternetReachable"],[70,64,54,51],[70,68,55,13],[71,6,56,4],[71,10,56,8],[71,11,56,9],[71,15,56,13],[71,16,56,14,"_latestState"],[71,28,56,26],[71,30,56,28],[72,8,57,6],[73,6,58,4],[74,6,60,4],[74,10,60,10,"nextState"],[74,19,60,19],[74,22,60,22],[75,8,61,6],[75,11,61,9],[75,15,61,13],[75,16,61,14,"_latestState"],[75,28,61,26],[76,8,62,6,"isInternetReachable"],[77,6,63,4],[77,7,63,27],[78,6,64,4],[78,10,64,8],[78,11,64,9,"_latestState"],[78,23,64,21],[78,26,64,24,"nextState"],[78,35,64,33],[79,6,65,4],[79,10,65,8],[79,11,65,9,"_subscriptions"],[79,25,65,23],[79,26,65,24,"forEach"],[79,33,65,31],[79,34,65,33,"handler"],[79,41,65,40],[79,45,65,51,"handler"],[79,52,65,58],[79,53,65,59,"nextState"],[79,62,65,68],[79,63,65,69],[79,64,65,70],[80,4,66,2],[80,5,66,3],[81,4,66,3],[81,9,68,9,"_fetchCurrentState"],[81,27,68,27],[82,6,68,27],[82,10,68,27,"_ref"],[82,14,68,27],[82,21,68,27,"_asyncToGenerator"],[82,38,68,27],[82,39,68,27,"default"],[82,46,68,27],[82,48,68,30],[82,59,69,4,"requestedInterface"],[82,77,69,31],[82,79,70,36],[83,8,71,4],[83,12,71,10,"state"],[83,17,71,15],[83,26,71,24,"NativeInterface"],[83,41,71,39],[83,42,71,39,"default"],[83,49,71,39],[83,50,71,40,"getCurrentState"],[83,65,71,55],[83,66,71,56,"requestedInterface"],[83,84,71,74],[83,85,71,75],[85,8,73,4],[86,8,74,4,"_this"],[86,13,74,8],[86,14,74,9,"_internetReachability"],[86,35,74,30],[86,36,74,31,"update"],[86,42,74,37],[86,43,74,38,"state"],[86,48,74,43],[86,49,74,44],[87,8,75,4],[88,8,76,4],[88,12,76,10,"convertedState"],[88,26,76,24],[88,29,76,27,"_this"],[88,34,76,31],[88,35,76,32,"_convertState"],[88,48,76,45],[88,49,76,46,"state"],[88,54,76,51],[88,55,76,52],[89,8,77,4],[89,12,77,8],[89,13,77,9,"requestedInterface"],[89,31,77,27],[89,33,77,29],[90,10,78,6,"_this"],[90,15,78,10],[90,16,78,11,"_latestState"],[90,28,78,23],[90,31,78,26,"convertedState"],[90,45,78,40],[91,10,79,6,"_this"],[91,15,79,10],[91,16,79,11,"_subscriptions"],[91,30,79,25],[91,31,79,26,"forEach"],[91,38,79,33],[91,39,79,35,"handler"],[91,46,79,42],[91,50,79,53,"handler"],[91,57,79,60],[91,58,79,61,"convertedState"],[91,72,79,75],[91,73,79,76],[91,74,79,77],[92,8,80,4],[93,8,82,4],[93,15,82,11,"convertedState"],[93,29,82,25],[94,6,83,2],[94,7,83,3],[95,6,83,3],[95,23,83,3,"_x"],[95,25,83,3],[96,8,83,3],[96,15,83,3,"_ref"],[96,19,83,3],[96,20,83,3,"apply"],[96,25,83,3],[96,32,83,3,"arguments"],[96,41,83,3],[97,6,83,3],[98,4,83,3],[99,4,83,3],[99,9,85,10,"_convertState"],[99,22,85,23],[99,25,86,4,"input"],[99,30,86,48],[99,34,87,27],[100,6,88,4],[100,10,88,8],[100,17,88,15,"input"],[100,22,88,20],[100,23,88,21,"isInternetReachable"],[100,42,88,40],[100,47,88,45],[100,56,88,54],[100,58,88,56],[101,8,89,6],[101,15,89,13,"input"],[101,20,89,18],[102,6,90,4],[102,7,90,5],[102,13,90,11],[103,8,91,6],[103,15,91,13],[104,10,92,8],[104,13,92,11,"input"],[104,18,92,16],[105,10,93,8,"isInternetReachable"],[105,29,93,27],[105,31,93,29],[105,35,93,33],[105,36,93,34,"_internetReachability"],[105,57,93,55],[105,58,93,56,"currentState"],[105,70,93,68],[105,71,93,69],[106,8,94,6],[106,9,94,7],[107,6,95,4],[108,4,96,2],[108,5,96,3],[109,4,96,3],[109,9,98,9,"latest"],[109,15,98,15],[109,18,99,4,"requestedInterface"],[109,36,99,31],[109,40,100,36],[110,6,101,4],[110,10,101,8,"requestedInterface"],[110,28,101,26],[110,30,101,28],[111,8,102,6],[111,15,102,13],[111,19,102,17],[111,20,102,18,"_fetchCurrentState"],[111,38,102,36],[111,39,102,37,"requestedInterface"],[111,57,102,55],[111,58,102,56],[112,6,103,4],[112,7,103,5],[112,13,103,11],[112,17,103,15],[112,21,103,19],[112,22,103,20,"_latestState"],[112,34,103,32],[112,36,103,34],[113,8,104,6],[113,15,104,13,"Promise"],[113,22,104,20],[113,23,104,21,"resolve"],[113,30,104,28],[113,31,104,29],[113,35,104,33],[113,36,104,34,"_latestState"],[113,48,104,46],[113,49,104,47],[114,6,105,4],[114,7,105,5],[114,13,105,11],[115,8,106,6],[115,15,106,13],[115,19,106,17],[115,20,106,18,"_fetchCurrentState"],[115,38,106,36],[115,39,106,37],[115,40,106,38],[116,6,107,4],[117,4,108,2],[117,5,108,3],[118,4,108,3],[118,9,110,9,"add"],[118,12,110,12],[118,15,110,16,"handler"],[118,22,110,51],[118,26,110,62],[119,6,111,4],[120,6,112,4],[120,10,112,8],[120,11,112,9,"_subscriptions"],[120,25,112,23],[120,26,112,24,"add"],[120,29,112,27],[120,30,112,28,"handler"],[120,37,112,35],[120,38,112,36],[122,6,114,4],[123,6,115,4],[123,10,115,8],[123,14,115,12],[123,15,115,13,"_latestState"],[123,27,115,25],[123,29,115,27],[124,8,116,6,"handler"],[124,15,116,13],[124,16,116,14],[124,20,116,18],[124,21,116,19,"_latestState"],[124,33,116,31],[124,34,116,32],[125,6,117,4],[125,7,117,5],[125,13,117,11],[126,8,118,6],[126,12,118,10],[126,13,118,11,"latest"],[126,19,118,17],[126,20,118,18],[126,21,118,19],[126,22,118,20,"then"],[126,26,118,24],[126,27,118,25,"handler"],[126,34,118,32],[126,35,118,33],[127,6,119,4],[128,4,120,2],[128,5,120,3],[129,4,120,3],[129,9,122,9,"remove"],[129,15,122,15],[129,18,122,19,"handler"],[129,25,122,54],[129,29,122,65],[130,6,123,4],[130,10,123,8],[130,11,123,9,"_subscriptions"],[130,25,123,23],[130,26,123,24,"delete"],[130,32,123,30],[130,33,123,31,"handler"],[130,40,123,38],[130,41,123,39],[131,4,124,2],[131,5,124,3],[132,4,124,3],[132,9,126,9,"tearDown"],[132,17,126,17],[132,20,126,20],[132,26,126,32],[133,6,127,4],[133,10,127,8],[133,14,127,12],[133,15,127,13,"_internetReachability"],[133,36,127,34],[133,38,127,36],[134,8,128,6],[134,12,128,10],[134,13,128,11,"_internetReachability"],[134,34,128,32],[134,35,128,33,"tearDown"],[134,43,128,41],[134,44,128,42],[134,45,128,43],[135,6,129,4],[136,6,131,4],[136,10,131,8],[136,14,131,12],[136,15,131,13,"_nativeEventSubscription"],[136,39,131,37],[136,41,131,39],[137,8,132,6],[137,12,132,10],[137,13,132,11,"_nativeEventSubscription"],[137,37,132,35],[137,38,132,36,"remove"],[137,44,132,42],[137,45,132,43],[137,46,132,44],[138,6,133,4],[139,6,135,4],[139,10,135,8],[139,11,135,9,"_subscriptions"],[139,25,135,23],[139,26,135,24,"clear"],[139,31,135,29],[139,32,135,30],[139,33,135,31],[140,4,136,2],[140,5,136,3],[141,4,23,4],[142,4,24,4],[142,8,24,8],[142,9,24,9,"_internetReachability"],[142,30,24,30],[142,33,24,33],[142,37,24,37,"InternetReachability"],[142,57,24,57],[142,58,24,57,"default"],[142,65,24,57],[142,66,25,6,"configuration"],[142,79,25,19],[142,81,26,6],[142,85,26,10],[142,86,26,11,"_handleInternetReachabilityUpdate"],[142,119,27,4],[142,120,27,5],[144,4,29,4],[145,4,30,4],[145,8,30,8],[145,9,30,9,"_nativeEventSubscription"],[145,33,30,33],[145,36,30,36,"NativeInterface"],[145,51,30,51],[145,52,30,51,"default"],[145,59,30,51],[145,60,30,52,"eventEmitter"],[145,72,30,64],[145,73,30,65,"addListener"],[145,84,30,76],[145,85,31,6,"PrivateTypes"],[145,97,31,18],[145,98,31,19,"DEVICE_CONNECTIVITY_EVENT"],[145,123,31,44],[145,125,32,6],[145,129,32,10],[145,130,32,11,"_handleNativeStateUpdate"],[145,154,33,4],[145,155,33,5],[147,4,35,4],[148,4,36,4],[148,8,36,8],[148,9,36,9,"_fetchCurrentState"],[148,27,36,27],[148,28,36,28],[148,29,36,29],[149,2,37,2],[149,3,37,3],[150,0,37,3],[150,3]],"functionMap":{"names":["<global>","State","State#constructor","State#_handleNativeStateUpdate","_subscriptions.forEach$argument_0","State#_handleInternetReachabilityUpdate","State#_fetchCurrentState","State#_convertState","State#latest","State#add","State#remove","State#tearDown"],"mappings":"AAA;eCe;ECM;GDe;qCEE;gCCW,0CD;GFC;8CIE;gCDY,qCC;GJC;8BKE;kCFW,0CE;GLI;0BME;GNW;kBOE;GPU;eQE;GRU;kBSE;GTE;oBUE;GVU;CDC"},"hasCjsExports":false},"type":"js/module"}]}