{"dependencies":[{"name":"./nativeInterface","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":414},"end":{"line":11,"column":48,"index":462}}],"key":"5p+aTJeUGezrl/VEo3WLpvgOze4=","exportNames":["*"],"imports":1}},{"name":"./internetReachability","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":463},"end":{"line":12,"column":58,"index":521}}],"key":"h5VfkDXWiN5EYd8A3EEygB1vP3Q=","exportNames":["*"],"imports":1}},{"name":"./privateTypes","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0,"index":522},"end":{"line":13,"column":47,"index":569}}],"key":"8BvuxiTUsGHSowX5GFNP+ePi44c=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return State;\n    }\n  });\n  var _nativeInterface = require(_dependencyMap[0], \"./nativeInterface\");\n  var NativeInterface = _interopDefault(_nativeInterface);\n  var _internetReachability = require(_dependencyMap[1], \"./internetReachability\");\n  var InternetReachability = _interopDefault(_internetReachability);\n  var _privateTypes = require(_dependencyMap[2], \"./privateTypes\");\n  var PrivateTypes = _interopNamespace(_privateTypes);\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n\n  /**\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *\n   * @format\n   */\n\n  class State {\n    constructor(configuration) {\n      _defineProperty(this, \"_nativeEventSubscription\", null);\n      _defineProperty(this, \"_subscriptions\", new Set());\n      _defineProperty(this, \"_latestState\", null);\n      _defineProperty(this, \"_internetReachability\", void 0);\n      _defineProperty(this, \"_handleNativeStateUpdate\", state => {\n        // Update the internet reachability module\n        this._internetReachability.update(state); // Convert the state from native to JS shape\n\n        const convertedState = this._convertState(state); // Update the listeners\n\n        this._latestState = convertedState;\n        this._subscriptions.forEach(handler => handler(convertedState));\n      });\n      _defineProperty(this, \"_handleInternetReachabilityUpdate\", isInternetReachable => {\n        if (!this._latestState) {\n          return;\n        }\n        const nextState = {\n          ...this._latestState,\n          isInternetReachable\n        };\n        this._latestState = nextState;\n        this._subscriptions.forEach(handler => handler(nextState));\n      });\n      _defineProperty(this, \"_fetchCurrentState\", async requestedInterface => {\n        const state = await NativeInterface.default.getCurrentState(requestedInterface); // Update the internet reachability module\n\n        this._internetReachability.update(state); // Convert and store the new state\n\n        const convertedState = this._convertState(state);\n        if (!requestedInterface) {\n          this._latestState = convertedState;\n          this._subscriptions.forEach(handler => handler(convertedState));\n        }\n        return convertedState;\n      });\n      _defineProperty(this, \"_convertState\", input => {\n        if (typeof input.isInternetReachable === 'boolean') {\n          return input;\n        } else {\n          return {\n            ...input,\n            isInternetReachable: this._internetReachability.currentState()\n          };\n        }\n      });\n      _defineProperty(this, \"latest\", requestedInterface => {\n        if (requestedInterface) {\n          return this._fetchCurrentState(requestedInterface);\n        } else if (this._latestState) {\n          return Promise.resolve(this._latestState);\n        } else {\n          return this._fetchCurrentState();\n        }\n      });\n      _defineProperty(this, \"add\", handler => {\n        // Add the subscription handler to our set\n        this._subscriptions.add(handler); // Send it the latest data we have\n\n        if (this._latestState) {\n          handler(this._latestState);\n        } else {\n          this.latest().then(handler);\n        }\n      });\n      _defineProperty(this, \"remove\", handler => {\n        this._subscriptions.delete(handler);\n      });\n      _defineProperty(this, \"tearDown\", () => {\n        if (this._internetReachability) {\n          this._internetReachability.tearDown();\n        }\n        if (this._nativeEventSubscription) {\n          this._nativeEventSubscription.remove();\n        }\n        this._subscriptions.clear();\n      });\n\n      // Add the listener to the internet connectivity events\n      this._internetReachability = new InternetReachability.default(configuration, this._handleInternetReachabilityUpdate); // Add the subscription to the native events\n\n      this._nativeEventSubscription = NativeInterface.default.eventEmitter.addListener(PrivateTypes.DEVICE_CONNECTIVITY_EVENT, this._handleNativeStateUpdate); // Fetch the current state from the native module\n\n      this._fetchCurrentState();\n    }\n  }\n});","lineCount":150,"map":[[27,2,14,15,"Object"],[27,8,14,15],[27,9,14,15,"defineProperty"],[27,23,14,15],[27,24,14,15,"exports"],[27,31,14,15],[28,4,14,15,"enumerable"],[28,14,14,15],[29,4,14,15,"get"],[29,7,14,15],[29,18,14,15,"get"],[29,19,14,15],[30,6,14,15],[30,13,14,15,"State"],[30,18,14,15],[31,4,14,15],[32,2,14,15],[33,2,11,0],[33,6,11,0,"_nativeInterface"],[33,22,11,0],[33,25,11,0,"require"],[33,32,11,0],[33,33,11,0,"_dependencyMap"],[33,47,11,0],[34,2,11,0],[34,6,11,0,"NativeInterface"],[34,21,11,0],[34,24,11,0,"_interopDefault"],[34,39,11,0],[34,40,11,0,"_nativeInterface"],[34,56,11,0],[35,2,12,0],[35,6,12,0,"_internetReachability"],[35,27,12,0],[35,30,12,0,"require"],[35,37,12,0],[35,38,12,0,"_dependencyMap"],[35,52,12,0],[36,2,12,0],[36,6,12,0,"InternetReachability"],[36,26,12,0],[36,29,12,0,"_interopDefault"],[36,44,12,0],[36,45,12,0,"_internetReachability"],[36,66,12,0],[37,2,13,0],[37,6,13,0,"_privateTypes"],[37,19,13,0],[37,22,13,0,"require"],[37,29,13,0],[37,30,13,0,"_dependencyMap"],[37,44,13,0],[38,2,13,0],[38,6,13,0,"PrivateTypes"],[38,18,13,0],[38,21,13,0,"_interopNamespace"],[38,38,13,0],[38,39,13,0,"_privateTypes"],[38,52,13,0],[39,2,1,0],[39,11,1,9,"_defineProperty"],[39,26,1,24,"_defineProperty"],[39,27,1,25,"obj"],[39,30,1,28],[39,32,1,30,"key"],[39,35,1,33],[39,37,1,35,"value"],[39,42,1,40],[39,44,1,42],[40,4,1,44],[40,8,1,48,"key"],[40,11,1,51],[40,15,1,55,"obj"],[40,18,1,58],[40,20,1,60],[41,6,1,62,"Object"],[41,12,1,68],[41,13,1,69,"defineProperty"],[41,27,1,83],[41,28,1,84,"obj"],[41,31,1,87],[41,33,1,89,"key"],[41,36,1,92],[41,38,1,94],[42,8,1,96,"value"],[42,13,1,101],[42,15,1,103,"value"],[42,20,1,108],[43,8,1,110,"enumerable"],[43,18,1,120],[43,20,1,122],[43,24,1,126],[44,8,1,128,"configurable"],[44,20,1,140],[44,22,1,142],[44,26,1,146],[45,8,1,148,"writable"],[45,16,1,156],[45,18,1,158],[46,6,1,163],[46,7,1,164],[46,8,1,165],[47,4,1,167],[47,5,1,168],[47,11,1,174],[48,6,1,176,"obj"],[48,9,1,179],[48,10,1,180,"key"],[48,13,1,183],[48,14,1,184],[48,17,1,187,"value"],[48,22,1,192],[49,4,1,194],[50,4,1,196],[50,11,1,203,"obj"],[50,14,1,206],[51,2,1,208],[53,2,3,0],[54,0,4,0],[55,0,5,0],[56,0,6,0],[57,0,7,0],[58,0,8,0],[59,0,9,0],[60,0,10,0],[62,2,14,15],[62,8,14,21,"State"],[62,13,14,26],[62,14,14,27],[63,4,15,2,"constructor"],[63,15,15,13,"constructor"],[63,16,15,14,"configuration"],[63,29,15,27],[63,31,15,29],[64,6,16,4,"_defineProperty"],[64,21,16,19],[64,22,16,20],[64,26,16,24],[64,28,16,26],[64,54,16,52],[64,56,16,54],[64,60,16,58],[64,61,16,59],[65,6,18,4,"_defineProperty"],[65,21,18,19],[65,22,18,20],[65,26,18,24],[65,28,18,26],[65,44,18,42],[65,46,18,44],[65,50,18,48,"Set"],[65,53,18,51],[65,54,18,52],[65,55,18,53],[65,56,18,54],[66,6,20,4,"_defineProperty"],[66,21,20,19],[66,22,20,20],[66,26,20,24],[66,28,20,26],[66,42,20,40],[66,44,20,42],[66,48,20,46],[66,49,20,47],[67,6,22,4,"_defineProperty"],[67,21,22,19],[67,22,22,20],[67,26,22,24],[67,28,22,26],[67,51,22,49],[67,53,22,51],[67,58,22,56],[67,59,22,57],[67,60,22,58],[68,6,24,4,"_defineProperty"],[68,21,24,19],[68,22,24,20],[68,26,24,24],[68,28,24,26],[68,54,24,52],[68,56,24,54,"state"],[68,61,24,59],[68,65,24,63],[69,8,25,6],[70,8,26,6],[70,12,26,10],[70,13,26,11,"_internetReachability"],[70,34,26,32],[70,35,26,33,"update"],[70,41,26,39],[70,42,26,40,"state"],[70,47,26,45],[70,48,26,46],[70,49,26,47],[70,50,26,48],[72,8,29,6],[72,14,29,12,"convertedState"],[72,28,29,26],[72,31,29,29],[72,35,29,33],[72,36,29,34,"_convertState"],[72,49,29,47],[72,50,29,48,"state"],[72,55,29,53],[72,56,29,54],[72,57,29,55],[72,58,29,56],[74,8,32,6],[74,12,32,10],[74,13,32,11,"_latestState"],[74,25,32,23],[74,28,32,26,"convertedState"],[74,42,32,40],[75,8,34,6],[75,12,34,10],[75,13,34,11,"_subscriptions"],[75,27,34,25],[75,28,34,26,"forEach"],[75,35,34,33],[75,36,34,34,"handler"],[75,43,34,41],[75,47,34,45,"handler"],[75,54,34,52],[75,55,34,53,"convertedState"],[75,69,34,67],[75,70,34,68],[75,71,34,69],[76,6,35,4],[76,7,35,5],[76,8,35,6],[77,6,37,4,"_defineProperty"],[77,21,37,19],[77,22,37,20],[77,26,37,24],[77,28,37,26],[77,63,37,61],[77,65,37,63,"isInternetReachable"],[77,84,37,82],[77,88,37,86],[78,8,38,6],[78,12,38,10],[78,13,38,11],[78,17,38,15],[78,18,38,16,"_latestState"],[78,30,38,28],[78,32,38,30],[79,10,39,8],[80,8,40,6],[81,8,42,6],[81,14,42,12,"nextState"],[81,23,42,21],[81,26,42,24],[82,10,42,26],[82,13,42,29],[82,17,42,33],[82,18,42,34,"_latestState"],[82,30,42,46],[83,10,43,8,"isInternetReachable"],[84,8,44,6],[84,9,44,7],[85,8,45,6],[85,12,45,10],[85,13,45,11,"_latestState"],[85,25,45,23],[85,28,45,26,"nextState"],[85,37,45,35],[86,8,47,6],[86,12,47,10],[86,13,47,11,"_subscriptions"],[86,27,47,25],[86,28,47,26,"forEach"],[86,35,47,33],[86,36,47,34,"handler"],[86,43,47,41],[86,47,47,45,"handler"],[86,54,47,52],[86,55,47,53,"nextState"],[86,64,47,62],[86,65,47,63],[86,66,47,64],[87,6,48,4],[87,7,48,5],[87,8,48,6],[88,6,50,4,"_defineProperty"],[88,21,50,19],[88,22,50,20],[88,26,50,24],[88,28,50,26],[88,48,50,46],[88,50,50,48],[88,56,50,54,"requestedInterface"],[88,74,50,72],[88,78,50,76],[89,8,51,6],[89,14,51,12,"state"],[89,19,51,17],[89,22,51,20],[89,28,51,26,"NativeInterface"],[89,43,51,41],[89,44,51,41,"default"],[89,51,51,41],[89,52,51,42,"getCurrentState"],[89,67,51,57],[89,68,51,58,"requestedInterface"],[89,86,51,76],[89,87,51,77],[89,88,51,78],[89,89,51,79],[91,8,53,6],[91,12,53,10],[91,13,53,11,"_internetReachability"],[91,34,53,32],[91,35,53,33,"update"],[91,41,53,39],[91,42,53,40,"state"],[91,47,53,45],[91,48,53,46],[91,49,53,47],[91,50,53,48],[93,8,56,6],[93,14,56,12,"convertedState"],[93,28,56,26],[93,31,56,29],[93,35,56,33],[93,36,56,34,"_convertState"],[93,49,56,47],[93,50,56,48,"state"],[93,55,56,53],[93,56,56,54],[94,8,58,6],[94,12,58,10],[94,13,58,11,"requestedInterface"],[94,31,58,29],[94,33,58,31],[95,10,59,8],[95,14,59,12],[95,15,59,13,"_latestState"],[95,27,59,25],[95,30,59,28,"convertedState"],[95,44,59,42],[96,10,61,8],[96,14,61,12],[96,15,61,13,"_subscriptions"],[96,29,61,27],[96,30,61,28,"forEach"],[96,37,61,35],[96,38,61,36,"handler"],[96,45,61,43],[96,49,61,47,"handler"],[96,56,61,54],[96,57,61,55,"convertedState"],[96,71,61,69],[96,72,61,70],[96,73,61,71],[97,8,62,6],[98,8,64,6],[98,15,64,13,"convertedState"],[98,29,64,27],[99,6,65,4],[99,7,65,5],[99,8,65,6],[100,6,67,4,"_defineProperty"],[100,21,67,19],[100,22,67,20],[100,26,67,24],[100,28,67,26],[100,43,67,41],[100,45,67,43,"input"],[100,50,67,48],[100,54,67,52],[101,8,68,6],[101,12,68,10],[101,19,68,17,"input"],[101,24,68,22],[101,25,68,23,"isInternetReachable"],[101,44,68,42],[101,49,68,47],[101,58,68,56],[101,60,68,58],[102,10,69,8],[102,17,69,15,"input"],[102,22,69,20],[103,8,70,6],[103,9,70,7],[103,15,70,13],[104,10,71,8],[104,17,71,15],[105,12,71,17],[105,15,71,20,"input"],[105,20,71,25],[106,12,72,10,"isInternetReachable"],[106,31,72,29],[106,33,72,31],[106,37,72,35],[106,38,72,36,"_internetReachability"],[106,59,72,57],[106,60,72,58,"currentState"],[106,72,72,70],[106,73,72,71],[107,10,73,8],[107,11,73,9],[108,8,74,6],[109,6,75,4],[109,7,75,5],[109,8,75,6],[110,6,77,4,"_defineProperty"],[110,21,77,19],[110,22,77,20],[110,26,77,24],[110,28,77,26],[110,36,77,34],[110,38,77,36,"requestedInterface"],[110,56,77,54],[110,60,77,58],[111,8,78,6],[111,12,78,10,"requestedInterface"],[111,30,78,28],[111,32,78,30],[112,10,79,8],[112,17,79,15],[112,21,79,19],[112,22,79,20,"_fetchCurrentState"],[112,40,79,38],[112,41,79,39,"requestedInterface"],[112,59,79,57],[112,60,79,58],[113,8,80,6],[113,9,80,7],[113,15,80,13],[113,19,80,17],[113,23,80,21],[113,24,80,22,"_latestState"],[113,36,80,34],[113,38,80,36],[114,10,81,8],[114,17,81,15,"Promise"],[114,24,81,22],[114,25,81,23,"resolve"],[114,32,81,30],[114,33,81,31],[114,37,81,35],[114,38,81,36,"_latestState"],[114,50,81,48],[114,51,81,49],[115,8,82,6],[115,9,82,7],[115,15,82,13],[116,10,83,8],[116,17,83,15],[116,21,83,19],[116,22,83,20,"_fetchCurrentState"],[116,40,83,38],[116,41,83,39],[116,42,83,40],[117,8,84,6],[118,6,85,4],[118,7,85,5],[118,8,85,6],[119,6,87,4,"_defineProperty"],[119,21,87,19],[119,22,87,20],[119,26,87,24],[119,28,87,26],[119,33,87,31],[119,35,87,33,"handler"],[119,42,87,40],[119,46,87,44],[120,8,88,6],[121,8,89,6],[121,12,89,10],[121,13,89,11,"_subscriptions"],[121,27,89,25],[121,28,89,26,"add"],[121,31,89,29],[121,32,89,30,"handler"],[121,39,89,37],[121,40,89,38],[121,41,89,39],[121,42,89,40],[123,8,92,6],[123,12,92,10],[123,16,92,14],[123,17,92,15,"_latestState"],[123,29,92,27],[123,31,92,29],[124,10,93,8,"handler"],[124,17,93,15],[124,18,93,16],[124,22,93,20],[124,23,93,21,"_latestState"],[124,35,93,33],[124,36,93,34],[125,8,94,6],[125,9,94,7],[125,15,94,13],[126,10,95,8],[126,14,95,12],[126,15,95,13,"latest"],[126,21,95,19],[126,22,95,20],[126,23,95,21],[126,24,95,22,"then"],[126,28,95,26],[126,29,95,27,"handler"],[126,36,95,34],[126,37,95,35],[127,8,96,6],[128,6,97,4],[128,7,97,5],[128,8,97,6],[129,6,99,4,"_defineProperty"],[129,21,99,19],[129,22,99,20],[129,26,99,24],[129,28,99,26],[129,36,99,34],[129,38,99,36,"handler"],[129,45,99,43],[129,49,99,47],[130,8,100,6],[130,12,100,10],[130,13,100,11,"_subscriptions"],[130,27,100,25],[130,28,100,26,"delete"],[130,34,100,32],[130,35,100,33,"handler"],[130,42,100,40],[130,43,100,41],[131,6,101,4],[131,7,101,5],[131,8,101,6],[132,6,103,4,"_defineProperty"],[132,21,103,19],[132,22,103,20],[132,26,103,24],[132,28,103,26],[132,38,103,36],[132,40,103,38],[132,46,103,44],[133,8,104,6],[133,12,104,10],[133,16,104,14],[133,17,104,15,"_internetReachability"],[133,38,104,36],[133,40,104,38],[134,10,105,8],[134,14,105,12],[134,15,105,13,"_internetReachability"],[134,36,105,34],[134,37,105,35,"tearDown"],[134,45,105,43],[134,46,105,44],[134,47,105,45],[135,8,106,6],[136,8,108,6],[136,12,108,10],[136,16,108,14],[136,17,108,15,"_nativeEventSubscription"],[136,41,108,39],[136,43,108,41],[137,10,109,8],[137,14,109,12],[137,15,109,13,"_nativeEventSubscription"],[137,39,109,37],[137,40,109,38,"remove"],[137,46,109,44],[137,47,109,45],[137,48,109,46],[138,8,110,6],[139,8,112,6],[139,12,112,10],[139,13,112,11,"_subscriptions"],[139,27,112,25],[139,28,112,26,"clear"],[139,33,112,31],[139,34,112,32],[139,35,112,33],[140,6,113,4],[140,7,113,5],[140,8,113,6],[142,6,115,4],[143,6,116,4],[143,10,116,8],[143,11,116,9,"_internetReachability"],[143,32,116,30],[143,35,116,33],[143,39,116,37,"InternetReachability"],[143,59,116,57],[143,60,116,57,"default"],[143,67,116,57],[143,68,116,58,"configuration"],[143,81,116,71],[143,83,116,73],[143,87,116,77],[143,88,116,78,"_handleInternetReachabilityUpdate"],[143,121,116,111],[143,122,116,112],[143,123,116,113],[143,124,116,114],[145,6,118,4],[145,10,118,8],[145,11,118,9,"_nativeEventSubscription"],[145,35,118,33],[145,38,118,36,"NativeInterface"],[145,53,118,51],[145,54,118,51,"default"],[145,61,118,51],[145,62,118,52,"eventEmitter"],[145,74,118,64],[145,75,118,65,"addListener"],[145,86,118,76],[145,87,118,77,"PrivateTypes"],[145,99,118,89],[145,100,118,90,"DEVICE_CONNECTIVITY_EVENT"],[145,125,118,115],[145,127,118,117],[145,131,118,121],[145,132,118,122,"_handleNativeStateUpdate"],[145,156,118,146],[145,157,118,147],[145,158,118,148],[145,159,118,149],[147,6,120,4],[147,10,120,8],[147,11,120,9,"_fetchCurrentState"],[147,29,120,27],[147,30,120,28],[147,31,120,29],[148,4,121,2],[149,2,123,0],[150,0,123,1],[150,3]],"functionMap":{"names":["_defineProperty","<global>","State","State#constructor","_defineProperty$argument_2","_subscriptions.forEach$argument_0"],"mappings":"AAA,iNC;eCa;ECC;sDCS;kCCU,kCD;KDC;+DCE;kCCU,6BD;KDC;gDCE;oCCW,kCD;KDI;2CCE;KDQ;oCCE;KDQ;iCCE;KDU;oCCE;KDE;sCCE;KDU;GDQ;CDE"},"hasCjsExports":false},"type":"js/module"}]}