{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":54,"index":54}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":55},"end":{"line":2,"column":59,"index":114}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"./modules","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":115},"end":{"line":3,"column":43,"index":158}}],"key":"ORG3mfwHjN5F9oWzg+UYztAGWTE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useModal\", {\n    enumerable: true,\n    get: function () {\n      return useModal;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNative = require(_dependencyMap[1], \"react-native\");\n  var _modules = require(_dependencyMap[2], \"./modules\");\n  var NativeModule = (0, _modules.getNativeModule)();\n\n  /**\n   * @param {ModalProps} props\n   * @param {ModalProps | undefined} prevProps\n   */\n  var shouldOpenModal = (props, prevProps) => {\n    if (!props.modal) return false;\n    if (!props.open) return false;\n    var currentlyOpen = prevProps?.open;\n    if (currentlyOpen) return false;\n    return true;\n  };\n\n  /**\n   * @param {ModalProps} props\n   * @param {ModalProps | undefined} prevProps\n   * @param {boolean} isClosing\n   */\n  var shouldCloseModal = (props, prevProps, isClosing) => {\n    if (!props.modal) return false;\n    if (props.open) return false;\n    var currentlyOpen = prevProps?.open;\n    if (!currentlyOpen) return false;\n    if (isClosing) return false;\n    return true;\n  };\n\n  /**\n   *\n   * @template T\n   * @param {T} value\n   * @returns {T | undefined}\n   */\n  var usePrevious = value => {\n    /** @type {React.MutableRefObject<T | undefined>} */\n    var ref = (0, _react.useRef)();\n    (0, _react.useEffect)(() => {\n      ref.current = value;\n    });\n    return ref.current;\n  };\n\n  /** @param {{props: ModalProps, id: string | undefined }} props */\n  var useModal = _ref => {\n    var props = _ref.props,\n      id = _ref.id;\n    var closing = (0, _react.useRef)(false);\n    var previousProps = usePrevious(props);\n    var onConfirm = (0, _react.useCallback)(params => {\n      if (params.id !== id) return;\n      closing.current = true;\n      var date = _reactNative.Platform.select({\n        ios: params.timestamp,\n        android: params.date\n      });\n      if (props.onConfirm) props.onConfirm(new Date(date));\n    }, [id, props]);\n    var onCancel = (0, _react.useCallback)(params => {\n      if (params?.id !== id) return;\n      closing.current = true;\n      if (props.onCancel) props.onCancel();\n    }, [id, props]);\n\n    // open\n    (0, _react.useEffect)(() => {\n      if (shouldOpenModal(props, previousProps)) {\n        closing.current = false;\n        var params = _reactNative.Platform.select({\n          android: [props],\n          ios: [props, onConfirm, onCancel]\n        });\n        if (!params) throw Error('Unsupported platform');\n        NativeModule.openPicker(...params);\n      }\n    }, [onCancel, onConfirm, previousProps, props]);\n\n    // close\n    (0, _react.useEffect)(() => {\n      if (shouldCloseModal(props, previousProps, closing.current)) {\n        closing.current = true;\n        NativeModule.closePicker();\n      }\n    }, [previousProps, props]);\n    (0, _react.useEffect)(() => {\n      var eventEmitter = new _reactNative.NativeEventEmitter(NativeModule);\n      eventEmitter.addListener('onConfirm', onConfirm);\n      eventEmitter.addListener('onCancel', onCancel);\n      return () => {\n        eventEmitter.removeAllListeners('onConfirm');\n        eventEmitter.removeAllListeners('onCancel');\n      };\n    }, [onCancel, onConfirm]);\n  };\n});","lineCount":110,"map":[[7,2,49,0,"Object"],[7,8,49,0],[7,9,49,0,"defineProperty"],[7,23,49,0],[7,24,49,0,"exports"],[7,31,49,0],[8,4,49,0,"enumerable"],[8,14,49,0],[9,4,49,0,"get"],[9,7,49,0],[9,18,49,0,"get"],[9,19,49,0],[10,6,49,0],[10,13,49,0,"useModal"],[10,21,49,0],[11,4,49,0],[12,2,49,0],[13,2,1,0],[13,6,1,0,"_react"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,2,0],[14,6,2,0,"_reactNative"],[14,18,2,0],[14,21,2,0,"require"],[14,28,2,0],[14,29,2,0,"_dependencyMap"],[14,43,2,0],[15,2,3,0],[15,6,3,0,"_modules"],[15,14,3,0],[15,17,3,0,"require"],[15,24,3,0],[15,25,3,0,"_dependencyMap"],[15,39,3,0],[16,2,5,0],[16,6,5,6,"NativeModule"],[16,18,5,18],[16,21,5,21],[16,25,5,21,"getNativeModule"],[16,33,5,36],[16,34,5,36,"getNativeModule"],[16,49,5,36],[16,51,5,37],[16,52,5,38],[18,2,7,0],[19,0,8,0],[20,0,9,0],[21,0,10,0],[22,2,11,0],[22,6,11,6,"shouldOpenModal"],[22,21,11,21],[22,24,11,24,"shouldOpenModal"],[22,25,11,25,"props"],[22,30,11,30],[22,32,11,32,"prevProps"],[22,41,11,41],[22,46,11,46],[23,4,12,2],[23,8,12,6],[23,9,12,7,"props"],[23,14,12,12],[23,15,12,13,"modal"],[23,20,12,18],[23,22,12,20],[23,29,12,27],[23,34,12,32],[24,4,13,2],[24,8,13,6],[24,9,13,7,"props"],[24,14,13,12],[24,15,13,13,"open"],[24,19,13,17],[24,21,13,19],[24,28,13,26],[24,33,13,31],[25,4,14,2],[25,8,14,8,"currentlyOpen"],[25,21,14,21],[25,24,14,24,"prevProps"],[25,33,14,33],[25,35,14,35,"open"],[25,39,14,39],[26,4,15,2],[26,8,15,6,"currentlyOpen"],[26,21,15,19],[26,23,15,21],[26,30,15,28],[26,35,15,33],[27,4,16,2],[27,11,16,9],[27,15,16,13],[28,2,17,0],[28,3,17,1],[30,2,19,0],[31,0,20,0],[32,0,21,0],[33,0,22,0],[34,0,23,0],[35,2,24,0],[35,6,24,6,"shouldCloseModal"],[35,22,24,22],[35,25,24,25,"shouldCloseModal"],[35,26,24,26,"props"],[35,31,24,31],[35,33,24,33,"prevProps"],[35,42,24,42],[35,44,24,44,"isClosing"],[35,53,24,53],[35,58,24,58],[36,4,25,2],[36,8,25,6],[36,9,25,7,"props"],[36,14,25,12],[36,15,25,13,"modal"],[36,20,25,18],[36,22,25,20],[36,29,25,27],[36,34,25,32],[37,4,26,2],[37,8,26,6,"props"],[37,13,26,11],[37,14,26,12,"open"],[37,18,26,16],[37,20,26,18],[37,27,26,25],[37,32,26,30],[38,4,27,2],[38,8,27,8,"currentlyOpen"],[38,21,27,21],[38,24,27,24,"prevProps"],[38,33,27,33],[38,35,27,35,"open"],[38,39,27,39],[39,4,28,2],[39,8,28,6],[39,9,28,7,"currentlyOpen"],[39,22,28,20],[39,24,28,22],[39,31,28,29],[39,36,28,34],[40,4,29,2],[40,8,29,6,"isClosing"],[40,17,29,15],[40,19,29,17],[40,26,29,24],[40,31,29,29],[41,4,30,2],[41,11,30,9],[41,15,30,13],[42,2,31,0],[42,3,31,1],[44,2,33,0],[45,0,34,0],[46,0,35,0],[47,0,36,0],[48,0,37,0],[49,0,38,0],[50,2,39,0],[50,6,39,6,"usePrevious"],[50,17,39,17],[50,20,39,21,"value"],[50,25,39,26],[50,29,39,31],[51,4,40,2],[52,4,41,2],[52,8,41,8,"ref"],[52,11,41,11],[52,14,41,14],[52,18,41,14,"useRef"],[52,24,41,20],[52,25,41,20,"useRef"],[52,31,41,20],[52,33,41,21],[52,34,41,22],[53,4,42,2],[53,8,42,2,"useEffect"],[53,14,42,11],[53,15,42,11,"useEffect"],[53,24,42,11],[53,26,42,12],[53,32,42,18],[54,6,43,4,"ref"],[54,9,43,7],[54,10,43,8,"current"],[54,17,43,15],[54,20,43,18,"value"],[54,25,43,23],[55,4,44,2],[55,5,44,3],[55,6,44,4],[56,4,45,2],[56,11,45,9,"ref"],[56,14,45,12],[56,15,45,13,"current"],[56,22,45,20],[57,2,46,0],[57,3,46,1],[59,2,48,0],[60,2,49,7],[60,6,49,13,"useModal"],[60,14,49,21],[60,17,49,24,"_ref"],[60,21,49,24],[60,25,49,43],[61,4,49,43],[61,8,49,27,"props"],[61,13,49,32],[61,16,49,32,"_ref"],[61,20,49,32],[61,21,49,27,"props"],[61,26,49,32],[62,6,49,34,"id"],[62,8,49,36],[62,11,49,36,"_ref"],[62,15,49,36],[62,16,49,34,"id"],[62,18,49,36],[63,4,50,2],[63,8,50,8,"closing"],[63,15,50,15],[63,18,50,18],[63,22,50,18,"useRef"],[63,28,50,24],[63,29,50,24,"useRef"],[63,35,50,24],[63,37,50,25],[63,42,50,30],[63,43,50,31],[64,4,51,2],[64,8,51,8,"previousProps"],[64,21,51,21],[64,24,51,24,"usePrevious"],[64,35,51,35],[64,36,51,36,"props"],[64,41,51,41],[64,42,51,42],[65,4,53,2],[65,8,53,8,"onConfirm"],[65,17,53,17],[65,20,53,20],[65,24,53,20,"useCallback"],[65,30,53,31],[65,31,53,31,"useCallback"],[65,42,53,31],[65,44,54,5,"params"],[65,50,54,11],[65,54,54,16],[66,6,55,6],[66,10,55,10,"params"],[66,16,55,16],[66,17,55,17,"id"],[66,19,55,19],[66,24,55,24,"id"],[66,26,55,26],[66,28,55,28],[67,6,56,6,"closing"],[67,13,56,13],[67,14,56,14,"current"],[67,21,56,21],[67,24,56,24],[67,28,56,28],[68,6,57,6],[68,10,57,12,"date"],[68,14,57,16],[68,17,57,19,"Platform"],[68,29,57,27],[68,30,57,27,"Platform"],[68,38,57,27],[68,39,57,28,"select"],[68,45,57,34],[68,46,57,35],[69,8,58,8,"ios"],[69,11,58,11],[69,13,58,13,"params"],[69,19,58,19],[69,20,58,20,"timestamp"],[69,29,58,29],[70,8,59,8,"android"],[70,15,59,15],[70,17,59,17,"params"],[70,23,59,23],[70,24,59,24,"date"],[71,6,60,6],[71,7,60,7],[71,8,60,8],[72,6,61,6],[72,10,61,10,"props"],[72,15,61,15],[72,16,61,16,"onConfirm"],[72,25,61,25],[72,27,61,27,"props"],[72,32,61,32],[72,33,61,33,"onConfirm"],[72,42,61,42],[72,43,61,43],[72,47,61,47,"Date"],[72,51,61,51],[72,52,61,52,"date"],[72,56,61,56],[72,57,61,57],[72,58,61,58],[73,4,62,4],[73,5,62,5],[73,7,63,4],[73,8,63,5,"id"],[73,10,63,7],[73,12,63,9,"props"],[73,17,63,14],[73,18,64,2],[73,19,64,3],[74,4,66,2],[74,8,66,8,"onCancel"],[74,16,66,16],[74,19,66,19],[74,23,66,19,"useCallback"],[74,29,66,30],[74,30,66,30,"useCallback"],[74,41,66,30],[74,43,67,5,"params"],[74,49,67,11],[74,53,67,16],[75,6,68,6],[75,10,68,10,"params"],[75,16,68,16],[75,18,68,18,"id"],[75,20,68,20],[75,25,68,25,"id"],[75,27,68,27],[75,29,68,29],[76,6,69,6,"closing"],[76,13,69,13],[76,14,69,14,"current"],[76,21,69,21],[76,24,69,24],[76,28,69,28],[77,6,70,6],[77,10,70,10,"props"],[77,15,70,15],[77,16,70,16,"onCancel"],[77,24,70,24],[77,26,70,26,"props"],[77,31,70,31],[77,32,70,32,"onCancel"],[77,40,70,40],[77,41,70,41],[77,42,70,42],[78,4,71,4],[78,5,71,5],[78,7,72,4],[78,8,72,5,"id"],[78,10,72,7],[78,12,72,9,"props"],[78,17,72,14],[78,18,73,2],[78,19,73,3],[80,4,75,2],[81,4,76,2],[81,8,76,2,"useEffect"],[81,14,76,11],[81,15,76,11,"useEffect"],[81,24,76,11],[81,26,76,12],[81,32,76,18],[82,6,77,4],[82,10,77,8,"shouldOpenModal"],[82,25,77,23],[82,26,77,24,"props"],[82,31,77,29],[82,33,77,31,"previousProps"],[82,46,77,44],[82,47,77,45],[82,49,77,47],[83,8,78,6,"closing"],[83,15,78,13],[83,16,78,14,"current"],[83,23,78,21],[83,26,78,24],[83,31,78,29],[84,8,79,6],[84,12,79,12,"params"],[84,18,79,18],[84,21,79,21,"Platform"],[84,33,79,29],[84,34,79,29,"Platform"],[84,42,79,29],[84,43,79,30,"select"],[84,49,79,36],[84,50,79,37],[85,10,80,8,"android"],[85,17,80,15],[85,19,80,17],[85,20,80,18,"props"],[85,25,80,23],[85,26,80,24],[86,10,81,8,"ios"],[86,13,81,11],[86,15,81,13],[86,16,81,14,"props"],[86,21,81,19],[86,23,81,21,"onConfirm"],[86,32,81,30],[86,34,81,32,"onCancel"],[86,42,81,40],[87,8,82,6],[87,9,82,7],[87,10,82,8],[88,8,83,6],[88,12,83,10],[88,13,83,11,"params"],[88,19,83,17],[88,21,83,19],[88,27,83,25,"Error"],[88,32,83,30],[88,33,83,31],[88,55,83,53],[88,56,83,54],[89,8,84,6,"NativeModule"],[89,20,84,18],[89,21,84,19,"openPicker"],[89,31,84,29],[89,32,84,30],[89,35,84,33,"params"],[89,41,84,39],[89,42,84,40],[90,6,85,4],[91,4,86,2],[91,5,86,3],[91,7,86,5],[91,8,86,6,"onCancel"],[91,16,86,14],[91,18,86,16,"onConfirm"],[91,27,86,25],[91,29,86,27,"previousProps"],[91,42,86,40],[91,44,86,42,"props"],[91,49,86,47],[91,50,86,48],[91,51,86,49],[93,4,88,2],[94,4,89,2],[94,8,89,2,"useEffect"],[94,14,89,11],[94,15,89,11,"useEffect"],[94,24,89,11],[94,26,89,12],[94,32,89,18],[95,6,90,4],[95,10,90,8,"shouldCloseModal"],[95,26,90,24],[95,27,90,25,"props"],[95,32,90,30],[95,34,90,32,"previousProps"],[95,47,90,45],[95,49,90,47,"closing"],[95,56,90,54],[95,57,90,55,"current"],[95,64,90,62],[95,65,90,63],[95,67,90,65],[96,8,91,6,"closing"],[96,15,91,13],[96,16,91,14,"current"],[96,23,91,21],[96,26,91,24],[96,30,91,28],[97,8,92,6,"NativeModule"],[97,20,92,18],[97,21,92,19,"closePicker"],[97,32,92,30],[97,33,92,31],[97,34,92,32],[98,6,93,4],[99,4,94,2],[99,5,94,3],[99,7,94,5],[99,8,94,6,"previousProps"],[99,21,94,19],[99,23,94,21,"props"],[99,28,94,26],[99,29,94,27],[99,30,94,28],[100,4,96,2],[100,8,96,2,"useEffect"],[100,14,96,11],[100,15,96,11,"useEffect"],[100,24,96,11],[100,26,96,12],[100,32,96,18],[101,6,97,4],[101,10,97,10,"eventEmitter"],[101,22,97,22],[101,25,97,25],[101,29,97,29,"NativeEventEmitter"],[101,41,97,47],[101,42,97,47,"NativeEventEmitter"],[101,60,97,47],[101,61,97,48,"NativeModule"],[101,73,97,60],[101,74,97,61],[102,6,98,4,"eventEmitter"],[102,18,98,16],[102,19,98,17,"addListener"],[102,30,98,28],[102,31,98,29],[102,42,98,40],[102,44,98,42,"onConfirm"],[102,53,98,51],[102,54,98,52],[103,6,99,4,"eventEmitter"],[103,18,99,16],[103,19,99,17,"addListener"],[103,30,99,28],[103,31,99,29],[103,41,99,39],[103,43,99,41,"onCancel"],[103,51,99,49],[103,52,99,50],[104,6,100,4],[104,13,100,11],[104,19,100,17],[105,8,101,6,"eventEmitter"],[105,20,101,18],[105,21,101,19,"removeAllListeners"],[105,39,101,37],[105,40,101,38],[105,51,101,49],[105,52,101,50],[106,8,102,6,"eventEmitter"],[106,20,102,18],[106,21,102,19,"removeAllListeners"],[106,39,102,37],[106,40,102,38],[106,50,102,48],[106,51,102,49],[107,6,103,4],[107,7,103,5],[108,4,104,2],[108,5,104,3],[108,7,104,5],[108,8,104,6,"onCancel"],[108,16,104,14],[108,18,104,16,"onConfirm"],[108,27,104,25],[108,28,104,26],[108,29,104,27],[109,2,105,0],[109,3,105,1],[110,0,105,1],[110,3]],"functionMap":{"names":["<global>","shouldOpenModal","shouldCloseModal","usePrevious","useEffect$argument_0","useModal","onConfirm","onCancel","<anonymous>"],"mappings":"AAA;wBCU;CDM;yBEO;CFO;oBGQ;YCG;GDE;CHE;wBKG;ICK;KDQ;IEK;KFI;YDK;GCU;YDG;GCK;YDE;WII;KJG;GCC;CLC"},"hasCjsExports":false},"type":"js/module"}]}