{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":54,"index":54}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/NativeEventEmitter","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"eTF52IbKshB2LvkGjXImGpuTZc0=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"./modules","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":115},"end":{"line":3,"column":43,"index":158}}],"key":"ORG3mfwHjN5F9oWzg+UYztAGWTE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useModal\", {\n    enumerable: true,\n    get: function () {\n      return useModal;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsNativeEventEmitter = require(_dependencyMap[1], \"react-native-web/dist/exports/NativeEventEmitter\");\n  var NativeEventEmitter = _interopDefault(_reactNativeWebDistExportsNativeEventEmitter);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[2], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _modules = require(_dependencyMap[3], \"./modules\");\n  const NativeModule = (0, _modules.getNativeModule)();\n\n  /**\n   * @param {ModalProps} props\n   * @param {ModalProps | undefined} prevProps\n   */\n  const shouldOpenModal = (props, prevProps) => {\n    if (!props.modal) return false;\n    if (!props.open) return false;\n    const currentlyOpen = prevProps?.open;\n    if (currentlyOpen) return false;\n    return true;\n  };\n\n  /**\n   * @param {ModalProps} props\n   * @param {ModalProps | undefined} prevProps\n   * @param {boolean} isClosing\n   */\n  const shouldCloseModal = (props, prevProps, isClosing) => {\n    if (!props.modal) return false;\n    if (props.open) return false;\n    const currentlyOpen = prevProps?.open;\n    if (!currentlyOpen) return false;\n    if (isClosing) return false;\n    return true;\n  };\n\n  /**\n   *\n   * @template T\n   * @param {T} value\n   * @returns {T | undefined}\n   */\n  const usePrevious = value => {\n    /** @type {React.MutableRefObject<T | undefined>} */\n    const ref = (0, _react.useRef)();\n    (0, _react.useEffect)(() => {\n      ref.current = value;\n    });\n    return ref.current;\n  };\n\n  /** @param {{props: ModalProps, id: string | undefined }} props */\n  const useModal = ({\n    props,\n    id\n  }) => {\n    const closing = (0, _react.useRef)(false);\n    const previousProps = usePrevious(props);\n    const onConfirm = (0, _react.useCallback)(params => {\n      if (params.id !== id) return;\n      closing.current = true;\n      const date = Platform.default.select({\n        ios: params.timestamp,\n        android: params.date\n      });\n      if (props.onConfirm) props.onConfirm(new Date(date));\n    }, [id, props]);\n    const onCancel = (0, _react.useCallback)(params => {\n      if (params?.id !== id) return;\n      closing.current = true;\n      if (props.onCancel) props.onCancel();\n    }, [id, props]);\n\n    // open\n    (0, _react.useEffect)(() => {\n      if (shouldOpenModal(props, previousProps)) {\n        closing.current = false;\n        const params = Platform.default.select({\n          android: [props],\n          ios: [props, onConfirm, onCancel]\n        });\n        if (!params) throw Error('Unsupported platform');\n        NativeModule.openPicker(...params);\n      }\n    }, [onCancel, onConfirm, previousProps, props]);\n\n    // close\n    (0, _react.useEffect)(() => {\n      if (shouldCloseModal(props, previousProps, closing.current)) {\n        closing.current = true;\n        NativeModule.closePicker();\n      }\n    }, [previousProps, props]);\n    (0, _react.useEffect)(() => {\n      const eventEmitter = new NativeEventEmitter.default(NativeModule);\n      eventEmitter.addListener('onConfirm', onConfirm);\n      eventEmitter.addListener('onCancel', onCancel);\n      return () => {\n        eventEmitter.removeAllListeners('onConfirm');\n        eventEmitter.removeAllListeners('onCancel');\n      };\n    }, [onCancel, onConfirm]);\n  };\n});","lineCount":119,"map":[[12,2,49,0,"Object"],[12,8,49,0],[12,9,49,0,"defineProperty"],[12,23,49,0],[12,24,49,0,"exports"],[12,31,49,0],[13,4,49,0,"enumerable"],[13,14,49,0],[14,4,49,0,"get"],[14,7,49,0],[14,18,49,0,"get"],[14,19,49,0],[15,6,49,0],[15,13,49,0,"useModal"],[15,21,49,0],[16,4,49,0],[17,2,49,0],[18,2,1,0],[18,6,1,0,"_react"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,1,54],[19,6,1,54,"_reactNativeWebDistExportsNativeEventEmitter"],[19,50,1,54],[19,53,1,54,"require"],[19,60,1,54],[19,61,1,54,"_dependencyMap"],[19,75,1,54],[20,2,1,54],[20,6,1,54,"NativeEventEmitter"],[20,24,1,54],[20,27,1,54,"_interopDefault"],[20,42,1,54],[20,43,1,54,"_reactNativeWebDistExportsNativeEventEmitter"],[20,87,1,54],[21,2,1,54],[21,6,1,54,"_reactNativeWebDistExportsPlatform"],[21,40,1,54],[21,43,1,54,"require"],[21,50,1,54],[21,51,1,54,"_dependencyMap"],[21,65,1,54],[22,2,1,54],[22,6,1,54,"Platform"],[22,14,1,54],[22,17,1,54,"_interopDefault"],[22,32,1,54],[22,33,1,54,"_reactNativeWebDistExportsPlatform"],[22,67,1,54],[23,2,3,0],[23,6,3,0,"_modules"],[23,14,3,0],[23,17,3,0,"require"],[23,24,3,0],[23,25,3,0,"_dependencyMap"],[23,39,3,0],[24,2,5,0],[24,8,5,6,"NativeModule"],[24,20,5,18],[24,23,5,21],[24,27,5,21,"getNativeModule"],[24,35,5,36],[24,36,5,36,"getNativeModule"],[24,51,5,36],[24,53,5,37],[24,54,5,38],[26,2,7,0],[27,0,8,0],[28,0,9,0],[29,0,10,0],[30,2,11,0],[30,8,11,6,"shouldOpenModal"],[30,23,11,21],[30,26,11,24,"shouldOpenModal"],[30,27,11,25,"props"],[30,32,11,30],[30,34,11,32,"prevProps"],[30,43,11,41],[30,48,11,46],[31,4,12,2],[31,8,12,6],[31,9,12,7,"props"],[31,14,12,12],[31,15,12,13,"modal"],[31,20,12,18],[31,22,12,20],[31,29,12,27],[31,34,12,32],[32,4,13,2],[32,8,13,6],[32,9,13,7,"props"],[32,14,13,12],[32,15,13,13,"open"],[32,19,13,17],[32,21,13,19],[32,28,13,26],[32,33,13,31],[33,4,14,2],[33,10,14,8,"currentlyOpen"],[33,23,14,21],[33,26,14,24,"prevProps"],[33,35,14,33],[33,37,14,35,"open"],[33,41,14,39],[34,4,15,2],[34,8,15,6,"currentlyOpen"],[34,21,15,19],[34,23,15,21],[34,30,15,28],[34,35,15,33],[35,4,16,2],[35,11,16,9],[35,15,16,13],[36,2,17,0],[36,3,17,1],[38,2,19,0],[39,0,20,0],[40,0,21,0],[41,0,22,0],[42,0,23,0],[43,2,24,0],[43,8,24,6,"shouldCloseModal"],[43,24,24,22],[43,27,24,25,"shouldCloseModal"],[43,28,24,26,"props"],[43,33,24,31],[43,35,24,33,"prevProps"],[43,44,24,42],[43,46,24,44,"isClosing"],[43,55,24,53],[43,60,24,58],[44,4,25,2],[44,8,25,6],[44,9,25,7,"props"],[44,14,25,12],[44,15,25,13,"modal"],[44,20,25,18],[44,22,25,20],[44,29,25,27],[44,34,25,32],[45,4,26,2],[45,8,26,6,"props"],[45,13,26,11],[45,14,26,12,"open"],[45,18,26,16],[45,20,26,18],[45,27,26,25],[45,32,26,30],[46,4,27,2],[46,10,27,8,"currentlyOpen"],[46,23,27,21],[46,26,27,24,"prevProps"],[46,35,27,33],[46,37,27,35,"open"],[46,41,27,39],[47,4,28,2],[47,8,28,6],[47,9,28,7,"currentlyOpen"],[47,22,28,20],[47,24,28,22],[47,31,28,29],[47,36,28,34],[48,4,29,2],[48,8,29,6,"isClosing"],[48,17,29,15],[48,19,29,17],[48,26,29,24],[48,31,29,29],[49,4,30,2],[49,11,30,9],[49,15,30,13],[50,2,31,0],[50,3,31,1],[52,2,33,0],[53,0,34,0],[54,0,35,0],[55,0,36,0],[56,0,37,0],[57,0,38,0],[58,2,39,0],[58,8,39,6,"usePrevious"],[58,19,39,17],[58,22,39,21,"value"],[58,27,39,26],[58,31,39,31],[59,4,40,2],[60,4,41,2],[60,10,41,8,"ref"],[60,13,41,11],[60,16,41,14],[60,20,41,14,"useRef"],[60,26,41,20],[60,27,41,20,"useRef"],[60,33,41,20],[60,35,41,21],[60,36,41,22],[61,4,42,2],[61,8,42,2,"useEffect"],[61,14,42,11],[61,15,42,11,"useEffect"],[61,24,42,11],[61,26,42,12],[61,32,42,18],[62,6,43,4,"ref"],[62,9,43,7],[62,10,43,8,"current"],[62,17,43,15],[62,20,43,18,"value"],[62,25,43,23],[63,4,44,2],[63,5,44,3],[63,6,44,4],[64,4,45,2],[64,11,45,9,"ref"],[64,14,45,12],[64,15,45,13,"current"],[64,22,45,20],[65,2,46,0],[65,3,46,1],[67,2,48,0],[68,2,49,7],[68,8,49,13,"useModal"],[68,16,49,21],[68,19,49,24,"useModal"],[68,20,49,25],[69,4,49,27,"props"],[69,9,49,32],[70,4,49,34,"id"],[71,2,49,37],[71,3,49,38],[71,8,49,43],[72,4,50,2],[72,10,50,8,"closing"],[72,17,50,15],[72,20,50,18],[72,24,50,18,"useRef"],[72,30,50,24],[72,31,50,24,"useRef"],[72,37,50,24],[72,39,50,25],[72,44,50,30],[72,45,50,31],[73,4,51,2],[73,10,51,8,"previousProps"],[73,23,51,21],[73,26,51,24,"usePrevious"],[73,37,51,35],[73,38,51,36,"props"],[73,43,51,41],[73,44,51,42],[74,4,53,2],[74,10,53,8,"onConfirm"],[74,19,53,17],[74,22,53,20],[74,26,53,20,"useCallback"],[74,32,53,31],[74,33,53,31,"useCallback"],[74,44,53,31],[74,46,54,5,"params"],[74,52,54,11],[74,56,54,16],[75,6,55,6],[75,10,55,10,"params"],[75,16,55,16],[75,17,55,17,"id"],[75,19,55,19],[75,24,55,24,"id"],[75,26,55,26],[75,28,55,28],[76,6,56,6,"closing"],[76,13,56,13],[76,14,56,14,"current"],[76,21,56,21],[76,24,56,24],[76,28,56,28],[77,6,57,6],[77,12,57,12,"date"],[77,16,57,16],[77,19,57,19,"Platform"],[77,27,57,27],[77,28,57,27,"default"],[77,35,57,27],[77,36,57,28,"select"],[77,42,57,34],[77,43,57,35],[78,8,58,8,"ios"],[78,11,58,11],[78,13,58,13,"params"],[78,19,58,19],[78,20,58,20,"timestamp"],[78,29,58,29],[79,8,59,8,"android"],[79,15,59,15],[79,17,59,17,"params"],[79,23,59,23],[79,24,59,24,"date"],[80,6,60,6],[80,7,60,7],[80,8,60,8],[81,6,61,6],[81,10,61,10,"props"],[81,15,61,15],[81,16,61,16,"onConfirm"],[81,25,61,25],[81,27,61,27,"props"],[81,32,61,32],[81,33,61,33,"onConfirm"],[81,42,61,42],[81,43,61,43],[81,47,61,47,"Date"],[81,51,61,51],[81,52,61,52,"date"],[81,56,61,56],[81,57,61,57],[81,58,61,58],[82,4,62,4],[82,5,62,5],[82,7,63,4],[82,8,63,5,"id"],[82,10,63,7],[82,12,63,9,"props"],[82,17,63,14],[82,18,64,2],[82,19,64,3],[83,4,66,2],[83,10,66,8,"onCancel"],[83,18,66,16],[83,21,66,19],[83,25,66,19,"useCallback"],[83,31,66,30],[83,32,66,30,"useCallback"],[83,43,66,30],[83,45,67,5,"params"],[83,51,67,11],[83,55,67,16],[84,6,68,6],[84,10,68,10,"params"],[84,16,68,16],[84,18,68,18,"id"],[84,20,68,20],[84,25,68,25,"id"],[84,27,68,27],[84,29,68,29],[85,6,69,6,"closing"],[85,13,69,13],[85,14,69,14,"current"],[85,21,69,21],[85,24,69,24],[85,28,69,28],[86,6,70,6],[86,10,70,10,"props"],[86,15,70,15],[86,16,70,16,"onCancel"],[86,24,70,24],[86,26,70,26,"props"],[86,31,70,31],[86,32,70,32,"onCancel"],[86,40,70,40],[86,41,70,41],[86,42,70,42],[87,4,71,4],[87,5,71,5],[87,7,72,4],[87,8,72,5,"id"],[87,10,72,7],[87,12,72,9,"props"],[87,17,72,14],[87,18,73,2],[87,19,73,3],[89,4,75,2],[90,4,76,2],[90,8,76,2,"useEffect"],[90,14,76,11],[90,15,76,11,"useEffect"],[90,24,76,11],[90,26,76,12],[90,32,76,18],[91,6,77,4],[91,10,77,8,"shouldOpenModal"],[91,25,77,23],[91,26,77,24,"props"],[91,31,77,29],[91,33,77,31,"previousProps"],[91,46,77,44],[91,47,77,45],[91,49,77,47],[92,8,78,6,"closing"],[92,15,78,13],[92,16,78,14,"current"],[92,23,78,21],[92,26,78,24],[92,31,78,29],[93,8,79,6],[93,14,79,12,"params"],[93,20,79,18],[93,23,79,21,"Platform"],[93,31,79,29],[93,32,79,29,"default"],[93,39,79,29],[93,40,79,30,"select"],[93,46,79,36],[93,47,79,37],[94,10,80,8,"android"],[94,17,80,15],[94,19,80,17],[94,20,80,18,"props"],[94,25,80,23],[94,26,80,24],[95,10,81,8,"ios"],[95,13,81,11],[95,15,81,13],[95,16,81,14,"props"],[95,21,81,19],[95,23,81,21,"onConfirm"],[95,32,81,30],[95,34,81,32,"onCancel"],[95,42,81,40],[96,8,82,6],[96,9,82,7],[96,10,82,8],[97,8,83,6],[97,12,83,10],[97,13,83,11,"params"],[97,19,83,17],[97,21,83,19],[97,27,83,25,"Error"],[97,32,83,30],[97,33,83,31],[97,55,83,53],[97,56,83,54],[98,8,84,6,"NativeModule"],[98,20,84,18],[98,21,84,19,"openPicker"],[98,31,84,29],[98,32,84,30],[98,35,84,33,"params"],[98,41,84,39],[98,42,84,40],[99,6,85,4],[100,4,86,2],[100,5,86,3],[100,7,86,5],[100,8,86,6,"onCancel"],[100,16,86,14],[100,18,86,16,"onConfirm"],[100,27,86,25],[100,29,86,27,"previousProps"],[100,42,86,40],[100,44,86,42,"props"],[100,49,86,47],[100,50,86,48],[100,51,86,49],[102,4,88,2],[103,4,89,2],[103,8,89,2,"useEffect"],[103,14,89,11],[103,15,89,11,"useEffect"],[103,24,89,11],[103,26,89,12],[103,32,89,18],[104,6,90,4],[104,10,90,8,"shouldCloseModal"],[104,26,90,24],[104,27,90,25,"props"],[104,32,90,30],[104,34,90,32,"previousProps"],[104,47,90,45],[104,49,90,47,"closing"],[104,56,90,54],[104,57,90,55,"current"],[104,64,90,62],[104,65,90,63],[104,67,90,65],[105,8,91,6,"closing"],[105,15,91,13],[105,16,91,14,"current"],[105,23,91,21],[105,26,91,24],[105,30,91,28],[106,8,92,6,"NativeModule"],[106,20,92,18],[106,21,92,19,"closePicker"],[106,32,92,30],[106,33,92,31],[106,34,92,32],[107,6,93,4],[108,4,94,2],[108,5,94,3],[108,7,94,5],[108,8,94,6,"previousProps"],[108,21,94,19],[108,23,94,21,"props"],[108,28,94,26],[108,29,94,27],[108,30,94,28],[109,4,96,2],[109,8,96,2,"useEffect"],[109,14,96,11],[109,15,96,11,"useEffect"],[109,24,96,11],[109,26,96,12],[109,32,96,18],[110,6,97,4],[110,12,97,10,"eventEmitter"],[110,24,97,22],[110,27,97,25],[110,31,97,29,"NativeEventEmitter"],[110,49,97,47],[110,50,97,47,"default"],[110,57,97,47],[110,58,97,48,"NativeModule"],[110,70,97,60],[110,71,97,61],[111,6,98,4,"eventEmitter"],[111,18,98,16],[111,19,98,17,"addListener"],[111,30,98,28],[111,31,98,29],[111,42,98,40],[111,44,98,42,"onConfirm"],[111,53,98,51],[111,54,98,52],[112,6,99,4,"eventEmitter"],[112,18,99,16],[112,19,99,17,"addListener"],[112,30,99,28],[112,31,99,29],[112,41,99,39],[112,43,99,41,"onCancel"],[112,51,99,49],[112,52,99,50],[113,6,100,4],[113,13,100,11],[113,19,100,17],[114,8,101,6,"eventEmitter"],[114,20,101,18],[114,21,101,19,"removeAllListeners"],[114,39,101,37],[114,40,101,38],[114,51,101,49],[114,52,101,50],[115,8,102,6,"eventEmitter"],[115,20,102,18],[115,21,102,19,"removeAllListeners"],[115,39,102,37],[115,40,102,38],[115,50,102,48],[115,51,102,49],[116,6,103,4],[116,7,103,5],[117,4,104,2],[117,5,104,3],[117,7,104,5],[117,8,104,6,"onCancel"],[117,16,104,14],[117,18,104,16,"onConfirm"],[117,27,104,25],[117,28,104,26],[117,29,104,27],[118,2,105,0],[118,3,105,1],[119,0,105,1],[119,3]],"functionMap":{"names":["<global>","shouldOpenModal","shouldCloseModal","usePrevious","useEffect$argument_0","useModal","onConfirm","onCancel","<anonymous>"],"mappings":"AAA;wBCU;CDM;yBEO;CFO;oBGQ;YCG;GDE;CHE;wBKG;ICK;KDQ;IEK;KFI;YDK;GCU;YDG;GCK;YDE;WII;KJG;GCC;CLC"},"hasCjsExports":false},"type":"js/module"}]}