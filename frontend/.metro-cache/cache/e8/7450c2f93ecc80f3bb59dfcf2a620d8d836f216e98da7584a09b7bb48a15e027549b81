{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"usePWA\", {\n    enumerable: true,\n    get: function () {\n      return usePWA;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  const usePWA = () => {\n    const [isInstalled, setIsInstalled] = (0, _react.useState)(false);\n    const [isOnline, setIsOnline] = (0, _react.useState)(true);\n    const [updateAvailable, setUpdateAvailable] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      // Vérifier si l'app est installée (mode standalone)\n      const checkInstallation = () => {\n        const isStandalone = window.matchMedia('(display-mode: standalone)').matches;\n        const isIOSStandalone = window.navigator.standalone === true;\n        setIsInstalled(isStandalone || isIOSStandalone);\n      };\n      checkInstallation();\n\n      // Surveiller le statut réseau\n      const handleOnline = () => setIsOnline(true);\n      const handleOffline = () => setIsOnline(false);\n      window.addEventListener('online', handleOnline);\n      window.addEventListener('offline', handleOffline);\n\n      // Enregistrer le Service Worker\n      if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.register('/service-worker.js').then(registration => {\n          console.log('✅ Service Worker enregistré:', registration.scope);\n\n          // Vérifier les mises à jour\n          registration.addEventListener('updatefound', () => {\n            const newWorker = registration.installing;\n            if (newWorker) {\n              newWorker.addEventListener('statechange', () => {\n                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\n                  setUpdateAvailable(true);\n                  console.log('🔄 Mise à jour disponible');\n                }\n              });\n            }\n          });\n\n          // Vérifier les mises à jour toutes les heures\n          setInterval(() => {\n            registration.update();\n          }, 60 * 60 * 1000);\n        }).catch(error => {\n          console.error('❌ Erreur Service Worker:', error);\n        });\n      }\n      return () => {\n        window.removeEventListener('online', handleOnline);\n        window.removeEventListener('offline', handleOffline);\n      };\n    }, []);\n    const updateApp = () => {\n      if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.getRegistration().then(registration => {\n          if (registration?.waiting) {\n            registration.waiting.postMessage({\n              type: 'SKIP_WAITING'\n            });\n            window.location.reload();\n          }\n        });\n      }\n    };\n    return {\n      isInstalled,\n      isOnline,\n      updateAvailable,\n      updateApp\n    };\n  };\n});","lineCount":83,"map":[[7,2,3,0,"Object"],[7,8,3,0],[7,9,3,0,"defineProperty"],[7,23,3,0],[7,24,3,0,"exports"],[7,31,3,0],[8,4,3,0,"enumerable"],[8,14,3,0],[9,4,3,0,"get"],[9,7,3,0],[9,18,3,0,"get"],[9,19,3,0],[10,6,3,0],[10,13,3,0,"usePWA"],[10,19,3,0],[11,4,3,0],[12,2,3,0],[13,2,1,0],[13,6,1,0,"_react"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,3,7],[14,8,3,13,"usePWA"],[14,14,3,19],[14,17,3,22,"usePWA"],[14,18,3,22],[14,23,3,28],[15,4,4,2],[15,10,4,8],[15,11,4,9,"isInstalled"],[15,22,4,20],[15,24,4,22,"setIsInstalled"],[15,38,4,36],[15,39,4,37],[15,42,4,40],[15,46,4,40,"useState"],[15,52,4,48],[15,53,4,48,"useState"],[15,61,4,48],[15,63,4,49],[15,68,4,54],[15,69,4,55],[16,4,5,2],[16,10,5,8],[16,11,5,9,"isOnline"],[16,19,5,17],[16,21,5,19,"setIsOnline"],[16,32,5,30],[16,33,5,31],[16,36,5,34],[16,40,5,34,"useState"],[16,46,5,42],[16,47,5,42,"useState"],[16,55,5,42],[16,57,5,43],[16,61,5,47],[16,62,5,48],[17,4,6,2],[17,10,6,8],[17,11,6,9,"updateAvailable"],[17,26,6,24],[17,28,6,26,"setUpdateAvailable"],[17,46,6,44],[17,47,6,45],[17,50,6,48],[17,54,6,48,"useState"],[17,60,6,56],[17,61,6,56,"useState"],[17,69,6,56],[17,71,6,57],[17,76,6,62],[17,77,6,63],[18,4,8,2],[18,8,8,2,"useEffect"],[18,14,8,11],[18,15,8,11,"useEffect"],[18,24,8,11],[18,26,8,12],[18,32,8,18],[19,6,9,4],[20,6,10,4],[20,12,10,10,"checkInstallation"],[20,29,10,27],[20,32,10,30,"checkInstallation"],[20,33,10,30],[20,38,10,36],[21,8,11,6],[21,14,11,12,"isStandalone"],[21,26,11,24],[21,29,11,27,"window"],[21,35,11,33],[21,36,11,34,"matchMedia"],[21,46,11,44],[21,47,11,45],[21,75,11,73],[21,76,11,74],[21,77,11,75,"matches"],[21,84,11,82],[22,8,12,6],[22,14,12,12,"isIOSStandalone"],[22,29,12,27],[22,32,12,31,"window"],[22,38,12,37],[22,39,12,38,"navigator"],[22,48,12,47],[22,49,12,56,"standalone"],[22,59,12,66],[22,64,12,71],[22,68,12,75],[23,8,13,6,"setIsInstalled"],[23,22,13,20],[23,23,13,21,"isStandalone"],[23,35,13,33],[23,39,13,37,"isIOSStandalone"],[23,54,13,52],[23,55,13,53],[24,6,14,4],[24,7,14,5],[25,6,16,4,"checkInstallation"],[25,23,16,21],[25,24,16,22],[25,25,16,23],[27,6,18,4],[28,6,19,4],[28,12,19,10,"handleOnline"],[28,24,19,22],[28,27,19,25,"handleOnline"],[28,28,19,25],[28,33,19,31,"setIsOnline"],[28,44,19,42],[28,45,19,43],[28,49,19,47],[28,50,19,48],[29,6,20,4],[29,12,20,10,"handleOffline"],[29,25,20,23],[29,28,20,26,"handleOffline"],[29,29,20,26],[29,34,20,32,"setIsOnline"],[29,45,20,43],[29,46,20,44],[29,51,20,49],[29,52,20,50],[30,6,22,4,"window"],[30,12,22,10],[30,13,22,11,"addEventListener"],[30,29,22,27],[30,30,22,28],[30,38,22,36],[30,40,22,38,"handleOnline"],[30,52,22,50],[30,53,22,51],[31,6,23,4,"window"],[31,12,23,10],[31,13,23,11,"addEventListener"],[31,29,23,27],[31,30,23,28],[31,39,23,37],[31,41,23,39,"handleOffline"],[31,54,23,52],[31,55,23,53],[33,6,25,4],[34,6,26,4],[34,10,26,8],[34,25,26,23],[34,29,26,27,"navigator"],[34,38,26,36],[34,40,26,38],[35,8,27,6,"navigator"],[35,17,27,15],[35,18,27,16,"serviceWorker"],[35,31,27,29],[35,32,28,9,"register"],[35,40,28,17],[35,41,28,18],[35,61,28,38],[35,62,28,39],[35,63,29,9,"then"],[35,67,29,13],[35,68,29,15,"registration"],[35,80,29,27],[35,84,29,32],[36,10,30,10,"console"],[36,17,30,17],[36,18,30,18,"log"],[36,21,30,21],[36,22,30,22],[36,52,30,52],[36,54,30,54,"registration"],[36,66,30,66],[36,67,30,67,"scope"],[36,72,30,72],[36,73,30,73],[38,10,32,10],[39,10,33,10,"registration"],[39,22,33,22],[39,23,33,23,"addEventListener"],[39,39,33,39],[39,40,33,40],[39,53,33,53],[39,55,33,55],[39,61,33,61],[40,12,34,12],[40,18,34,18,"newWorker"],[40,27,34,27],[40,30,34,30,"registration"],[40,42,34,42],[40,43,34,43,"installing"],[40,53,34,53],[41,12,35,12],[41,16,35,16,"newWorker"],[41,25,35,25],[41,27,35,27],[42,14,36,14,"newWorker"],[42,23,36,23],[42,24,36,24,"addEventListener"],[42,40,36,40],[42,41,36,41],[42,54,36,54],[42,56,36,56],[42,62,36,62],[43,16,37,16],[43,20,37,20,"newWorker"],[43,29,37,29],[43,30,37,30,"state"],[43,35,37,35],[43,40,37,40],[43,51,37,51],[43,55,37,55,"navigator"],[43,64,37,64],[43,65,37,65,"serviceWorker"],[43,78,37,78],[43,79,37,79,"controller"],[43,89,37,89],[43,91,37,91],[44,18,38,18,"setUpdateAvailable"],[44,36,38,36],[44,37,38,37],[44,41,38,41],[44,42,38,42],[45,18,39,18,"console"],[45,25,39,25],[45,26,39,26,"log"],[45,29,39,29],[45,30,39,30],[45,57,39,57],[45,58,39,58],[46,16,40,16],[47,14,41,14],[47,15,41,15],[47,16,41,16],[48,12,42,12],[49,10,43,10],[49,11,43,11],[49,12,43,12],[51,10,45,10],[52,10,46,10,"setInterval"],[52,21,46,21],[52,22,46,22],[52,28,46,28],[53,12,47,12,"registration"],[53,24,47,24],[53,25,47,25,"update"],[53,31,47,31],[53,32,47,32],[53,33,47,33],[54,10,48,10],[54,11,48,11],[54,13,48,13],[54,15,48,15],[54,18,48,18],[54,20,48,20],[54,23,48,23],[54,27,48,27],[54,28,48,28],[55,8,49,8],[55,9,49,9],[55,10,49,10],[55,11,50,9,"catch"],[55,16,50,14],[55,17,50,16,"error"],[55,22,50,21],[55,26,50,26],[56,10,51,10,"console"],[56,17,51,17],[56,18,51,18,"error"],[56,23,51,23],[56,24,51,24],[56,50,51,50],[56,52,51,52,"error"],[56,57,51,57],[56,58,51,58],[57,8,52,8],[57,9,52,9],[57,10,52,10],[58,6,53,4],[59,6,55,4],[59,13,55,11],[59,19,55,17],[60,8,56,6,"window"],[60,14,56,12],[60,15,56,13,"removeEventListener"],[60,34,56,32],[60,35,56,33],[60,43,56,41],[60,45,56,43,"handleOnline"],[60,57,56,55],[60,58,56,56],[61,8,57,6,"window"],[61,14,57,12],[61,15,57,13,"removeEventListener"],[61,34,57,32],[61,35,57,33],[61,44,57,42],[61,46,57,44,"handleOffline"],[61,59,57,57],[61,60,57,58],[62,6,58,4],[62,7,58,5],[63,4,59,2],[63,5,59,3],[63,7,59,5],[63,9,59,7],[63,10,59,8],[64,4,61,2],[64,10,61,8,"updateApp"],[64,19,61,17],[64,22,61,20,"updateApp"],[64,23,61,20],[64,28,61,26],[65,6,62,4],[65,10,62,8],[65,25,62,23],[65,29,62,27,"navigator"],[65,38,62,36],[65,40,62,38],[66,8,63,6,"navigator"],[66,17,63,15],[66,18,63,16,"serviceWorker"],[66,31,63,29],[66,32,63,30,"getRegistration"],[66,47,63,45],[66,48,63,46],[66,49,63,47],[66,50,63,48,"then"],[66,54,63,52],[66,55,63,54,"registration"],[66,67,63,66],[66,71,63,71],[67,10,64,8],[67,14,64,12,"registration"],[67,26,64,24],[67,28,64,26,"waiting"],[67,35,64,33],[67,37,64,35],[68,12,65,10,"registration"],[68,24,65,22],[68,25,65,23,"waiting"],[68,32,65,30],[68,33,65,31,"postMessage"],[68,44,65,42],[68,45,65,43],[69,14,65,45,"type"],[69,18,65,49],[69,20,65,51],[70,12,65,66],[70,13,65,67],[70,14,65,68],[71,12,66,10,"window"],[71,18,66,16],[71,19,66,17,"location"],[71,27,66,25],[71,28,66,26,"reload"],[71,34,66,32],[71,35,66,33],[71,36,66,34],[72,10,67,8],[73,8,68,6],[73,9,68,7],[73,10,68,8],[74,6,69,4],[75,4,70,2],[75,5,70,3],[76,4,72,2],[76,11,72,9],[77,6,73,4,"isInstalled"],[77,17,73,15],[78,6,74,4,"isOnline"],[78,14,74,12],[79,6,75,4,"updateAvailable"],[79,21,75,19],[80,6,76,4,"updateApp"],[81,4,77,2],[81,5,77,3],[82,2,78,0],[82,3,78,1],[83,0,78,2],[83,3]],"functionMap":{"names":["<global>","usePWA","useEffect$argument_0","checkInstallation","handleOnline","handleOffline","navigator.serviceWorker.register.then$argument_0","registration.addEventListener$argument_1","newWorker.addEventListener$argument_1","setInterval$argument_0","navigator.serviceWorker.register.then._catch$argument_0","<anonymous>","updateApp","navigator.serviceWorker.getRegistration.then$argument_0"],"mappings":"AAA;sBCE;YCK;8BCE;KDI;yBEK,uBF;0BGC,wBH;cIS;uDCI;wDCG;eDK;WDE;sBGG;WHE;SJC;eQC;SRE;WSG;KTG;GDC;oBWE;qDCE;ODK;GXE;CDQ"},"hasCjsExports":false},"type":"js/module"}]}