{"dependencies":[{"name":"../../utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":13,"index":141},"end":{"line":8,"column":35,"index":163}}],"key":"/gxgMVIBQIOS9WgzAWnJsYriGvM=","exportNames":["*"],"imports":1}},{"name":"../../../mountRegistry","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":21,"index":187},"end":{"line":10,"column":54,"index":220}}],"key":"EgFtYEHVZph/u3n2IoKpGlRcNgQ=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":12,"column":13,"index":236},"end":{"line":12,"column":29,"index":252}}],"key":"XN65eZP/QkNMzaBAXbG/zPyidpY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useMountReactions = useMountReactions;\n  var _utils = require(_dependencyMap[0], \"../../utils\");\n  var _mountRegistry = require(_dependencyMap[1], \"../../../mountRegistry\");\n  var _react = require(_dependencyMap[2], \"react\");\n  function shouldUpdateDetector(relation, gesture) {\n    if (relation === undefined) {\n      return false;\n    }\n    for (const tag of (0, _utils.transformIntoHandlerTags)(relation)) {\n      if (tag === gesture.handlerTag) {\n        return true;\n      }\n    }\n    return false;\n  }\n  function useMountReactions(updateDetector, state) {\n    (0, _react.useEffect)(() => {\n      return _mountRegistry.MountRegistry.addMountListener(gesture => {\n        // At this point the ref in the gesture config should be updated, so we can check if one of the gestures\n        // set in a relation with the gesture got mounted. If so, we need to update the detector to propagate\n        // the changes to the native side.\n        for (const attachedGesture of state.attachedGestures) {\n          const blocksHandlers = attachedGesture.config.blocksHandlers;\n          const requireToFail = attachedGesture.config.requireToFail;\n          const simultaneousWith = attachedGesture.config.simultaneousWith;\n          if (shouldUpdateDetector(blocksHandlers, gesture) || shouldUpdateDetector(requireToFail, gesture) || shouldUpdateDetector(simultaneousWith, gesture)) {\n            updateDetector(); // We can safely return here, if any other gestures should be updated, they will be by the above call\n\n            return;\n          }\n        }\n      });\n    }, [updateDetector, state]);\n  }\n});","lineCount":41,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"useMountReactions"],[7,27,6,25],[7,30,6,28,"useMountReactions"],[7,47,6,45],[8,2,8,0],[8,6,8,4,"_utils"],[8,12,8,10],[8,15,8,13,"require"],[8,22,8,20],[8,23,8,20,"_dependencyMap"],[8,37,8,20],[8,55,8,34],[8,56,8,35],[9,2,10,0],[9,6,10,4,"_mountRegistry"],[9,20,10,18],[9,23,10,21,"require"],[9,30,10,28],[9,31,10,28,"_dependencyMap"],[9,45,10,28],[9,74,10,53],[9,75,10,54],[10,2,12,0],[10,6,12,4,"_react"],[10,12,12,10],[10,15,12,13,"require"],[10,22,12,20],[10,23,12,20,"_dependencyMap"],[10,37,12,20],[10,49,12,28],[10,50,12,29],[11,2,14,0],[11,11,14,9,"shouldUpdateDetector"],[11,31,14,29,"shouldUpdateDetector"],[11,32,14,30,"relation"],[11,40,14,38],[11,42,14,40,"gesture"],[11,49,14,47],[11,51,14,49],[12,4,15,2],[12,8,15,6,"relation"],[12,16,15,14],[12,21,15,19,"undefined"],[12,30,15,28],[12,32,15,30],[13,6,16,4],[13,13,16,11],[13,18,16,16],[14,4,17,2],[15,4,19,2],[15,9,19,7],[15,15,19,13,"tag"],[15,18,19,16],[15,22,19,20],[15,23,19,21],[15,24,19,22],[15,26,19,24,"_utils"],[15,32,19,30],[15,33,19,31,"transformIntoHandlerTags"],[15,57,19,55],[15,59,19,57,"relation"],[15,67,19,65],[15,68,19,66],[15,70,19,68],[16,6,20,4],[16,10,20,8,"tag"],[16,13,20,11],[16,18,20,16,"gesture"],[16,25,20,23],[16,26,20,24,"handlerTag"],[16,36,20,34],[16,38,20,36],[17,8,21,6],[17,15,21,13],[17,19,21,17],[18,6,22,4],[19,4,23,2],[20,4,25,2],[20,11,25,9],[20,16,25,14],[21,2,26,0],[22,2,28,0],[22,11,28,9,"useMountReactions"],[22,28,28,26,"useMountReactions"],[22,29,28,27,"updateDetector"],[22,43,28,41],[22,45,28,43,"state"],[22,50,28,48],[22,52,28,50],[23,4,29,2],[23,5,29,3],[23,6,29,4],[23,8,29,6,"_react"],[23,14,29,12],[23,15,29,13,"useEffect"],[23,24,29,22],[23,26,29,24],[23,32,29,30],[24,6,30,4],[24,13,30,11,"_mountRegistry"],[24,27,30,25],[24,28,30,26,"MountRegistry"],[24,41,30,39],[24,42,30,40,"addMountListener"],[24,58,30,56],[24,59,30,57,"gesture"],[24,66,30,64],[24,70,30,68],[25,8,31,6],[26,8,32,6],[27,8,33,6],[28,8,34,6],[28,13,34,11],[28,19,34,17,"attachedGesture"],[28,34,34,32],[28,38,34,36,"state"],[28,43,34,41],[28,44,34,42,"attachedGestures"],[28,60,34,58],[28,62,34,60],[29,10,35,8],[29,16,35,14,"blocksHandlers"],[29,30,35,28],[29,33,35,31,"attachedGesture"],[29,48,35,46],[29,49,35,47,"config"],[29,55,35,53],[29,56,35,54,"blocksHandlers"],[29,70,35,68],[30,10,36,8],[30,16,36,14,"requireToFail"],[30,29,36,27],[30,32,36,30,"attachedGesture"],[30,47,36,45],[30,48,36,46,"config"],[30,54,36,52],[30,55,36,53,"requireToFail"],[30,68,36,66],[31,10,37,8],[31,16,37,14,"simultaneousWith"],[31,32,37,30],[31,35,37,33,"attachedGesture"],[31,50,37,48],[31,51,37,49,"config"],[31,57,37,55],[31,58,37,56,"simultaneousWith"],[31,74,37,72],[32,10,39,8],[32,14,39,12,"shouldUpdateDetector"],[32,34,39,32],[32,35,39,33,"blocksHandlers"],[32,49,39,47],[32,51,39,49,"gesture"],[32,58,39,56],[32,59,39,57],[32,63,39,61,"shouldUpdateDetector"],[32,83,39,81],[32,84,39,82,"requireToFail"],[32,97,39,95],[32,99,39,97,"gesture"],[32,106,39,104],[32,107,39,105],[32,111,39,109,"shouldUpdateDetector"],[32,131,39,129],[32,132,39,130,"simultaneousWith"],[32,148,39,146],[32,150,39,148,"gesture"],[32,157,39,155],[32,158,39,156],[32,160,39,158],[33,12,40,10,"updateDetector"],[33,26,40,24],[33,27,40,25],[33,28,40,26],[33,29,40,27],[33,30,40,28],[35,12,42,10],[36,10,43,8],[37,8,44,6],[38,6,45,4],[38,7,45,5],[38,8,45,6],[39,4,46,2],[39,5,46,3],[39,7,46,5],[39,8,46,6,"updateDetector"],[39,22,46,20],[39,24,46,22,"state"],[39,29,46,27],[39,30,46,28],[39,31,46,29],[40,2,47,0],[41,0,47,1],[41,3]],"functionMap":{"names":["<global>","shouldUpdateDetector","useMountReactions","<anonymous>","_mountRegistry.MountRegistry.addMountListener$argument_0"],"mappings":"AAA;ACa;CDY;AEE;wBCC;yDCC;KDe;GDC;CFC"},"hasCjsExports":true},"type":"js/module"}]}