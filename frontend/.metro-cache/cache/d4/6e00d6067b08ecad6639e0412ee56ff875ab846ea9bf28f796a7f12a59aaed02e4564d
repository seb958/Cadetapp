{"dependencies":[{"name":"../../utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":13,"index":140},"end":{"line":7,"column":35,"index":162}}],"key":"/gxgMVIBQIOS9WgzAWnJsYriGvM=","exportNames":["*"],"imports":1}},{"name":"../../../mountRegistry","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":21,"index":185},"end":{"line":8,"column":54,"index":218}}],"key":"EgFtYEHVZph/u3n2IoKpGlRcNgQ=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":13,"index":233},"end":{"line":9,"column":29,"index":249}}],"key":"XN65eZP/QkNMzaBAXbG/zPyidpY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useMountReactions = useMountReactions;\n  var _utils = require(_dependencyMap[0], \"../../utils\");\n  var _mountRegistry = require(_dependencyMap[1], \"../../../mountRegistry\");\n  var _react = require(_dependencyMap[2], \"react\");\n  function shouldUpdateDetector(relation, gesture) {\n    if (relation === undefined) {\n      return false;\n    }\n    for (const tag of (0, _utils.transformIntoHandlerTags)(relation)) {\n      if (tag === gesture.handlerTag) {\n        return true;\n      }\n    }\n    return false;\n  }\n  function useMountReactions(updateDetector, state) {\n    (0, _react.useEffect)(() => {\n      return _mountRegistry.MountRegistry.addMountListener(gesture => {\n        // At this point the ref in the gesture config should be updated, so we can check if one of the gestures\n        // set in a relation with the gesture got mounted. If so, we need to update the detector to propagate\n        // the changes to the native side.\n        for (const attachedGesture of state.attachedGestures) {\n          const blocksHandlers = attachedGesture.config.blocksHandlers;\n          const requireToFail = attachedGesture.config.requireToFail;\n          const simultaneousWith = attachedGesture.config.simultaneousWith;\n          if (shouldUpdateDetector(blocksHandlers, gesture) || shouldUpdateDetector(requireToFail, gesture) || shouldUpdateDetector(simultaneousWith, gesture)) {\n            updateDetector();\n\n            // We can safely return here, if any other gestures should be updated, they will be by the above call\n            return;\n          }\n        }\n      });\n    }, [updateDetector, state]);\n  }\n});","lineCount":42,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"useMountReactions"],[7,27,6,25],[7,30,6,28,"useMountReactions"],[7,47,6,45],[8,2,7,0],[8,6,7,4,"_utils"],[8,12,7,10],[8,15,7,13,"require"],[8,22,7,20],[8,23,7,20,"_dependencyMap"],[8,37,7,20],[8,55,7,34],[8,56,7,35],[9,2,8,0],[9,6,8,4,"_mountRegistry"],[9,20,8,18],[9,23,8,21,"require"],[9,30,8,28],[9,31,8,28,"_dependencyMap"],[9,45,8,28],[9,74,8,53],[9,75,8,54],[10,2,9,0],[10,6,9,4,"_react"],[10,12,9,10],[10,15,9,13,"require"],[10,22,9,20],[10,23,9,20,"_dependencyMap"],[10,37,9,20],[10,49,9,28],[10,50,9,29],[11,2,10,0],[11,11,10,9,"shouldUpdateDetector"],[11,31,10,29,"shouldUpdateDetector"],[11,32,10,30,"relation"],[11,40,10,38],[11,42,10,40,"gesture"],[11,49,10,47],[11,51,10,49],[12,4,11,2],[12,8,11,6,"relation"],[12,16,11,14],[12,21,11,19,"undefined"],[12,30,11,28],[12,32,11,30],[13,6,12,4],[13,13,12,11],[13,18,12,16],[14,4,13,2],[15,4,14,2],[15,9,14,7],[15,15,14,13,"tag"],[15,18,14,16],[15,22,14,20],[15,23,14,21],[15,24,14,22],[15,26,14,24,"_utils"],[15,32,14,30],[15,33,14,31,"transformIntoHandlerTags"],[15,57,14,55],[15,59,14,57,"relation"],[15,67,14,65],[15,68,14,66],[15,70,14,68],[16,6,15,4],[16,10,15,8,"tag"],[16,13,15,11],[16,18,15,16,"gesture"],[16,25,15,23],[16,26,15,24,"handlerTag"],[16,36,15,34],[16,38,15,36],[17,8,16,6],[17,15,16,13],[17,19,16,17],[18,6,17,4],[19,4,18,2],[20,4,19,2],[20,11,19,9],[20,16,19,14],[21,2,20,0],[22,2,21,0],[22,11,21,9,"useMountReactions"],[22,28,21,26,"useMountReactions"],[22,29,21,27,"updateDetector"],[22,43,21,41],[22,45,21,43,"state"],[22,50,21,48],[22,52,21,50],[23,4,22,2],[23,5,22,3],[23,6,22,4],[23,8,22,6,"_react"],[23,14,22,12],[23,15,22,13,"useEffect"],[23,24,22,22],[23,26,22,24],[23,32,22,30],[24,6,23,4],[24,13,23,11,"_mountRegistry"],[24,27,23,25],[24,28,23,26,"MountRegistry"],[24,41,23,39],[24,42,23,40,"addMountListener"],[24,58,23,56],[24,59,23,57,"gesture"],[24,66,23,64],[24,70,23,68],[25,8,24,6],[26,8,25,6],[27,8,26,6],[28,8,27,6],[28,13,27,11],[28,19,27,17,"attachedGesture"],[28,34,27,32],[28,38,27,36,"state"],[28,43,27,41],[28,44,27,42,"attachedGestures"],[28,60,27,58],[28,62,27,60],[29,10,28,8],[29,16,28,14,"blocksHandlers"],[29,30,28,28],[29,33,28,31,"attachedGesture"],[29,48,28,46],[29,49,28,47,"config"],[29,55,28,53],[29,56,28,54,"blocksHandlers"],[29,70,28,68],[30,10,29,8],[30,16,29,14,"requireToFail"],[30,29,29,27],[30,32,29,30,"attachedGesture"],[30,47,29,45],[30,48,29,46,"config"],[30,54,29,52],[30,55,29,53,"requireToFail"],[30,68,29,66],[31,10,30,8],[31,16,30,14,"simultaneousWith"],[31,32,30,30],[31,35,30,33,"attachedGesture"],[31,50,30,48],[31,51,30,49,"config"],[31,57,30,55],[31,58,30,56,"simultaneousWith"],[31,74,30,72],[32,10,31,8],[32,14,31,12,"shouldUpdateDetector"],[32,34,31,32],[32,35,31,33,"blocksHandlers"],[32,49,31,47],[32,51,31,49,"gesture"],[32,58,31,56],[32,59,31,57],[32,63,31,61,"shouldUpdateDetector"],[32,83,31,81],[32,84,31,82,"requireToFail"],[32,97,31,95],[32,99,31,97,"gesture"],[32,106,31,104],[32,107,31,105],[32,111,31,109,"shouldUpdateDetector"],[32,131,31,129],[32,132,31,130,"simultaneousWith"],[32,148,31,146],[32,150,31,148,"gesture"],[32,157,31,155],[32,158,31,156],[32,160,31,158],[33,12,32,10,"updateDetector"],[33,26,32,24],[33,27,32,25],[33,28,32,26],[35,12,34,10],[36,12,35,10],[37,10,36,8],[38,8,37,6],[39,6,38,4],[39,7,38,5],[39,8,38,6],[40,4,39,2],[40,5,39,3],[40,7,39,5],[40,8,39,6,"updateDetector"],[40,22,39,20],[40,24,39,22,"state"],[40,29,39,27],[40,30,39,28],[40,31,39,29],[41,2,40,0],[42,0,40,1],[42,3]],"functionMap":{"names":["<global>","shouldUpdateDetector","useMountReactions","<anonymous>","_mountRegistry.MountRegistry.addMountListener$argument_0"],"mappings":"AAA;ACS;CDU;AEC;wBCC;yDCC;KDe;GDC;CFC"},"hasCjsExports":true},"type":"js/module"}]}